(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2888],{7145:e=>{"use strict";function t(e,t){Object.freeze(t=t?Array.isArray(t)?t:[t]:[]);var i=e.renderer.rules.link_open||this.defaultRender;e.renderer.rules.link_open=function(e,n,r,s,o){var l=function(e,t){var i,n,r=e.attrs[e.attrIndex("href")][1];for(i=0;i<t.length;++i)if("function"!=typeof(n=t[i]).matcher||n.matcher(r,n))return n}(e[n],t),a=l&&l.attrs;return a&&function(e,t,i){Object.keys(i).forEach(function(n){var r,s=i[n];"className"===n&&(n="class"),(r=t[e].attrIndex(n))<0?t[e].attrPush([n,s]):t[e].attrs[r][1]=s})}(n,e,a),i(e,n,r,s,o)}}t.defaultRender=function(e,t,i,n,r){return r.renderToken(e,t,i)},e.exports=t},6840:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return i(1721)}])},1539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{DynamicServerError:function(){return n},isDynamicServerError:function(){return r}});let i="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=i}}function r(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===i}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2499:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return s}});let n=i(3394),r=i(7511);function s(e){return(0,r.isRedirectError)(e)||(0,n.isNotFoundError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6432:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{ReadonlyURLSearchParams:function(){return a.ReadonlyURLSearchParams},RedirectType:function(){return a.RedirectType},ServerInsertedHTMLContext:function(){return c.ServerInsertedHTMLContext},notFound:function(){return a.notFound},permanentRedirect:function(){return a.permanentRedirect},redirect:function(){return a.redirect},unstable_rethrow:function(){return a.unstable_rethrow},useParams:function(){return p},usePathname:function(){return d},useRouter:function(){return f},useSearchParams:function(){return u},useSelectedLayoutSegment:function(){return m},useSelectedLayoutSegments:function(){return g},useServerInsertedHTML:function(){return c.useServerInsertedHTML}});let n=i(7294),r=i(257),s=i(2608),o=i(1288),l=i(6406),a=i(2717),h=i(7325),c=i(5988);function u(){let e=(0,n.useContext)(s.SearchParamsContext);return(0,n.useMemo)(()=>e?new a.ReadonlyURLSearchParams(e):null,[e])}function d(){return(0,h.useDynamicRouteParams)("usePathname()"),(0,n.useContext)(s.PathnameContext)}function f(){let e=(0,n.useContext)(r.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e}function p(){return(0,h.useDynamicRouteParams)("useParams()"),(0,n.useContext)(s.PathParamsContext)}function g(e){void 0===e&&(e="children"),(0,h.useDynamicRouteParams)("useSelectedLayoutSegments()");let t=(0,n.useContext)(r.LayoutRouterContext);return t?function e(t,i,n,r){let s;if(void 0===n&&(n=!0),void 0===r&&(r=[]),n)s=t[1][i];else{var a;let e=t[1];s=null!=(a=e.children)?a:Object.values(e)[0]}if(!s)return r;let h=s[0],c=(0,o.getSegmentValue)(h);return!c||c.startsWith(l.PAGE_SEGMENT_KEY)?r:(r.push(c),e(s,i,!1,r))}(t.tree,e):null}function m(e){void 0===e&&(e="children"),(0,h.useDynamicRouteParams)("useSelectedLayoutSegment()");let t=g(e);if(!t||0===t.length)return null;let i="children"===e?t[0]:t[t.length-1];return i===l.DEFAULT_SEGMENT_KEY?null:i}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2717:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{ReadonlyURLSearchParams:function(){return l},RedirectType:function(){return n.RedirectType},notFound:function(){return r.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unstable_rethrow:function(){return s.unstable_rethrow}});let n=i(7511),r=i(3394),s=i(5173);class o extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class l extends URLSearchParams{append(){throw new o}delete(){throw new o}set(){throw new o}sort(){throw new o}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3394:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{isNotFoundError:function(){return r},notFound:function(){return n}});let i="NEXT_NOT_FOUND";function n(){let e=Error(i);throw e.digest=i,e}function r(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===i}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4234:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return i}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(i||(i={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7511:(e,t,i)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return d},getURLFromRedirectError:function(){return u},isRedirectError:function(){return c},permanentRedirect:function(){return h},redirect:function(){return a}});let r=i(5107),s=i(4234),o="NEXT_REDIRECT";function l(e,t,i){void 0===i&&(i=s.RedirectStatusCode.TemporaryRedirect);let n=Error(o);return n.digest=o+";"+t+";"+e+";"+i+";",n}function a(e,t){let i=r.actionAsyncStorage.getStore();throw l(e,t||((null==i?void 0:i.isAction)?"push":"replace"),s.RedirectStatusCode.TemporaryRedirect)}function h(e,t){throw void 0===t&&(t="replace"),l(e,t,s.RedirectStatusCode.PermanentRedirect)}function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[i,n]=t,r=t.slice(2,-2).join(";"),l=Number(t.at(-2));return i===o&&("replace"===n||"push"===n)&&"string"==typeof r&&!isNaN(l)&&l in s.RedirectStatusCode}function u(e){return c(e)?e.digest.split(";").slice(2,-2).join(";"):null}function d(e){if(!c(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function f(e){if(!c(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}!function(e){e.push="push",e.replace="replace"}(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1288:(e,t)=>{"use strict";function i(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return i}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8199:(e,t)=>{"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{ACTION_HMR_REFRESH:function(){return h},ACTION_NAVIGATE:function(){return s},ACTION_PREFETCH:function(){return a},ACTION_REFRESH:function(){return r},ACTION_RESTORE:function(){return o},ACTION_SERVER_ACTION:function(){return c},ACTION_SERVER_PATCH:function(){return l},PrefetchCacheEntryStatus:function(){return n},PrefetchKind:function(){return i}});let r="refresh",s="navigate",o="restore",l="server-patch",a="prefetch",h="hmr-refresh",c="server-action";!function(e){e.AUTO="auto",e.FULL="full",e.TEMPORARY="temporary"}(i||(i={})),function(e){e.fresh="fresh",e.reusable="reusable",e.expired="expired",e.stale="stale"}(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{StaticGenBailoutError:function(){return n},isStaticGenBailoutError:function(){return r}});let i="NEXT_STATIC_GEN_BAILOUT";class n extends Error{constructor(...e){super(...e),this.code=i}}function r(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===i}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5173:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,o.isNextRouterError)(t)||(0,s.isBailoutToCSRError)(t)||(0,n.isDynamicUsageError)(t)||(0,r.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=i(8195),r=i(6111),s=i(947),o=i(2499);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7195:(e,t,i)=>{"use strict";function n(e,t,i,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),i(8337),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8342:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x}});let n=i(8754),r=i(5893),s=n._(i(7294)),o=i(6075),l=i(3955),a=i(8041),h=i(9903),c=i(5490),u=i(1928),d=i(257),f=i(4229),p=i(7195),g=i(9470),m=i(8199),y=i(2145),v=new Set;function w(e,t,i,n,r,s){if(s||(0,l.isLocalURL)(t)){if(!n.bypassPrefetchedCheck&&!s){let r=t+"%"+i+"%"+(void 0!==n.locale?n.locale:"locale"in e?e.locale:void 0);if(v.has(r))return;v.add(r)}(async()=>s?e.prefetch(t,r):e.prefetch(t,i,n))().catch(e=>{})}}function b(e){return"string"==typeof e?e:(0,a.formatUrl)(e)}let x=s.default.forwardRef(function(e,t){let i,n;let{href:a,as:v,children:x,prefetch:S=null,passHref:k,replace:M,shallow:C,scroll:O,locale:T,onClick:A,onMouseEnter:E,onTouchStart:D,legacyBehavior:P=!1,...R}=e;i=x,P&&("string"==typeof i||"number"==typeof i)&&(i=(0,r.jsx)("a",{children:i}));let _=s.default.useContext(u.RouterContext),j=s.default.useContext(d.AppRouterContext),L=null!=_?_:j,N=!_,I=!1!==S,B=null===S?m.PrefetchKind.AUTO:m.PrefetchKind.FULL,{href:H,as:V}=s.default.useMemo(()=>{if(!_){let e=b(a);return{href:e,as:v?b(v):e}}let[e,t]=(0,o.resolveHref)(_,a,!0);return{href:e,as:v?(0,o.resolveHref)(_,v):t||e}},[_,a,v]),F=s.default.useRef(H),W=s.default.useRef(V);P&&(n=s.default.Children.only(i));let z=P?n&&"object"==typeof n&&n.ref:t,[$,q,U]=(0,f.useIntersection)({rootMargin:"200px"}),K=s.default.useCallback(e=>{(W.current!==V||F.current!==H)&&(U(),W.current=V,F.current=H),$(e)},[V,H,U,$]),G=(0,y.useMergedRef)(K,z);s.default.useEffect(()=>{L&&q&&I&&w(L,H,V,{locale:T},{kind:B},N)},[V,H,q,T,I,null==_?void 0:_.locale,L,N,B]);let X={ref:G,onClick(e){P||"function"!=typeof A||A(e),P&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),L&&!e.defaultPrevented&&function(e,t,i,n,r,o,a,h,c){let{nodeName:u}=e.currentTarget;if("A"===u.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!c&&!(0,l.isLocalURL)(i)))return;e.preventDefault();let d=()=>{let e=null==a||a;"beforePopState"in t?t[r?"replace":"push"](i,n,{shallow:o,locale:h,scroll:e}):t[r?"replace":"push"](n||i,{scroll:e})};c?s.default.startTransition(d):d()}(e,L,H,V,M,C,O,T,N)},onMouseEnter(e){P||"function"!=typeof E||E(e),P&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),L&&(I||!N)&&w(L,H,V,{locale:T,priority:!0,bypassPrefetchedCheck:!0},{kind:B},N)},onTouchStart:function(e){P||"function"!=typeof D||D(e),P&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),L&&(I||!N)&&w(L,H,V,{locale:T,priority:!0,bypassPrefetchedCheck:!0},{kind:B},N)}};if((0,h.isAbsoluteUrl)(V))X.href=V;else if(!P||k||"a"===n.type&&!("href"in n.props)){let e=void 0!==T?T:null==_?void 0:_.locale,t=(null==_?void 0:_.isLocaleDomain)&&(0,p.getDomainLocale)(V,e,null==_?void 0:_.locales,null==_?void 0:_.domainLocales);X.href=t||(0,g.addBasePath)((0,c.addLocale)(V,e,null==_?void 0:_.defaultLocale))}return P?s.default.cloneElement(n,X):(0,r.jsx)("a",{...R,...X,children:i})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4229:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return a}});let n=i(7294),r=i(4474),s="function"==typeof IntersectionObserver,o=new Map,l=[];function a(e){let{rootRef:t,rootMargin:i,disabled:a}=e,h=a||!s,[c,u]=(0,n.useState)(!1),d=(0,n.useRef)(null),f=(0,n.useCallback)(e=>{d.current=e},[]);return(0,n.useEffect)(()=>{if(s){if(h||c)return;let e=d.current;if(e&&e.tagName)return function(e,t,i){let{id:n,observer:r,elements:s}=function(e){let t;let i={root:e.root||null,margin:e.rootMargin||""},n=l.find(e=>e.root===i.root&&e.margin===i.margin);if(n&&(t=o.get(n)))return t;let r=new Map;return t={id:i,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=r.get(e.target),i=e.isIntersecting||e.intersectionRatio>0;t&&i&&t(i)})},e),elements:r},l.push(i),o.set(i,t),t}(i);return s.set(e,t),r.observe(e),function(){if(s.delete(e),r.unobserve(e),0===s.size){r.disconnect(),o.delete(n);let e=l.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&l.splice(e,1)}}}(e,e=>e&&u(e),{root:null==t?void 0:t.current,rootMargin:i})}else if(!c){let e=(0,r.requestIdleCallback)(()=>u(!0));return()=>(0,r.cancelIdleCallback)(e)}},[h,i,t,c,d.current]),[f,c,(0,n.useCallback)(()=>{u(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2145:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return r}});let n=i(7294);function r(e,t){let i=(0,n.useRef)(()=>{}),r=(0,n.useRef)(()=>{});return(0,n.useMemo)(()=>e&&t?n=>{null===n?(i.current(),r.current()):(i.current=s(e,n),r.current=s(t,n))}:e||t,[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let i=e(t);return"function"==typeof i?i:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5988:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{ServerInsertedHTMLContext:function(){return r},useServerInsertedHTML:function(){return s}});let n=i(1757)._(i(7294)),r=n.default.createContext(null);function s(e){let t=(0,n.useContext)(r);t&&t(e)}},7348:(e,t,i)=>{"use strict";i.d(t,{Q8:()=>c,VL:()=>a,Wy:()=>h,aK:()=>r,bI:()=>o,hL:()=>l,qG:()=>n,xC:()=>s});let n="storaged_store_key_rt",r="/md-editor-rt",s="MdEditorRT 使用文档",o="MdEditorRT Documentation",l="MD Editor, md-editor-rt, Markdown 编辑器, React Markdown, React TSX, Markdown 组件, Markdown preview, React 编辑器",a="md-editor-rt 是一个基于 React 和 TSX 开发的 Markdown 编辑器组件，支持实时预览和丰富的 Markdown 功能。查阅详细的开发文档与使用示例。",h="MD Editor, md-editor-rt, Markdown Editor, React Markdown, React TSX, Markdown Component, Markdown preview, React Editor",c="md-editor-rt is a Markdown editor component developed based on React and TSX, supporting real-time preview and rich Markdown features. Review the detailed development documentation and usage examples."},8570:(e,t,i)=>{"use strict";i.d(t,{J:()=>r});var n=i(9332);let r=()=>{let e=(0,n.usePathname)();return(null==e?void 0:e.startsWith("/zh-CN"))?"zh-CN":"en-US"}},2999:(e,t,i)=>{"use strict";i.d(t,{C:()=>s,T:()=>r});var n=i(5007);let r=n.I0,s=n.v9},1721:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>ty});var n,r=i(5893),s=i(5007),o=i(4549);function l(e){function t(e,t){let i=[],n=t.length;for(let r=0;r<n;r++){let n=t[r];if(61!==n.marker||-1===n.end)continue;let s=t[n.end],o=e.tokens[n.token];o.type="mark_open",o.tag="mark",o.nesting=1,o.markup="==",o.content="";let l=e.tokens[s.token];l.type="mark_close",l.tag="mark",l.nesting=-1,l.markup="==",l.content="","text"===e.tokens[s.token-1].type&&"="===e.tokens[s.token-1].content&&i.push(s.token-1)}for(;i.length;){let t=i.pop(),n=t+1;for(;n<e.tokens.length&&"mark_close"===e.tokens[n].type;)n++;if(t!==--n){let i=e.tokens[n];e.tokens[n]=e.tokens[t],e.tokens[t]=i}}}e.inline.ruler.before("emphasis","mark",function(e,t){let i=e.pos,n=e.src.charCodeAt(i);if(t||61!==n)return!1;let r=e.scanDelims(e.pos,!0),s=r.length,o=String.fromCharCode(n);if(s<2)return!1;s%2&&(e.push("text","",0).content=o,s--);for(let t=0;t<s;t+=2)e.push("text","",0).content=o+o,(r.can_open||r.can_close)&&e.delimiters.push({marker:n,length:0,jump:t/2,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0}),e.inline.ruler2.before("emphasis","mark",function(e){let i;let n=e.tokens_meta,r=(e.tokens_meta||[]).length;for(t(e,e.delimiters),i=0;i<r;i++)n[i]&&n[i].delimiters&&t(e,n[i].delimiters)})}var a=i(3454),h=!1,c={false:"push",true:"unshift",after:"push",before:"unshift"},u={isPermalinkSymbol:!0};function d(e,t,i,n){if(!h){var r,s="Using deprecated markdown-it-anchor permalink option, see https://github.com/valeriangalliat/markdown-it-anchor#permalinks";"object"==typeof a&&a&&a.emitWarning?a.emitWarning(s):console.warn(s),h=!0}var o=[Object.assign(new i.Token("link_open","a",1),{attrs:[].concat(t.permalinkClass?[["class",t.permalinkClass]]:[],[["href",t.permalinkHref(e,i)]],Object.entries(t.permalinkAttrs(e,i)))}),Object.assign(new i.Token("html_block","",0),{content:t.permalinkSymbol,meta:u}),new i.Token("link_close","a",-1)];t.permalinkSpace&&i.tokens[n+1].children[c[t.permalinkBefore]](Object.assign(new i.Token("text","",0),{content:" "})),(r=i.tokens[n+1].children)[c[t.permalinkBefore]].apply(r,o)}function f(e){return"#"+e}function p(e){return{}}var g={class:"header-anchor",symbol:"#",renderHref:f,renderAttrs:p};function m(e){function t(i){return i=Object.assign({},t.defaults,i),function(t,n,r,s){return e(t,i,n,r,s)}}return t.defaults=Object.assign({},g),t.renderPermalinkImpl=e,t}function y(e){var t=[],i=e.filter(function(e){if("class"!==e[0])return!0;t.push(e[1])});return t.length>0&&i.unshift(["class",t.join(" ")]),i}var v=m(function(e,t,i,n,r){var s,o=[Object.assign(new n.Token("link_open","a",1),{attrs:y([].concat(t.class?[["class",t.class]]:[],[["href",t.renderHref(e,n)]],t.ariaHidden?[["aria-hidden","true"]]:[],Object.entries(t.renderAttrs(e,n))))}),Object.assign(new n.Token("html_inline","",0),{content:t.symbol,meta:u}),new n.Token("link_close","a",-1)];if(t.space){var l="string"==typeof t.space?t.space:" ";n.tokens[r+1].children[c[t.placement]](Object.assign(new n.Token("string"==typeof t.space?"html_inline":"text","",0),{content:l}))}(s=n.tokens[r+1].children)[c[t.placement]].apply(s,o)});Object.assign(v.defaults,{space:!0,placement:"after",ariaHidden:!1});var w=m(v.renderPermalinkImpl);w.defaults=Object.assign({},v.defaults,{ariaHidden:!0});var b=m(function(e,t,i,n,r){var s=[Object.assign(new n.Token("link_open","a",1),{attrs:y([].concat(t.class?[["class",t.class]]:[],[["href",t.renderHref(e,n)]],Object.entries(t.renderAttrs(e,n))))})].concat(t.safariReaderFix?[new n.Token("span_open","span",1)]:[],n.tokens[r+1].children,t.safariReaderFix?[new n.Token("span_close","span",-1)]:[],[new n.Token("link_close","a",-1)]);n.tokens[r+1]=Object.assign(new n.Token("inline","",0),{children:s})});Object.assign(b.defaults,{safariReaderFix:!1});var x=m(function(e,t,i,n,r){if(!["visually-hidden","aria-label","aria-describedby","aria-labelledby"].includes(t.style))throw Error("`permalink.linkAfterHeader` called with unknown style option `"+t.style+"`");if(!["aria-describedby","aria-labelledby"].includes(t.style)&&!t.assistiveText)throw Error("`permalink.linkAfterHeader` called without the `assistiveText` option in `"+t.style+"` style");if("visually-hidden"===t.style&&!t.visuallyHiddenClass)throw Error("`permalink.linkAfterHeader` called without the `visuallyHiddenClass` option in `visually-hidden` style");var s,o=n.tokens[r+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,t){return e+t.content},""),l=[],a=[];if(t.class&&a.push(["class",t.class]),a.push(["href",t.renderHref(e,n)]),a.push.apply(a,Object.entries(t.renderAttrs(e,n))),"visually-hidden"===t.style){if(l.push(Object.assign(new n.Token("span_open","span",1),{attrs:[["class",t.visuallyHiddenClass]]}),Object.assign(new n.Token("text","",0),{content:t.assistiveText(o)}),new n.Token("span_close","span",-1)),t.space){var h="string"==typeof t.space?t.space:" ";l[c[t.placement]](Object.assign(new n.Token("string"==typeof t.space?"html_inline":"text","",0),{content:h}))}l[c[t.placement]](Object.assign(new n.Token("span_open","span",1),{attrs:[["aria-hidden","true"]]}),Object.assign(new n.Token("html_inline","",0),{content:t.symbol,meta:u}),new n.Token("span_close","span",-1))}else l.push(Object.assign(new n.Token("html_inline","",0),{content:t.symbol,meta:u}));"aria-label"===t.style?a.push(["aria-label",t.assistiveText(o)]):["aria-describedby","aria-labelledby"].includes(t.style)&&a.push([t.style,e]);var d=[Object.assign(new n.Token("link_open","a",1),{attrs:y(a)})].concat(l,[new n.Token("link_close","a",-1)]);(s=n.tokens).splice.apply(s,[r+3,0].concat(d)),t.wrapper&&(n.tokens.splice(r,0,Object.assign(new n.Token("html_block","",0),{content:t.wrapper[0]+"\n"})),n.tokens.splice(r+3+d.length+1,0,Object.assign(new n.Token("html_block","",0),{content:t.wrapper[1]+"\n"})))});function S(e,t,i,n){var r=e,s=n;if(i&&Object.prototype.hasOwnProperty.call(t,r))throw Error("User defined `id` attribute `"+e+"` is not unique. Please fix it in your Markdown to continue.");for(;Object.prototype.hasOwnProperty.call(t,r);)r=e+"-"+s,s+=1;return t[r]=!0,r}function k(e,t){t=Object.assign({},k.defaults,t),e.core.ruler.push("anchor",function(e){for(var i,n,r={},s=e.tokens,o=Array.isArray(t.level)?(n=t.level,function(e){return n.includes(e)}):(i=t.level,function(e){return e>=i}),l=0;l<s.length;l++){var a=s[l];if("heading_open"===a.type&&o(Number(a.tag.substr(1)))){var h=t.getTokensText(s[l+1].children),c=a.attrGet("id");c=null==c?S(c=t.slugifyWithState?t.slugifyWithState(h,e):t.slugify(h),r,!1,t.uniqueSlugStartIndex):S(c,r,!0,t.uniqueSlugStartIndex),a.attrSet("id",c),!1!==t.tabIndex&&a.attrSet("tabindex",""+t.tabIndex),"function"==typeof t.permalink?t.permalink(c,t,e,l):(t.permalink||t.renderPermalink&&t.renderPermalink!==d)&&t.renderPermalink(c,t,e,l),l=s.indexOf(a),t.callback&&t.callback(a,{slug:c,title:h})}}})}Object.assign(x.defaults,{style:"visually-hidden",space:!0,placement:"after",wrapper:null}),k.permalink={__proto__:null,legacy:d,renderHref:f,renderAttrs:p,makePermalink:m,linkInsideHeader:v,ariaHidden:w,headerLink:b,linkAfterHeader:x},k.defaults={level:1,slugify:function(e){return encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-"))},uniqueSlugStartIndex:1,tabIndex:"-1",getTokensText:function(e){return e.filter(function(e){return["text","code_inline"].includes(e.type)}).map(function(e){return e.content}).join("")},permalink:!1,renderPermalink:d,permalinkClass:w.defaults.class,permalinkSpace:w.defaults.space,permalinkSymbol:"\xb6",permalinkBefore:"before"===w.defaults.placement,permalinkHref:w.defaults.renderHref,permalinkAttrs:w.defaults.renderAttrs},k.default=k;var M=i(7145),C=i.n(M),O=i(5533),T=i(7348);function A(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var E="function"==typeof Symbol&&Symbol.observable||"@@observable",D=()=>Math.random().toString(36).substring(7).split("").join("."),P={INIT:`@@redux/INIT${D()}`,REPLACE:`@@redux/REPLACE${D()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${D()}`};function R(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function _(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...i)=>e(t(...i)))}function j(e){return({dispatch:t,getState:i})=>n=>r=>"function"==typeof r?r(t,i,e):n(r)}var L=j(),N=Symbol.for("immer-nothing"),I=Symbol.for("immer-draftable"),B=Symbol.for("immer-state");function H(e,...t){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var V=Object.getPrototypeOf;function F(e){return!!e&&!!e[B]}function W(e){return!!e&&($(e)||Array.isArray(e)||!!e[I]||!!e.constructor?.[I]||X(e)||Y(e))}var z=Object.prototype.constructor.toString();function $(e){if(!e||"object"!=typeof e)return!1;let t=V(e);if(null===t)return!0;let i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object||"function"==typeof i&&Function.toString.call(i)===z}function q(e,t){0===U(e)?Reflect.ownKeys(e).forEach(i=>{t(i,e[i],e)}):e.forEach((i,n)=>t(n,i,e))}function U(e){let t=e[B];return t?t.type_:Array.isArray(e)?1:X(e)?2:Y(e)?3:0}function K(e,t){return 2===U(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function G(e,t,i){let n=U(e);2===n?e.set(t,i):3===n?e.add(i):e[t]=i}function X(e){return e instanceof Map}function Y(e){return e instanceof Set}function J(e){return e.copy_||e.base_}function Q(e,t){if(X(e))return new Map(e);if(Y(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let i=$(e);if(!0!==t&&("class_only"!==t||i)){let t=V(e);return null!==t&&i?{...e}:Object.assign(Object.create(t),e)}{let t=Object.getOwnPropertyDescriptors(e);delete t[B];let i=Reflect.ownKeys(t);for(let n=0;n<i.length;n++){let r=i[n],s=t[r];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[r]})}return Object.create(V(e),t)}}function Z(e,t=!1){return et(e)||F(e)||!W(e)||(U(e)>1&&(e.set=e.add=e.clear=e.delete=ee),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>Z(t,!0))),e}function ee(){H(2)}function et(e){return Object.isFrozen(e)}var ei={};function en(e){let t=ei[e];return t||H(0,e),t}function er(e,t){t&&(en("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function es(e){eo(e),e.drafts_.forEach(ea),e.drafts_=null}function eo(e){e===n&&(n=e.parent_)}function el(e){return n={drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ea(e){let t=e[B];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function eh(e,t){t.unfinalizedDrafts_=t.drafts_.length;let i=t.drafts_[0];return void 0!==e&&e!==i?(i[B].modified_&&(es(t),H(4)),W(e)&&(e=ec(t,e),t.parent_||ed(t,e)),t.patches_&&en("Patches").generateReplacementPatches_(i[B].base_,e,t.patches_,t.inversePatches_)):e=ec(t,i,[]),es(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==N?e:void 0}function ec(e,t,i){if(et(t))return t;let n=t[B];if(!n)return q(t,(r,s)=>eu(e,n,t,r,s,i)),t;if(n.scope_!==e)return t;if(!n.modified_)return ed(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,r=t,s=!1;3===n.type_&&(r=new Set(t),t.clear(),s=!0),q(r,(r,o)=>eu(e,n,t,r,o,i,s)),ed(e,t,!1),i&&e.patches_&&en("Patches").generatePatches_(n,i,e.patches_,e.inversePatches_)}return n.copy_}function eu(e,t,i,n,r,s,o){if(F(r)){let o=ec(e,r,s&&t&&3!==t.type_&&!K(t.assigned_,n)?s.concat(n):void 0);if(G(i,n,o),!F(o))return;e.canAutoFreeze_=!1}else o&&i.add(r);if(W(r)&&!et(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ec(e,r),(!t||!t.scope_.parent_)&&"symbol"!=typeof n&&Object.prototype.propertyIsEnumerable.call(i,n)&&ed(e,r)}}function ed(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Z(t,i)}var ef={get(e,t){if(t===B)return e;let i=J(e);if(!K(i,t))return function(e,t,i){let n=em(t,i);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,i,t);let n=i[t];return e.finalized_||!W(n)?n:n===eg(e.base_,t)?(ev(e),e.copy_[t]=ew(n,e)):n},has:(e,t)=>t in J(e),ownKeys:e=>Reflect.ownKeys(J(e)),set(e,t,i){let n=em(J(e),t);if(n?.set)return n.set.call(e.draft_,i),!0;if(!e.modified_){let n=eg(J(e),t),r=n?.[B];if(r&&r.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if((i===n?0!==i||1/i==1/n:i!=i&&n!=n)&&(void 0!==i||K(e.base_,t)))return!0;ev(e),ey(e)}return!!(e.copy_[t]===i&&(void 0!==i||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=i,e.assigned_[t]=!0,!0)},deleteProperty:(e,t)=>(void 0!==eg(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ev(e),ey(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let i=J(e),n=Reflect.getOwnPropertyDescriptor(i,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:i[t]}:n},defineProperty(){H(11)},getPrototypeOf:e=>V(e.base_),setPrototypeOf(){H(12)}},ep={};function eg(e,t){let i=e[B];return(i?J(i):e)[t]}function em(e,t){if(!(t in e))return;let i=V(e);for(;i;){let e=Object.getOwnPropertyDescriptor(i,t);if(e)return e;i=V(i)}}function ey(e){!e.modified_&&(e.modified_=!0,e.parent_&&ey(e.parent_))}function ev(e){e.copy_||(e.copy_=Q(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function ew(e,t){let i=X(e)?en("MapSet").proxyMap_(e,t):Y(e)?en("MapSet").proxySet_(e,t):function(e,t){let i=Array.isArray(e),r={type_:i?1:0,scope_:t?t.scope_:n,modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},s=r,o=ef;i&&(s=[r],o=ep);let{revoke:l,proxy:a}=Proxy.revocable(s,o);return r.draft_=a,r.revoke_=l,a}(e,t);return(t?t.scope_:n).drafts_.push(i),i}q(ef,(e,t)=>{ep[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ep.deleteProperty=function(e,t){return ep.set.call(this,e,t,void 0)},ep.set=function(e,t,i){return ef.set.call(this,e[0],t,i,e[0])};var eb=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{let n;if("function"==typeof e&&"function"!=typeof t){let i=t;t=e;let n=this;return function(e=i,...r){return n.produce(e,e=>t.call(this,e,...r))}}if("function"!=typeof t&&H(6),void 0!==i&&"function"!=typeof i&&H(7),W(e)){let r=el(this),s=ew(e,void 0),o=!0;try{n=t(s),o=!1}finally{o?es(r):eo(r)}return er(r,i),eh(n,r)}if(e&&"object"==typeof e)H(1,e);else{if(void 0===(n=t(e))&&(n=e),n===N&&(n=void 0),this.autoFreeze_&&Z(n,!0),i){let t=[],r=[];en("Patches").generateReplacementPatches_(e,n,t,r),i(t,r)}return n}},this.produceWithPatches=(e,t)=>{let i,n;return"function"==typeof e?(t,...i)=>this.produceWithPatches(t,t=>e(t,...i)):[this.produce(e,t,(e,t)=>{i=e,n=t}),i,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;W(e)||H(8),F(e)&&(F(t=e)||H(10,t),e=function e(t){let i;if(!W(t)||et(t))return t;let n=t[B];if(n){if(!n.modified_)return n.base_;n.finalized_=!0,i=Q(t,n.scope_.immer_.useStrictShallowCopy_)}else i=Q(t,!0);return q(i,(t,n)=>{G(i,t,e(n))}),n&&(n.finalized_=!1),i}(t));let i=el(this),n=ew(e,void 0);return n[B].isManual_=!0,eo(i),n}finishDraft(e,t){let i=e&&e[B];i&&i.isManual_||H(9);let{scope_:n}=i;return er(n,t),eh(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){let n=t[i];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}i>-1&&(t=t.slice(i+1));let n=en("Patches").applyPatches_;return F(e)?n(e,t):this.produce(e,e=>n(e,t))}},ex=eb.produce;eb.produceWithPatches.bind(eb),eb.setAutoFreeze.bind(eb),eb.setUseStrictShallowCopy.bind(eb),eb.applyPatches.bind(eb),eb.createDraft.bind(eb),eb.finishDraft.bind(eb),i(3454);var eS="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!=arguments.length)return"object"==typeof arguments[0]?_:_.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var ek=e=>e&&"function"==typeof e.match;function eM(e,t){function i(...n){if(t){let i=t(...n);if(!i)throw Error(e3(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return i.toString=()=>`${e}`,i.type=e,i.match=t=>R(t)&&"type"in t&&"string"==typeof t.type&&t.type===e,i}function eC(e){return["type","payload","error","meta"].indexOf(e)>-1}var eO=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function eT(e){return W(e)?ex(e,()=>{}):e}function eA(e,t,i){if(e.has(t)){let n=e.get(t);return i.update&&(n=i.update(n,t,e),e.set(t,n)),n}if(!i.insert)throw Error(e3(10));let n=i.insert(t,e);return e.set(t,n),n}var eE=()=>function(e){let{thunk:t=!0,immutableCheck:i=!0,serializableCheck:n=!0,actionCreatorCheck:r=!0}=e??{},s=new eO;return t&&("boolean"==typeof t?s.push(L):s.push(j(t.extraArgument))),s},eD=e=>t=>{setTimeout(t,e)},eP="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:eD(10),eR=(e={type:"raf"})=>t=>(...i)=>{let n=t(...i),r=!0,s=!1,o=!1,l=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?eP:"callback"===e.type?e.queueNotification:eD(e.timeout),h=()=>{o=!1,s&&(s=!1,l.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){let t=n.subscribe(()=>r&&e());return l.add(e),()=>{t(),l.delete(e)}},dispatch(e){try{return(s=!(r=!e?.meta?.RTK_autoBatch))&&!o&&(o=!0,a(h)),n.dispatch(e)}finally{r=!0}}})},e_=e=>function(t){let{autoBatch:i=!0}=t??{},n=new eO(e);return i&&n.push(eR("object"==typeof i?i:void 0)),n};function ej(e){let t;let i={},n=[],r={addCase(e,t){let n="string"==typeof e?e:e.type;if(!n)throw Error(e3(28));if(n in i)throw Error(e3(29));return i[n]=t,r},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),r),addDefaultCase:e=>(t=e,r)};return e(r),[i,n,t]}var eL=(e,t)=>ek(e)?e.match(t):e(t),eN=(e=21)=>{let t="",i=e;for(;i--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},eI=["name","message","stack","code"],eB=Symbol.for("rtk-slice-createasyncthunk"),eH=(e=>(e.reducer="reducer",e.reducerWithPrepare="reducerWithPrepare",e.asyncThunk="asyncThunk",e))(eH||{}),eV=function({creators:e}={}){let t=e?.asyncThunk?.[eB];return function(e){let i;let{name:n,reducerPath:r=n}=e;if(!n)throw Error(e3(11));let s=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(s),l={},a={},h={},c=[],u={addCase(e,t){let i="string"==typeof e?e:e.type;if(!i)throw Error(e3(12));if(i in a)throw Error(e3(13));return a[i]=t,u},addMatcher:(e,t)=>(c.push({matcher:e,reducer:t}),u),exposeAction:(e,t)=>(h[e]=t,u),exposeCaseReducer:(e,t)=>(l[e]=t,u)};function d(){let[t={},i=[],n]="function"==typeof e.extraReducers?ej(e.extraReducers):[e.extraReducers],r={...t,...a};return function(e,t){let i;let[n,r,s]=ej(t);if("function"==typeof e)i=()=>eT(e());else{let t=eT(e);i=()=>t}function o(e=i(),t){let l=[n[t.type],...r.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===l.filter(e=>!!e).length&&(l=[s]),l.reduce((e,i)=>{if(i){if(F(e)){let n=i(e,t);return void 0===n?e:n}if(W(e))return ex(e,e=>i(e,t));{let n=i(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return o.getInitialState=i,o}(e.initialState,e=>{for(let t in r)e.addCase(t,r[t]);for(let t of c)e.addMatcher(t.matcher,t.reducer);for(let t of i)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}o.forEach(i=>{let r=s[i],o={reducerName:i,type:`${n}/${i}`,createNotation:"function"==typeof e.reducers};"asyncThunk"===r._reducerDefinitionType?function({type:e,reducerName:t},i,n,r){if(!r)throw Error(e3(18));let{payloadCreator:s,fulfilled:o,pending:l,rejected:a,settled:h,options:c}=i,u=r(e,s,c);n.exposeAction(t,u),o&&n.addCase(u.fulfilled,o),l&&n.addCase(u.pending,l),a&&n.addCase(u.rejected,a),h&&n.addMatcher(u.settled,h),n.exposeCaseReducer(t,{fulfilled:o||eF,pending:l||eF,rejected:a||eF,settled:h||eF})}(o,r,u,t):function({type:e,reducerName:t,createNotation:i},n,r){let s,o;if("reducer"in n){if(i&&"reducerWithPrepare"!==n._reducerDefinitionType)throw Error(e3(17));s=n.reducer,o=n.prepare}else s=n;r.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?eM(e,o):eM(e))}(o,r,u)});let f=e=>e,p=new Map;function g(e,t){return i||(i=d()),i(e,t)}function m(){return i||(i=d()),i.getInitialState()}function y(t,i=!1){function n(e){let n=e[t];return void 0===n&&i&&(n=m()),n}function r(t=f){let n=eA(p,i,{insert:()=>new WeakMap});return eA(n,t,{insert:()=>{let n={};for(let[r,s]of Object.entries(e.selectors??{}))n[r]=function(e,t,i,n){function r(s,...o){let l=t(s);return void 0===l&&n&&(l=i()),e(l,...o)}return r.unwrapped=e,r}(s,t,m,i);return n}})}return{reducerPath:t,getSelectors:r,get selectors(){return r(n)},selectSlice:n}}let v={name:n,reducer:g,actions:h,caseReducers:l,getInitialState:m,...y(r),injectInto(e,{reducerPath:t,...i}={}){let n=t??r;return e.inject({reducerPath:n,reducer:g},i),{...v,...y(n,!0)}}};return v}}();function eF(){}var eW=class{constructor(e){this.code=e,this.message=`task cancelled (reason: ${e})`}name="TaskAbortError";message},ez=(e,t)=>{if("function"!=typeof e)throw TypeError(e3(32))},e$=()=>{},eq=(e,t=e$)=>(e.catch(t),e),eU=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),eK=(e,t)=>{let i=e.signal;i.aborted||("reason"in i||Object.defineProperty(i,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},eG=e=>{if(e.aborted){let{reason:t}=e;throw new eW(t)}},eX=e=>t=>eq((function(e,t){let i=e$;return new Promise((n,r)=>{let s=()=>r(new eW(e.reason));if(e.aborted){s();return}i=eU(e,s),t.finally(()=>i()).then(n,r)}).finally(()=>{i=e$})})(e,t).then(t=>(eG(e),t))),{assign:eY}=Object,eJ="listenerMiddleware",eQ=e=>{let{type:t,actionCreator:i,matcher:n,predicate:r,effect:s}=e;if(t)r=eM(t).match;else if(i)t=i.type,r=i.match;else if(n)r=n;else if(r);else throw Error(e3(21));return ez(s,"options.listener"),{predicate:r,type:t,effect:s}},eZ=eY(e=>{let{type:t,predicate:i,effect:n}=eQ(e);return{id:eN(),effect:n,type:t,predicate:i,pending:new Set,unsubscribe:()=>{throw Error(e3(22))}}},{withTypes:()=>eZ}),e0=eY(eM(`${eJ}/add`),{withTypes:()=>e0}),e1=eY(eM(`${eJ}/remove`),{withTypes:()=>e1}),e2=Symbol.for("rtk-state-proxy-original");function e3(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}let e8=eV({name:"setting",initialState:{theme:"light",previewTheme:"default",codeTheme:"atom"},reducers:{changeTheme(e,t){e.theme=t.payload},changePreviewTheme(e,t){e.previewTheme=t.payload},changeCodeTheme(e,t){e.codeTheme=t.payload},setAll(e,t){Object.assign(e,t.payload)}}}),{changeTheme:e4,changePreviewTheme:e5,changeCodeTheme:e9,setAll:e7}=e8.actions,e6=function(e){let t,i;let n=eE(),{reducer:r,middleware:s,devTools:o=!0,preloadedState:l,enhancers:a}=e||{};if("function"==typeof r)t=r;else if(R(r))t=function(e){let t;let i=Object.keys(e),n={};for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof e[r]&&(n[r]=e[r])}let r=Object.keys(n);try{!function(e){Object.keys(e).forEach(t=>{let i=e[t];if(void 0===i(void 0,{type:P.INIT}))throw Error(A(12));if(void 0===i(void 0,{type:P.PROBE_UNKNOWN_ACTION()}))throw Error(A(13))})}(n)}catch(e){t=e}return function(e={},i){if(t)throw t;let s=!1,o={};for(let t=0;t<r.length;t++){let l=r[t],a=n[l],h=e[l],c=a(h,i);if(void 0===c)throw i&&i.type,Error(A(14));o[l]=c,s=s||c!==h}return(s=s||r.length!==Object.keys(e).length)?o:e}}(r);else throw Error(e3(1));i="function"==typeof s?s(n):n();let h=_;o&&(h=eS({trace:!1,..."object"==typeof o&&o}));let c=e_(function(...e){return t=>(i,n)=>{let r=t(i,n),s=()=>{throw Error(A(15))},o={getState:r.getState,dispatch:(e,...t)=>s(e,...t)};return s=_(...e.map(e=>e(o)))(r.dispatch),{...r,dispatch:s}}}(...i));return function e(t,i,n){if("function"!=typeof t)throw Error(A(2));if("function"==typeof i&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error(A(0));if("function"==typeof i&&void 0===n&&(n=i,i=void 0),void 0!==n){if("function"!=typeof n)throw Error(A(1));return n(e)(t,i)}let r=t,s=i,o=new Map,l=o,a=0,h=!1;function c(){l===o&&(l=new Map,o.forEach((e,t)=>{l.set(t,e)}))}function u(){if(h)throw Error(A(3));return s}function d(e){if("function"!=typeof e)throw Error(A(4));if(h)throw Error(A(5));let t=!0;c();let i=a++;return l.set(i,e),function(){if(t){if(h)throw Error(A(6));t=!1,c(),l.delete(i),o=null}}}function f(e){if(!R(e))throw Error(A(7));if(void 0===e.type)throw Error(A(8));if("string"!=typeof e.type)throw Error(A(17));if(h)throw Error(A(9));try{h=!0,s=r(s,e)}finally{h=!1}return(o=l).forEach(e=>{e()}),e}return f({type:P.INIT}),{dispatch:f,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw Error(A(10));r=e,f({type:P.REPLACE})},[E]:function(){return{subscribe(e){if("object"!=typeof e||null===e)throw Error(A(11));function t(){e.next&&e.next(u())}return t(),{unsubscribe:d(t)}},[E](){return this}}}}}(t,l,h(..."function"==typeof a?a(c):c()))}({reducer:{setting:e8.reducer}});{let e=window.matchMedia("(prefers-color-scheme: light)");e6.subscribe(()=>{localStorage.setItem(T.qG,JSON.stringify(e6.getState().setting))}),e.addEventListener("change",e=>{e6.dispatch(e4(e.matches?"light":"dark"))})}var te=i(7294),tt=i(2999),ti=i(3935),tn=i(1237),tr=i(4515);let ts=e=>{let t=(0,te.useRef)(null),i=(0,te.useRef)(null),n=(0,te.useRef)(),s=(0,te.useRef)(!1),[o,l]=(0,te.useState)({visible:!1,style:{top:0,left:0},class:"dropdown-content animated"}),[a]=(0,te.useState)(()=>{let e=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];l(t=>({...t,class:(0,tr.dh)(["dropdown-content",e&&"dropdown-active"])}))};return{resetClass:e,changeVisibility:function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];l(e=>({...e,class:(0,tr.dh)(["dropdown-content","dropdown-active","animated",t?"dropdown-enter":"dropdown-leave"])})),setTimeout(()=>{e(t)},300)},setVisible:(0,tn.Ds)(function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];l(t=>({...t,visible:e}))})}}),h=(0,te.cloneElement)(e.children,{ref:t,onMouseEnter(){a.setVisible(!0)},onMouseLeave(){a.setVisible(!1)}});return(0,te.useEffect)(()=>{n.current=document.body},[]),(0,te.useEffect)(()=>{if(s.current){if(o.visible){var e,n,r;let s=(0,tr.os)(t.current),o=(null===(e=t.current)||void 0===e?void 0:e.offsetWidth)||0,h=(null===(n=t.current)||void 0===n?void 0:n.offsetHeight)||0,c=(null===(r=i.current)||void 0===r?void 0:r.offsetWidth)||0;l(e=>({...e,style:{left:s.left+o/2-c/2+"px",top:s.top+h+"px"}})),a.changeVisibility(!0)}else a.changeVisibility(!1)}else s.current=!0},[a,o.visible]),(0,r.jsxs)(r.Fragment,{children:[h,n.current&&(0,ti.createPortal)((0,r.jsx)("div",{className:o.class,style:o.style,ref:i,onMouseEnter:()=>{a.setVisible(!0)},onMouseLeave:()=>{a.setVisible(!1)},children:e.content}),n.current)]})};ts.IzDropdownMenu=e=>{let{children:t}=e;return(0,r.jsx)("ul",{className:"dropdown-menu",children:t})},ts.IzDropdownMenuItem=e=>{let{children:t,onClick:i}=e;return(0,r.jsx)("li",{className:"dropdown-menu-item",onClick:i,children:t})};let to=e=>{let t=(0,te.useRef)(null),i=(0,te.useRef)(null),n=(0,te.useRef)(null),s=(0,te.useRef)(),[o,l]=(0,te.useState)(!1),a=(0,te.useCallback)(()=>{l(e=>{var t,r,s,o;return e?(null===(s=i.current)||void 0===s||s.classList.add("close-content"),null===(o=i.current)||void 0===o||o.classList.remove("open-content")):(document.documentElement.classList.add("iz-drawer-root-hidden"),null===(t=n.current)||void 0===t||t.classList.add("open"),null===(r=n.current)||void 0===r||r.classList.remove("close")),!e})},[]);(0,te.useEffect)(()=>{s.current=document.body},[]),(0,te.useEffect)(()=>{if(o){var e,t;null===(e=i.current)||void 0===e||e.classList.add("open-content"),null===(t=i.current)||void 0===t||t.classList.remove("close-content")}else setTimeout(()=>{var e,t;null===(e=n.current)||void 0===e||e.classList.add("close"),null===(t=n.current)||void 0===t||t.classList.remove("open"),document.documentElement.classList.remove("iz-drawer-root-hidden")},300);return()=>{o&&document.documentElement.classList.remove("iz-drawer-root-hidden")}},[o]);let h=(0,te.cloneElement)(e.children,{ref:t,onClick:a});return(0,r.jsxs)(r.Fragment,{children:[h,s.current&&(0,ti.createPortal)((0,r.jsx)("div",{className:"iz-drawer",ref:n,onClick:a,children:(0,r.jsx)("div",{className:"iz-drawer-content",ref:i,onClick:e=>{e.stopPropagation()},children:e.content})}),s.current)]})};var tl=i(1664),ta=i.n(tl),th=i(8570),tc=i(9332);let tu=()=>{let e=(0,th.J)(),t=(0,tc.useRouter)(),i=(0,tc.usePathname)(),n=(0,te.useMemo)(()=>"zh-CN"===e?{home:"首页",api:"API",demo:"示例",github:"源码",syntax:"语法",contrast:"对比",about:"关于",lang:"English",langIcon:"#med-icon-en"}:{home:"Home",api:"API",demo:"Demo",github:"Github",syntax:"Syntax",contrast:"Contrast",about:"About",lang:"中文",langIcon:"#med-icon-cn"},[e]),s=(0,te.useMemo)(()=>"/".concat(e),[e]),o=(0,te.useCallback)(()=>{t.replace(i.replace(/\/[a-zA-Z-]+/,"/".concat("zh-CN"===e?"en-US":"zh-CN")))},[e,i,t]);return(0,r.jsxs)("ul",{className:"nav-list",children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsxs)(ta(),{href:s,children:[(0,r.jsx)("svg",{className:"icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"#med-icon-homepage"})}),n.home]})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsxs)(ta(),{href:"".concat(s,"/api"),children:[(0,r.jsx)("svg",{className:"icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"#med-icon-api"})}),n.api]})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsxs)(ta(),{href:"".concat(s,"/demo"),children:[(0,r.jsx)("svg",{className:"icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"#med-icon-example"})}),n.demo]})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsxs)(ta(),{href:"https://github.com/imzbf/md-editor-rt",target:"_blank",children:[(0,r.jsx)("svg",{className:"icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"#med-icon-github"})}),n.github]})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsxs)(ta(),{href:"".concat(s,"/syntax"),children:[(0,r.jsx)("svg",{className:"icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"#med-icon-syntax"})}),n.syntax]})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsxs)(ta(),{href:"".concat(s,"/contrast"),children:[(0,r.jsx)("svg",{className:"icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"#med-icon-question"})}),n.contrast]})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsxs)(ta(),{href:"".concat(s,"/about"),children:[(0,r.jsx)("svg",{className:"icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"#med-icon-about"})}),n.about]})}),(0,r.jsxs)("li",{className:"nav-item",onClick:o,children:[(0,r.jsx)(ta(),{href:"".concat(T.aK,"/").concat("en-US"===e?"zh-CN":"en-US"),style:{display:"none"},children:n.lang}),(0,r.jsx)("svg",{className:"icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:n.langIcon})}),n.lang]})]})};var td=i(4147);let tf=()=>{let e=(0,th.J)(),t=(0,tt.T)(),[i]=(0,te.useState)({previewThemes:["default","github","vuepress","mk-cute","smart-blue","cyanosis","arknights"],codeThemes:["atom","a11y","github","gradient","kimbie","paraiso","qtcreator","stackoverflow"]}),n=(0,te.useMemo)(()=>"zh-CN"===e?{desc:"Markdown编辑器React版本，使用jsx和typescript语法开发，支持切换主题、prettier美化文本等。",defaultTheme:"默认模式",darkTheme:"暗黑模式",previewBtn:"预览主题",codeBtn:"代码主题"}:{desc:"Markdown Editor for React, developed in jsx and typescript, support different themes、beautify content by prettier.",defaultTheme:"Default Theme",darkTheme:"Dark Theme",previewBtn:"Preview Style",codeBtn:"Code Style"},[e]),s=(0,tt.C)(e=>e.setting.theme);return(0,te.useEffect)(()=>{"dark"===s?document.documentElement.className="theme-dark":document.documentElement.className=""},[s]),(0,te.useEffect)(()=>{let e=localStorage.getItem(T.qG);if(e)try{let i=JSON.parse(e);t(e7(i))}catch(e){console.error("Failed to parse stored state",e)}},[t]),(0,r.jsx)("header",{className:"page-header",children:(0,r.jsxs)("section",{className:"container",children:[(0,r.jsxs)("h1",{className:"project-name",children:["md-editor-rt",(0,r.jsxs)("sup",{children:["@",td.HO.I1.replace("^","")]})]}),(0,r.jsx)("p",{className:"project-desc",children:n.desc}),(0,r.jsxs)("div",{className:"pc",children:[(0,r.jsx)(tu,{}),(0,r.jsxs)("p",{className:"header-actions",children:[(0,r.jsx)("button",{className:"btn btn-header",onClick:()=>t(e4("light")),children:n.defaultTheme}),(0,r.jsx)("button",{className:"btn btn-header",onClick:()=>t(e4("dark")),children:n.darkTheme}),(0,r.jsx)(ts,{content:(0,r.jsx)(ts.IzDropdownMenu,{children:(0,r.jsx)(r.Fragment,{children:i.previewThemes.map(e=>(0,r.jsx)(ts.IzDropdownMenuItem,{onClick:()=>{t(e5(e))},children:e},"preview-theme-".concat(e)))})}),children:(0,r.jsx)("button",{className:"btn btn-header",children:n.previewBtn})}),(0,r.jsx)(ts,{content:(0,r.jsx)(ts.IzDropdownMenu,{children:(0,r.jsx)(r.Fragment,{children:i.codeThemes.map(e=>(0,r.jsx)(ts.IzDropdownMenuItem,{onClick:()=>{t(e9(e))},children:e},"code-theme-".concat(e)))})}),children:(0,r.jsx)("button",{className:"btn btn-header",children:n.codeBtn})})]})]}),(0,r.jsx)("div",{className:"mb",children:(0,r.jsx)(to,{content:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tu,{}),(0,r.jsx)("div",{className:"header-hr"}),(0,r.jsxs)("p",{className:"header-actions",children:[(0,r.jsx)("button",{className:"btn btn-header",onClick:()=>t(e4("light")),children:n.defaultTheme}),(0,r.jsx)("button",{className:"btn btn-header",onClick:()=>t(e4("dark")),children:n.darkTheme}),(0,r.jsx)(ts,{content:(0,r.jsx)(ts.IzDropdownMenu,{children:(0,r.jsx)(r.Fragment,{children:i.previewThemes.map(e=>(0,r.jsx)(ts.IzDropdownMenuItem,{onClick:()=>{t(e5(e))},children:e},"preview-theme-".concat(e)))})}),children:(0,r.jsx)("button",{className:"btn btn-header",children:n.previewBtn})}),(0,r.jsx)(ts,{content:(0,r.jsx)(ts.IzDropdownMenu,{children:(0,r.jsx)(r.Fragment,{children:i.codeThemes.map(e=>(0,r.jsx)(ts.IzDropdownMenuItem,{onClick:()=>{t(e9(e))},children:e},"code-theme-".concat(e)))})}),children:(0,r.jsx)("button",{className:"btn btn-header",children:n.codeBtn})})]})]}),children:(0,r.jsx)("svg",{className:"icon m-menu-trigger","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"#med-icon-drawer"})})})})]})})},tp=()=>{document.documentElement.scroll({top:0,behavior:"smooth"})},tg=()=>{let[e,t]=(0,te.useState)(0);return(0,te.useEffect)(()=>{document.addEventListener("scroll",()=>{t(document.documentElement.scrollTop)})},[]),e>20?(0,r.jsx)("div",{className:"back-top",onClick:tp,children:(0,r.jsx)("svg",{className:"icon","aria-hidden":"true",children:(0,r.jsx)("use",{xlinkHref:"#med-icon-top"})})}):(0,r.jsx)(r.Fragment,{})};(0,o.c)({markdownItPlugins(e,t){let{editorId:i}=t;return[...e.map(e=>"taskList"===e.type?{...e,options:{...e.options,enabled:"editor-preview"===i}}:e),{type:"mark",plugin:l,options:{}},{type:"linkAttr",plugin:C(),options:{matcher:e=>!e.startsWith("#"),attrs:{target:"_blank"}}},{type:"anchor",plugin:k,options:{permalink:k.permalink.headerLink(),slugify:e=>e}}]},codeMirrorExtensions:(e,t)=>[...t,(0,O.Eu)()],editorConfig:{languageUserDefined:{ZH_TW:{toolbarTips:{bold:"加粗",underline:"下劃線",italic:"斜體",strikeThrough:"删除線",title:"標題",sub:"下標",sup:"上標",quote:"引用",unorderedList:"無序列錶",orderedList:"有序列錶",task:"任務列錶",codeRow:"行內代碼",code:"塊級代碼",link:"鏈接",image:"圖片",table:"表格",mermaid:"mermaid圖",katex:"katex公式",revoke:"後退",next:"前進",save:"保存",prettier:"美化",pageFullscreen:"瀏覽器全屏",fullscreen:"屏幕全屏",preview:"預覽",htmlPreview:"html代碼預覽",catalog:"目錄",github:"源碼地址"},titleItem:{h1:"一級標題",h2:"二級標題",h3:"三級標題",h4:"四級標題",h5:"五級標題",h6:"六級標題"},imgTitleItem:{link:"添加鏈接",upload:"上傳圖片",clip2upload:"裁剪上傳"},linkModalTips:{linkTitle:"添加鏈接",imageTitle:"添加圖片",descLabel:"鏈接描述：",descLabelPlaceHolder:"請輸入描述...",urlLabel:"鏈接地址：",urlLabelPlaceHolder:"請輸入链接...",buttonOK:"確定"},clipModalTips:{title:"裁剪圖片上傳",buttonUpload:"上傳"},copyCode:{text:"複製代碼",successTips:"已複製！",failTips:"複製失敗！"},mermaid:{flow:"流程圖",sequence:"時序圖",gantt:"甘特圖",class:"類圖",state:"狀態圖",pie:"餅圖",relationship:"關係圖",journey:"旅程圖"},katex:{inline:"行內公式",block:"塊級公式"},footer:{markdownTotal:"字數",scrollAuto:"同步滾動"}}}}});let tm=e=>{let{children:t}=e;return(0,r.jsxs)(s.zt,{store:e6,children:[(0,r.jsx)(tf,{}),t,(0,r.jsx)(tg,{})]})};function ty(e){let{Component:t,pageProps:i}=e;return(0,r.jsx)(tm,{children:(0,r.jsx)(t,{...i})})}i(6562),i(5388),i(992),i(5408)},4515:(e,t,i)=>{"use strict";i.d(t,{dh:()=>s,os:()=>r,xt:()=>n});let n=(e,t)=>Object.keys(t).reduce((e,i)=>e.replaceAll("${".concat(i,"}"),t[i]),e),r=e=>{let t=e.offsetParent,i=e.offsetTop,n=e.offsetLeft;if((null==t?void 0:t.nodeName.toLowerCase())!=="body")for(;t;)i+=null==t?void 0:t.offsetTop,n+=null==t?void 0:t.offsetLeft,t=null==t?void 0:t.offsetParent;return{left:n,top:i}},s=e=>e.filter(e=>!1!==e).join(" ")},5388:()=>{},992:()=>{},6562:()=>{},5408:()=>{},8195:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return l}});let n=i(1539),r=i(947),s=i(2499),o=i(7325),l=e=>(0,n.isDynamicServerError)(e)||(0,r.isBailoutToCSRError)(e)||(0,s.isNextRouterError)(e)||(0,o.isDynamicPostpone)(e)},5086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{METADATA_BOUNDARY_NAME:function(){return i},OUTLET_BOUNDARY_NAME:function(){return r},VIEWPORT_BOUNDARY_NAME:function(){return n}});let i="__next_metadata_boundary__",n="__next_viewport_boundary__",r="__next_outlet_boundary__"},1828:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"actionAsyncStorage",{enumerable:!0,get:function(){return n}});let n=(0,i(8280).createAsyncLocalStorage)()},5107:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"actionAsyncStorage",{enumerable:!0,get:function(){return n.actionAsyncStorage}});let n=i(1828)},8280:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{bindSnapshot:function(){return o},createAsyncLocalStorage:function(){return s},createSnapshot:function(){return l}});let i=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class n{disable(){throw i}getStore(){}run(){throw i}exit(){throw i}enterWith(){throw i}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function s(){return r?new r:new n}function o(e){return r?r.bind(e):n.bind(e)}function l(){return r?r.snapshot():function(e,...t){return e(...t)}}},7325:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{Postpone:function(){return k},abortAndThrowOnSynchronousRequestDataAccess:function(){return x},abortOnSynchronousPlatformIOAccess:function(){return w},accessedDynamicData:function(){return P},annotateDynamicAccess:function(){return N},consumeDynamicAccess:function(){return R},createDynamicTrackingState:function(){return u},createDynamicValidationState:function(){return d},createPostponedAbortSignal:function(){return L},formatDynamicAPIAccesses:function(){return _},getFirstDynamicReason:function(){return f},isDynamicPostpone:function(){return O},isPrerenderInterruptedError:function(){return D},markCurrentScopeAsDynamic:function(){return p},postponeWithTracking:function(){return M},throwIfDisallowedDynamic:function(){return z},throwToInterruptStaticGeneration:function(){return m},trackAllowedDynamicAccess:function(){return W},trackDynamicDataInDynamicRender:function(){return y},trackFallbackParamAccessed:function(){return g},trackSynchronousPlatformIOAccessInDev:function(){return b},trackSynchronousRequestDataAccessInDev:function(){return S},useDynamicRouteParams:function(){return I}});let n=function(e){return e&&e.__esModule?e:{default:e}}(i(7294)),r=i(1539),s=i(2700),o=i(1717),l=i(9927),a=i(1738),h=i(5086),c="function"==typeof n.default.unstable_postpone;function u(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicExpression:void 0,syncDynamicErrorWithStack:null}}function d(){return{hasSuspendedDynamic:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasSyncDynamicErrors:!1,dynamicErrors:[]}}function f(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function p(e,t,i){if((!t||"cache"!==t.type&&"unstable-cache"!==t.type)&&!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw new s.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${i}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(t){if("prerender-ppr"===t.type)M(e.route,i,t.dynamicTracking);else if("prerender-legacy"===t.type){t.revalidate=0;let n=new r.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${i}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=i,e.dynamicUsageStack=n.stack,n}}}}function g(e,t){let i=o.workUnitAsyncStorage.getStore();i&&"prerender-ppr"===i.type&&M(e.route,t,i.dynamicTracking)}function m(e,t,i){let n=new r.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw i.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function y(e,t){t&&"cache"!==t.type&&"unstable-cache"!==t.type&&("prerender"===t.type||"prerender-legacy"===t.type)&&(t.revalidate=0)}function v(e,t,i){let n=E(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);i.controller&&i.controller.abort(n);let r=i.dynamicTracking;r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function w(e,t,i,n){let r=n.dynamicTracking;return r&&null===r.syncDynamicErrorWithStack&&(r.syncDynamicExpression=t,r.syncDynamicErrorWithStack=i),v(e,t,n)}function b(e){e.prerenderPhase=!1}function x(e,t,i,n){let r=n.dynamicTracking;throw r&&null===r.syncDynamicErrorWithStack&&(r.syncDynamicExpression=t,r.syncDynamicErrorWithStack=i,!0===n.validating&&(r.syncDynamicLogged=!0)),v(e,t,n),E(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}let S=b;function k({reason:e,route:t}){let i=o.workUnitAsyncStorage.getStore();M(t,e,i&&"prerender-ppr"===i.type?i.dynamicTracking:null)}function M(e,t,i){j(),i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),n.default.unstable_postpone(C(e,t))}function C(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function O(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&T(e.message)}function T(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===T(C("%%%","^^^")))throw Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js");let A="NEXT_PRERENDER_INTERRUPTED";function E(e){let t=Error(e);return t.digest=A,t}function D(e){return"object"==typeof e&&null!==e&&e.digest===A&&"name"in e&&"message"in e&&e instanceof Error}function P(e){return e.length>0}function R(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function _(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function j(){if(!c)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")}function L(e){j();let t=new AbortController;try{n.default.unstable_postpone(e)}catch(e){t.abort(e)}return t.signal}function N(e,t){let i=t.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function I(e){if("undefined"==typeof window){let t=l.workAsyncStorage.getStore();if(t&&t.isStaticGeneration&&t.fallbackRouteParams&&t.fallbackRouteParams.size>0){let i=o.workUnitAsyncStorage.getStore();i&&("prerender"===i.type?n.default.use((0,a.makeHangingPromise)(i.renderSignal,e)):"prerender-ppr"===i.type?M(t.route,e,i.dynamicTracking):"prerender-legacy"===i.type&&m(e,t,i))}}}let B=/\n\s+at Suspense \(<anonymous>\)/,H=RegExp(`\\n\\s+at ${h.METADATA_BOUNDARY_NAME}[\\n\\s]`),V=RegExp(`\\n\\s+at ${h.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),F=RegExp(`\\n\\s+at ${h.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function W(e,t,i,n,r){if(!F.test(t)){if(H.test(t)){i.hasDynamicMetadata=!0;return}if(V.test(t)){i.hasDynamicViewport=!0;return}if(B.test(t)){i.hasSuspendedDynamic=!0;return}if(n.syncDynamicErrorWithStack||r.syncDynamicErrorWithStack){i.hasSyncDynamicErrors=!0;return}else{let n=function(e,t){let i=Error(e);return i.stack="Error: "+e+t,i}(`In Route "${e}" this component accessed data without a fallback UI available somewhere above it using Suspense.`,t);i.dynamicErrors.push(n);return}}}function z(e,t,i,n){let r,o,l;if(i.syncDynamicErrorWithStack?(r=i.syncDynamicErrorWithStack,o=i.syncDynamicExpression,l=!0===i.syncDynamicLogged):n.syncDynamicErrorWithStack?(r=n.syncDynamicErrorWithStack,o=n.syncDynamicExpression,l=!0===n.syncDynamicLogged):(r=null,o=void 0,l=!1),t.hasSyncDynamicErrors&&r)throw l||console.error(r),new s.StaticGenBailoutError;let a=t.dynamicErrors;if(a.length){for(let e=0;e<a.length;e++)console.error(a[e]);throw new s.StaticGenBailoutError}if(!t.hasSuspendedDynamic){if(t.hasDynamicMetadata){if(r)throw console.error(r),new s.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that could not finish rendering before ${o} was used. Follow the instructions in the error for this expression to resolve.`);throw new s.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateMetadata\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`)}if(t.hasDynamicViewport){if(r)throw console.error(r),new s.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that could not finish rendering before ${o} was used. Follow the instructions in the error for this expression to resolve.`);throw new s.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateViewport\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`)}}}},2255:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n}});let n=(0,i(8280).createAsyncLocalStorage)()},9927:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorage}});let n=i(2255)},3115:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workUnitAsyncStorage",{enumerable:!0,get:function(){return n}});let n=(0,i(8280).createAsyncLocalStorage)()},1717:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{getExpectedRequestStore:function(){return r},workUnitAsyncStorage:function(){return n.workUnitAsyncStorage}});let n=i(3115);function r(e){let t=n.workUnitAsyncStorage.getStore();if(t){if("request"===t.type)return t;if("prerender"===t.type||"prerender-ppr"===t.type||"prerender-legacy"===t.type)throw Error(`\`${e}\` cannot be called inside a prerender. This is a bug in Next.js.`);if("cache"===t.type)throw Error(`\`${e}\` cannot be called inside "use cache". Call it outside and pass an argument instead. Read more: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===t.type)throw Error(`\`${e}\` cannot be called inside unstable_cache. Call it outside and pass an argument instead. Read more: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`)}throw Error(`\`${e}\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`)}},1738:(e,t)=>{"use strict";function i(e,t){let i=new Promise((i,n)=>{e.addEventListener("abort",()=>{n(Error(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`unstable_after\`, or similar functions you may observe this error and you should handle it in that context.`))},{once:!0})});return i.catch(n),i}function n(){}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"makeHangingPromise",{enumerable:!0,get:function(){return i}})},6111:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return n}});let i=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}},1664:(e,t,i)=>{e.exports=i(8342)},9332:(e,t,i)=>{e.exports=i(6432)},3771:(e,t,i)=>{"use strict";var n=i(7294),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useSyncExternalStore,o=n.useRef,l=n.useEffect,a=n.useMemo,h=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,i,n,c){var u=o(null);if(null===u.current){var d={hasValue:!1,value:null};u.current=d}else d=u.current;var f=s(e,(u=a(function(){function e(e){if(!l){if(l=!0,s=e,e=n(e),void 0!==c&&d.hasValue){var t=d.value;if(c(t,e))return o=t}return o=e}if(t=o,r(s,e))return t;var i=n(e);return void 0!==c&&c(t,i)?t:(s=e,o=i)}var s,o,l=!1,a=void 0===i?null:i;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]},[t,i,n,c]))[0],u[1]);return l(function(){d.hasValue=!0,d.value=f},[f]),h(f),f}},1103:(e,t,i)=>{"use strict";e.exports=i(3771)},8120:(e,t,i)=>{"use strict";let n;i.d(t,{BO:()=>ey,D0:()=>ep,F6:()=>K,Gz:()=>eL,IS:()=>ej,Py:()=>ea,QQ:()=>W,Wl:()=>q,Xs:()=>eS,YW:()=>eh,as:()=>C,bg:()=>b,cp:()=>g,f_:()=>ek,gc:()=>k,gm:()=>w,jT:()=>_,n0:()=>M,nZ:()=>x,q6:()=>es,r$:()=>N,uU:()=>ev,xv:()=>r,yy:()=>em});class r{lineAt(e){if(e<0||e>this.length)throw RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=d(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),o.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=d(this,e,t);let i=[];return this.decompose(e,t,i,0),o.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new a(this),r=new a(e);for(let e=t,s=t;;){if(n.next(e),r.next(e),e=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(s+=n.value.length,n.done||s>=i)return!0}}iter(e=1){return new a(this,e)}iterRange(e,t=this.length){return new h(this,e,t)}iterLines(e,t){let i;if(null==e)i=this.iter();else{null==t&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new c(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new s(e):o.from(s.split(e,[])):r.empty}}class s extends r{constructor(e,t=function(e){let t=-1;for(let i of e)t+=i.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let s=this.text[r],o=n+s.length;if((t?i:o)>=e)return new u(n,o,i,s);n=o+1,i++}}decompose(e,t,i,n){let r=e<=0&&t>=this.length?this:new s(l(this.text,[""],e,t),Math.min(t,this.length)-Math.max(0,e));if(1&n){let e=i.pop(),t=l(r.text,e.text.slice(),0,r.length);if(t.length<=32)i.push(new s(t,e.length+r.length));else{let e=t.length>>1;i.push(new s(t.slice(0,e)),new s(t.slice(e)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof s))return super.replace(e,t,i);[e,t]=d(this,e,t);let n=l(this.text,l(i.text,l(this.text,[""],0,e)),t),r=this.length+i.length-(t-e);return n.length<=32?new s(n,r):o.from(s.split(n,[]),r)}sliceString(e,t=this.length,i="\n"){[e,t]=d(this,e,t);let n="";for(let r=0,s=0;r<=t&&s<this.text.length;s++){let o=this.text[s],l=r+o.length;r>e&&s&&(n+=i),e<l&&t>r&&(n+=o.slice(Math.max(0,e-r),t-r)),r=l+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,32==i.length&&(t.push(new s(i,n)),i=[],n=-1);return n>-1&&t.push(new s(i,n)),t}}class o extends r{constructor(e,t){for(let i of(super(),this.children=e,this.length=t,this.lines=0,e))this.lines+=i.lines}lineInner(e,t,i,n){for(let r=0;;r++){let s=this.children[r],o=n+s.length,l=i+s.lines-1;if((t?l:o)>=e)return s.lineInner(e,t,i,n);n=o+1,i=l+1}}decompose(e,t,i,n){for(let r=0,s=0;s<=t&&r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e<=l&&t>=s){let r=n&((s<=e?1:0)|(l>=t?2:0));s>=e&&l<=t&&!r?i.push(o):o.decompose(e-s,t-s,i,r)}s=l+1}}replace(e,t,i){if([e,t]=d(this,e,t),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],l=r+s.length;if(e>=r&&t<=l){let a=s.replace(e-r,t-r,i),h=this.lines-s.lines+a.lines;if(a.lines<h>>4&&a.lines>h>>6){let r=this.children.slice();return r[n]=a,new o(r,this.length-(t-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i="\n"){[e,t]=d(this,e,t);let n="";for(let r=0,s=0;r<this.children.length&&s<=t;r++){let o=this.children[r],l=s+o.length;s>e&&r&&(n+=i),e<l&&t>s&&(n+=o.sliceString(e-s,t-s,i)),s=l+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof o))return 0;let i=0,[n,r,s,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,r+=t){if(n==s||r==l)return i;let o=this.children[n],a=e.children[r];if(o!=a)return i+o.scanIdentical(a,t);i+=o.length+1}}static from(e,t=e.reduce((e,t)=>e+t.length+1,-1)){let i=0;for(let t of e)i+=t.lines;if(i<32){let i=[];for(let t of e)t.flatten(i);return new s(i,t)}let n=Math.max(32,i>>5),r=n<<1,l=n>>1,a=[],h=0,c=-1,u=[];function d(){0!=h&&(a.push(1==u.length?u[0]:o.from(u,c)),c=-1,h=u.length=0)}for(let t of e)!function e(t){let i;if(t.lines>r&&t instanceof o)for(let i of t.children)e(i);else t.lines>l&&(h>l||!h)?(d(),a.push(t)):t instanceof s&&h&&(i=u[u.length-1])instanceof s&&t.lines+i.lines<=32?(h+=t.lines,c+=t.length+1,u[u.length-1]=new s(i.text.concat(t.text),i.length+1+t.length)):(h+t.lines>n&&d(),h+=t.lines,c+=t.length+1,u.push(t))}(t);return d(),1==a.length?a[0]:new o(a,t)}}function l(e,t,i=0,n=1e9){for(let r=0,s=0,o=!0;s<e.length&&r<=n;s++){let l=e[s],a=r+l.length;a>=i&&(a>n&&(l=l.slice(0,n-r)),r<i&&(l=l.slice(i-r)),o?(t[t.length-1]+=l,o=!1):t.push(l)),r=a+1}return t}r.empty=new s([""],0);class a{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof s?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof s?n.text.length:n.children.length;if(o==(t>0?l:0)){if(0==i)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(t>0?0:1)){if(this.offsets[i]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(n instanceof s){let r=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,r.length>Math.max(0,e))return this.value=0==e?r:t>0?r.slice(e):r.slice(0,r.length-e),this;e-=r.length}else{let r=n.children[o+(t<0?-1:0)];e>r.length?(e-=r.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(r),this.offsets.push(t>0?1:(r instanceof s?r.text.length:r.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class h{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new a(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class c{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(r.prototype[Symbol.iterator]=function(){return this.iter()},a.prototype[Symbol.iterator]=h.prototype[Symbol.iterator]=c.prototype[Symbol.iterator]=function(){return this});class u{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function d(e,t,i){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,i))]}let f="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=1;e<f.length;e++)f[e]+=f[e-1];function p(e){return e>=127462&&e<=127487}function g(e,t,i=!0,n=!0){return(i?m:function(e,t,i){for(;t>0;){let n=m(e,t-2,i);if(n<t)return n;t--}return 0})(e,t,n)}function m(e,t,i){if(t==e.length)return t;t&&y(e.charCodeAt(t))&&v(e.charCodeAt(t-1))&&t--;let n=w(e,t);for(t+=x(n);t<e.length;){let r=w(e,t);if(8205==n||8205==r||i&&function(e){for(let t=1;t<f.length;t+=2)if(f[t]>e)return f[t-1]<=e;return!1}(r))t+=x(r),n=r;else if(p(r)){let i=0,n=t-2;for(;n>=0&&p(w(e,n));)i++,n-=2;if(i%2==0)break;t+=2}else break}return t}function y(e){return e>=56320&&e<57344}function v(e){return e>=55296&&e<56320}function w(e,t){let i=e.charCodeAt(t);if(!v(i)||t+1==e.length)return i;let n=e.charCodeAt(t+1);return y(n)?(i-55296<<10)+(n-56320)+65536:i}function b(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10)+55296,(1023&e)+56320)}function x(e){return e<65536?1:2}let S=/\r\n?|\n/;var k=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(k||(k={}));class M{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?(e(i,n,r),n+=r):n+=s,i+=r}}iterChangedRanges(e,t=!1){A(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new M(e)}composeDesc(e){return this.empty?e:e.empty?this:D(this,e)}mapDesc(e,t=!1){return e.empty?this:E(this,e,t)}mapPos(e,t=-1,i=k.Simple){let n=0,r=0;for(let s=0;s<this.sections.length;){let o=this.sections[s++],l=this.sections[s++],a=n+o;if(l<0){if(a>e)return r+(e-n);r+=o}else{if(i!=k.Simple&&a>=e&&(i==k.TrackDel&&n<e&&a>e||i==k.TrackBefore&&n<e||i==k.TrackAfter&&a>e))return null;if(a>e||a==e&&t<0&&!o)return e==n||t<0?r:r+l;r+=l}n=a}if(e>n)throw RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=this.sections[i++],s=this.sections[i++],o=n+r;if(s>=0&&n<=t&&o>=e)return!(n<e)||!(o>t)||"cover";n=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw RangeError("Invalid JSON representation of ChangeDesc");return new M(e)}static create(e){return new M(e)}}class C extends M{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw RangeError("Applying change set to a document with the wrong length");return A(this,(t,i,n,r,s)=>e=e.replace(n,n+(i-t),s),!1),e}mapDesc(e,t=!1){return E(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(r.empty);i.push(o?e.slice(s,s+o):r.empty)}s+=o}return new C(t,i)}compose(e){return this.empty?e:e.empty?this:D(this,e,!0)}map(e,t=!1){return e.empty?this:E(this,e,t,!0)}iterChanges(e,t=!1){A(this,e,t)}get desc(){return M.create(this.sections)}filter(e){let t=[],i=[],n=[],r=new P(this);e:for(let s=0,o=0;;){let l=s==e.length?1e9:e[s++];for(;o<l||o==l&&0==r.len;){if(r.done)break e;let e=Math.min(r.len,l-o);O(n,e,-1);let s=-1==r.ins?-1:0==r.off?r.ins:0;O(t,e,s),s>0&&T(i,t,r.text),r.forward(e),o+=e}let a=e[s++];for(;o<a;){if(r.done)break e;let e=Math.min(r.len,a-o);O(t,e,-1),O(n,e,-1==r.ins?-1:0==r.off?r.ins:0),r.forward(e),o+=e}}return{changes:new C(t,i),filtered:M.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):0==n?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],o=0,l=null;function a(e=!1){if(!e&&!n.length)return;o<t&&O(n,t-o,-1);let i=new C(n,s);l=l?l.compose(i.map(l)):i,n=[],s=[],o=0}return!function e(h){if(Array.isArray(h))for(let t of h)e(t);else if(h instanceof C){if(h.length!=t)throw RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);a(),l=l?l.compose(h.map(l)):h}else{let{from:e,to:l=e,insert:c}=h;if(e>l||e<0||l>t)throw RangeError(`Invalid change range ${e} to ${l} (in doc of length ${t})`);let u=c?"string"==typeof c?r.of(c.split(i||S)):c:r.empty,d=u.length;if(e==l&&0==d)return;e<o&&a(),e>o&&O(n,e-o,-1),O(n,l-e,d),T(s,n,u),o=l}}(e),a(!l),l}static empty(e){return new C(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if("number"==typeof s)t.push(s,-1);else if(!Array.isArray(s)||"number"!=typeof s[0]||s.some((e,t)=>t&&"string"!=typeof e))throw RangeError("Invalid JSON representation of ChangeSet");else if(1==s.length)t.push(s[0],0);else{for(;i.length<n;)i.push(r.empty);i[n]=r.of(s.slice(1)),t.push(s[0],i[n].length)}}return new C(t,i)}static createSet(e,t){return new C(e,t)}}function O(e,t,i,n=!1){if(0==t&&i<=0)return;let r=e.length-2;r>=0&&i<=0&&i==e[r+1]?e[r]+=t:0==t&&0==e[r]?e[r+1]+=i:n?(e[r]+=t,e[r+1]+=i):e.push(t,i)}function T(e,t,i){if(0==i.length)return;let n=t.length-2>>1;if(n<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<n;)e.push(r.empty);e.push(i)}}function A(e,t,i){let n=e.inserted;for(let s=0,o=0,l=0;l<e.sections.length;){let a=e.sections[l++],h=e.sections[l++];if(h<0)s+=a,o+=a;else{let c=s,u=o,d=r.empty;for(;c+=a,u+=h,h&&n&&(d=d.append(n[l-2>>1])),!i&&l!=e.sections.length&&!(e.sections[l+1]<0);)a=e.sections[l++],h=e.sections[l++];t(s,c,o,u,d),s=c,o=u}}}function E(e,t,i,n=!1){let r=[],s=n?[]:null,o=new P(e),l=new P(t);for(let e=-1;;)if(-1==o.ins&&-1==l.ins){let e=Math.min(o.len,l.len);O(r,e,-1),o.forward(e),l.forward(e)}else if(l.ins>=0&&(o.ins<0||e==o.i||0==o.off&&(l.len<o.len||l.len==o.len&&!i))){let t=l.len;for(O(r,l.ins,-1);t;){let i=Math.min(o.len,t);o.ins>=0&&e<o.i&&o.len<=i&&(O(r,0,o.ins),s&&T(s,r,o.text),e=o.i),o.forward(i),t-=i}l.next()}else if(o.ins>=0){let t=0,i=o.len;for(;i;)if(-1==l.ins){let e=Math.min(i,l.len);t+=e,i-=e,l.forward(e)}else if(0==l.ins&&l.len<i)i-=l.len,l.next();else break;O(r,t,e<o.i?o.ins:0),s&&e<o.i&&T(s,r,o.text),e=o.i,o.forward(o.len-i)}else if(o.done&&l.done)return s?C.createSet(r,s):M.create(r);else throw Error("Mismatched change set lengths")}function D(e,t,i=!1){let n=[],r=i?[]:null,s=new P(e),o=new P(t);for(let e=!1;;){if(s.done&&o.done)return r?C.createSet(n,r):M.create(n);if(0==s.ins)O(n,s.len,0,e),s.next();else if(0!=o.len||o.done){if(s.done||o.done)throw Error("Mismatched change set lengths");{let t=Math.min(s.len2,o.len),i=n.length;if(-1==s.ins){let i=-1==o.ins?-1:o.off?0:o.ins;O(n,t,i,e),r&&i&&T(r,n,o.text)}else -1==o.ins?(O(n,s.off?0:s.len,t,e),r&&T(r,n,s.textBit(t))):(O(n,s.off?0:s.len,o.off?0:o.ins,e),r&&!o.off&&T(r,n,o.text));e=(s.ins>t||o.ins>=0&&o.len>t)&&(e||n.length>i),s.forward2(t),o.forward(t)}}else O(n,0,o.ins,e),r&&T(r,n,o.text),o.next()}}class P{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return -2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?r.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?r.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class R{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 0xffffff==e?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new R(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return _.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return _.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw RangeError("Invalid JSON representation for SelectionRange");return _.range(e.anchor,e.head)}static create(e,t,i){return new R(e,t,i)}}class _{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:_.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new _([this.main],0)}addRange(e,t=!0){return _.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,_.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw RangeError("Invalid JSON representation for EditorSelection");return new _(e.ranges.map(e=>R.fromJSON(e)),e.main)}static single(e,t=e){return new _([_.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return _.normalized(e.slice(),t);i=r.to}return new _(e,t)}static cursor(e,t=0,i,n){return R.create(e,e,(0==t?0:t<0?8:16)|(null==i?7:Math.min(6,i))|(null!=n?n:0xffffff)<<6)}static range(e,t,i,n){let r=(null!=i?i:0xffffff)<<6|(null==n?7:Math.min(6,n));return t<e?R.create(t,e,48|r):R.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(i);for(let i=1;i<e.length;i++){let n=e[i],r=e[i-1];if(n.empty?n.from<=r.to:n.from<r.to){let s=r.from,o=Math.max(n.to,r.to);i<=t&&t--,e.splice(--i,2,n.anchor>n.head?_.range(o,s):_.range(s,o))}}return new _(e,t)}}function j(e,t){for(let i of e.ranges)if(i.to>t)throw RangeError("Selection points outside of document")}let L=0;class N{constructor(e,t,i,n,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=L++,this.default=e([]),this.extensions="function"==typeof r?r(this):r}get reader(){return this}static define(e={}){return new N(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:I),!!e.static,e.enables)}of(e){return new B([],this,0,e)}compute(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new B(e,this,1,t)}computeN(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new B(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],i=>t(i.field(e)))}}function I(e,t){return e==t||e.length==t.length&&e.every((e,i)=>e===t[i])}class B{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=L++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=this.id,s=e[r]>>1,o=2==this.type,l=!1,a=!1,h=[];for(let i of this.dependencies)"doc"==i?l=!0:"selection"==i?a=!0:((null!==(t=e[i.id])&&void 0!==t?t:1)&1)==0&&h.push(e[i.id]);return{create:e=>(e.values[s]=i(e),1),update(e,t){if(l&&t.docChanged||a&&(t.docChanged||t.selection)||V(e,h)){let t=i(e);if(o?!H(t,e.values[s],n):!n(t,e.values[s]))return e.values[s]=t,1}return 0},reconfigure:(e,t)=>{let l,a=t.config.address[r];if(null!=a){let r=J(t,a);if(this.dependencies.every(i=>i instanceof N?t.facet(i)===e.facet(i):!(i instanceof W)||t.field(i,!1)==e.field(i,!1))||(o?H(l=i(e),r,n):n(l=i(e),r)))return e.values[s]=r,0}else l=i(e);return e.values[s]=l,1}}}}function H(e,t,i){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}function V(e,t){let i=!1;for(let n of t)1&Y(e,n)&&(i=!0);return i}let F=N.define({static:!0});class W{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let t=new W(L++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(F).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,i)=>{let n=e.values[t],r=this.updateF(n,i);return this.compareF(n,r)?0:(e.values[t]=r,1)},reconfigure:(e,i)=>null!=i.config.address[this.id]?(e.values[t]=i.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,F.of({field:this,create:e})]}get extension(){return this}}let z={lowest:4,low:3,default:2,high:1,highest:0};function $(e){return t=>new U(t,e)}let q={highest:$(z.highest),high:$(z.high),default:$(z.default),low:$(z.low),lowest:$(z.lowest)};class U{constructor(e,t){this.inner=e,this.prec=t}}class K{of(e){return new G(this,e)}reconfigure(e){return K.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class G{constructor(e,t){this.compartment=e,this.inner=t}}class X{constructor(e,t,i,n,r,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n,r,s=[],o=Object.create(null),l=new Map;for(let i of(n=[[],[],[],[],[]],r=new Map,!function e(i,s){let o=r.get(i);if(null!=o){if(o<=s)return;let e=n[o].indexOf(i);e>-1&&n[o].splice(e,1),i instanceof G&&l.delete(i.compartment)}if(r.set(i,s),Array.isArray(i))for(let t of i)e(t,s);else if(i instanceof G){if(l.has(i.compartment))throw RangeError("Duplicate use of compartment in extensions");let n=t.get(i.compartment)||i.inner;l.set(i.compartment,n),e(n,s)}else if(i instanceof U)e(i.inner,i.prec);else if(i instanceof W)n[s].push(i),i.provides&&e(i.provides,s);else if(i instanceof B)n[s].push(i),i.facet.extensions&&e(i.facet.extensions,z.default);else{let t=i.extension;if(!t)throw Error(`Unrecognized extension value in extension set (${i}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,s)}}(e,z.default),n.reduce((e,t)=>e.concat(t))))i instanceof W?s.push(i):(o[i.facet.id]||(o[i.facet.id]=[])).push(i);let a=Object.create(null),h=[],c=[];for(let e of s)a[e.id]=c.length<<1,c.push(t=>e.slot(t));let u=null==i?void 0:i.config.facets;for(let e in o){let t=o[e],n=t[0].facet,r=u&&u[e]||[];if(t.every(e=>0==e.type)){if(a[n.id]=h.length<<1|1,I(r,t))h.push(i.facet(n));else{let e=n.combine(t.map(e=>e.value));h.push(i&&n.compare(e,i.facet(n))?i.facet(n):e)}}else{for(let e of t)0==e.type?(a[e.id]=h.length<<1|1,h.push(e.value)):(a[e.id]=c.length<<1,c.push(t=>e.dynamicSlot(t)));a[n.id]=c.length<<1,c.push(e=>(function(e,t,i){let n=i.map(t=>e[t.id]),r=i.map(e=>e.type),s=n.filter(e=>!(1&e)),o=e[t.id]>>1;function l(e){let i=[];for(let t=0;t<n.length;t++){let s=J(e,n[t]);if(2==r[t])for(let e of s)i.push(e);else i.push(s)}return t.combine(i)}return{create(e){for(let t of n)Y(e,t);return e.values[o]=l(e),1},update(e,i){if(!V(e,s))return 0;let n=l(e);return t.compare(n,e.values[o])?0:(e.values[o]=n,1)},reconfigure(e,r){let s=V(e,n),a=r.config.facets[t.id],h=r.facet(t);if(a&&!s&&I(i,a))return e.values[o]=h,0;let c=l(e);return t.compare(c,h)?(e.values[o]=h,0):(e.values[o]=c,1)}}})(e,n,t))}}return new X(e,l,c.map(e=>e(a)),a,h,o)}}function Y(e,t){if(1&t)return 2;let i=t>>1,n=e.status[i];if(4==n)throw Error("Cyclic dependency between fields and/or facets");if(2&n)return n;e.status[i]=4;let r=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|r}function J(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}let Q=N.define(),Z=N.define({combine:e=>e.some(e=>e),static:!0}),ee=N.define({combine:e=>e.length?e[0]:void 0,static:!0}),et=N.define(),ei=N.define(),en=N.define(),er=N.define({combine:e=>!!e.length&&e[0]});class es{constructor(e,t){this.type=e,this.value=t}static define(){return new eo}}class eo{of(e){return new es(this,e)}}class el{constructor(e){this.map=e}of(e){return new ea(this,e)}}class ea{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new ea(this.type,t)}is(e){return this.type==e}static define(e={}){return new el(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let e=n.map(t);e&&i.push(e)}return i}}ea.reconfigure=ea.define(),ea.appendConfig=ea.define();class eh{constructor(e,t,i,n,r,s){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=s,this._doc=null,this._state=null,i&&j(i,t.newLength),r.some(e=>e.type==eh.time)||(this.annotations=r.concat(eh.time.of(Date.now())))}static create(e,t,i,n,r,s){return new eh(e,t,i,n,r,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(eh.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function ec(e,t,i){var n;let r,s,o;return i?(r=t.changes,s=C.empty(t.changes.length),o=e.changes.compose(t.changes)):(r=t.changes.map(e.changes),s=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(r)),{changes:o,selection:t.selection?t.selection.map(s):null===(n=e.selection)||void 0===n?void 0:n.map(r),effects:ea.mapEffects(e.effects,r).concat(ea.mapEffects(t.effects,s)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function eu(e,t,i){let n=t.selection,r=ef(t.annotations);return t.userEvent&&(r=r.concat(eh.userEvent.of(t.userEvent))),{changes:t.changes instanceof C?t.changes:C.of(t.changes||[],i,e.facet(ee)),selection:n&&(n instanceof _?n:_.single(n.anchor,n.head)),effects:ef(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}eh.time=es.define(),eh.userEvent=es.define(),eh.addToHistory=es.define(),eh.remote=es.define();let ed=[];function ef(e){return null==e?ed:Array.isArray(e)?e:[e]}var ep=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(ep||(ep={}));let eg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{n=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class em{constructor(e,t,i,n,r,s){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,s&&(s._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)Y(this,e<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(null==i){if(t)throw RangeError("Field is not present in this state");return}return Y(this,i),J(this,i)}update(...e){return function e(t,i,n){let r=eu(t,i.length?i[0]:{},t.doc.length);i.length&&!1===i[0].filter&&(n=!1);for(let e=1;e<i.length;e++){!1===i[e].filter&&(n=!1);let s=!!i[e].sequential;r=ec(r,eu(t,i[e],s?r.changes.newLength:t.doc.length),s)}let s=eh.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,i=t.facet(en),n=e;for(let r=i.length-1;r>=0;r--){let s=i[r](e);s&&Object.keys(s).length&&(n=ec(n,eu(t,s,e.changes.newLength),!0))}return n==e?e:eh.create(t,e.changes,e.selection,n.effects,n.annotations,n.scrollIntoView)}(n?function(t){let i=t.startState,n=!0;for(let e of i.facet(et)){let i=e(t);if(!1===i){n=!1;break}Array.isArray(i)&&(n=!0===n?i:function(e,t){let i=[];for(let n=0,r=0;;){let s,o;if(n<e.length&&(r==t.length||t[r]>=e[n]))s=e[n++],o=e[n++];else{if(!(r<t.length))return i;s=t[r++],o=t[r++]}!i.length||i[i.length-1]<s?i.push(s,o):i[i.length-1]<o&&(i[i.length-1]=o)}}(n,i))}if(!0!==n){let e,r;if(!1===n)r=t.changes.invertedDesc,e=C.empty(i.doc.length);else{let i=t.changes.filter(n);e=i.changes,r=i.filtered.mapDesc(i.changes).invertedDesc}t=eh.create(i,e,t.selection&&t.selection.map(r),ea.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let r=i.facet(ei);for(let n=r.length-1;n>=0;n--){let s=r[n](t);t=s instanceof eh?s:Array.isArray(s)&&1==s.length&&s[0]instanceof eh?s[0]:e(i,ef(s),!1)}return t}(s):s)}(this,e,!0)}applyTransaction(e){let t,i=this.config,{base:n,compartments:r}=i;for(let t of e.effects)t.is(K.reconfigure)?(i&&(r=new Map,i.compartments.forEach((e,t)=>r.set(t,e)),i=null),r.set(t.value.compartment,t.value.extension)):t.is(ea.reconfigure)?(i=null,n=t.value):t.is(ea.appendConfig)&&(i=null,n=ef(n).concat(t.value));t=i?e.startState.values.slice():new em(i=X.resolve(n,r,this),this.doc,this.selection,i.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values;let s=e.startState.facet(Z)?e.newSelection:e.newSelection.asSingle();new em(i,e.newDoc,s,t,(t,i)=>i.update(t,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:_.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],s=ef(i.effects);for(let i=1;i<t.ranges.length;i++){let o=e(t.ranges[i]),l=this.changes(o.changes),a=l.map(n);for(let e=0;e<i;e++)r[e]=r[e].map(a);let h=n.mapDesc(l,!0);r.push(o.range.map(h)),n=n.compose(a),s=ea.mapEffects(s,a).concat(ea.mapEffects(ef(o.effects),h))}return{changes:n,selection:_.create(r,t.mainIndex),effects:s}}changes(e=[]){return e instanceof C?e:C.of(e,this.doc.length,this.facet(em.lineSeparator))}toText(e){return r.of(e.split(this.facet(em.lineSeparator)||S))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(Y(this,t),J(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof W&&null!=this.config.address[n.id]&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||"string"!=typeof e.doc)throw RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let t in i)if(Object.prototype.hasOwnProperty.call(e,t)){let r=i[t],s=e[t];n.push(r.init(e=>r.spec.fromJSON(s,e)))}}return em.create({doc:e.doc,selection:_.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=X.resolve(e.extensions||[],new Map),i=e.doc instanceof r?e.doc:r.of((e.doc||"").split(t.staticFacet(em.lineSeparator)||S)),n=e.selection?e.selection instanceof _?e.selection:_.single(e.selection.anchor,e.selection.head):_.single(0);return j(n,i.length),t.staticFacet(Z)||(n=n.asSingle()),new em(t,i,n,t.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(em.tabSize)}get lineBreak(){return this.facet(em.lineSeparator)||"\n"}get readOnly(){return this.facet(er)}phrase(e,...t){for(let t of this.facet(em.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(e,i)=>{if("$"==i)return"$";let n=+(i||1);return!n||n>t.length?e:t[n-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let r of this.facet(Q))for(let s of r(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&n.push(s[e]);return n}charCategorizer(e){var t;return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return ep.Space;if(function(e){if(n)return n.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||eg.test(i)))return!0}return!1}(e))return ep.Word;for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return ep.Word;return ep.Other}}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),s=e-i,o=e-i;for(;s>0;){let e=g(t,s,!1);if(r(t.slice(e,s))!=ep.Word)break;s=e}for(;o<n;){let e=g(t,o);if(r(t.slice(o,e))!=ep.Word)break;o=e}return s==o?null:_.range(s+i,o+i)}}function ey(e,t,i={}){let n={};for(let t of e)for(let e of Object.keys(t)){let r=t[e],s=n[e];if(void 0===s)n[e]=r;else if(s===r||void 0===r);else if(Object.hasOwnProperty.call(i,e))n[e]=i[e](s,r);else throw Error("Config merge conflict for field "+e)}for(let e in t)void 0===n[e]&&(n[e]=t[e]);return n}em.allowMultipleSelections=Z,em.tabSize=N.define({combine:e=>e.length?e[0]:4}),em.lineSeparator=ee,em.readOnly=er,em.phrases=N.define({compare(e,t){let i=Object.keys(e),n=Object.keys(t);return i.length==n.length&&i.every(i=>e[i]==t[i])}}),em.languageData=Q,em.changeFilter=et,em.transactionFilter=ei,em.transactionExtender=en,K.reconfigure=ea.define();class ev{eq(e){return this==e}range(e,t=e){return ew.create(e,t,this)}}ev.prototype.startSide=ev.prototype.endSide=0,ev.prototype.point=!1,ev.prototype.mapMode=k.TrackDel;class ew{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new ew(e,t,i)}}function eb(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class ex{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let r=i?this.to:this.from;for(let s=n,o=r.length;;){if(s==o)return s;let n=s+o>>1,l=r[n]-e||(i?this.value[n].endSide:this.value[n].startSide)-t;if(n==s)return l>=0?s:o;l>=0?o=n:s=n+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,r);r<s;r++)if(!1===n(this.from[r]+e,this.to[r]+e,this.value[r]))return!1}map(e,t){let i=[],n=[],r=[],s=-1,o=-1;for(let l=0;l<this.value.length;l++){let a=this.value[l],h=this.from[l]+e,c=this.to[l]+e,u,d;if(h==c){let e=t.mapPos(h,a.startSide,a.mapMode);if(null==e||(u=d=e,a.startSide!=a.endSide&&(d=t.mapPos(h,a.endSide))<u))continue}else if((u=t.mapPos(h,a.startSide))>(d=t.mapPos(c,a.endSide))||u==d&&a.startSide>0&&a.endSide<=0)continue;0>(d-u||a.endSide-a.startSide)||(s<0&&(s=u),a.point&&(o=Math.max(o,d-u)),i.push(a),n.push(u-s),r.push(d-s))}return{mapped:i.length?new ex(n,r,i,o):null,pos:s}}}class eS{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new eS(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,s=e.filter;if(0==t.length&&!s)return this;if(i&&(t=t.slice().sort(eb)),this.isEmpty)return t.length?eS.of(t):this;let o=new eC(this,null,-1).goto(0),l=0,a=[],h=new ek;for(;o.value||l<t.length;)if(l<t.length&&(o.from-t[l].from||o.startSide-t[l].value.startSide)>=0){let e=t[l++];h.addInner(e.from,e.to,e.value)||a.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(o.chunkIndex)<t[l].from)&&(!s||n>this.chunkEnd(o.chunkIndex)||r<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!s||n>o.to||r<o.from||s(o.from,o.to,o.value))&&!h.addInner(o.from,o.to,o.value)&&a.push(ew.create(o.from,o.to,o.value)),o.next());return h.finishInner(this.nextLayer.isEmpty&&!a.length?eS.empty:this.nextLayer.update({add:a,filter:s,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r],l=e.touchesRange(s,s+o.length);if(!1===l)n=Math.max(n,o.maxPoint),t.push(o),i.push(e.mapPos(s));else if(!0===l){let{mapped:r,pos:l}=o.map(s,e);r&&(n=Math.max(n,r.maxPoint),t.push(r),i.push(l))}}let r=this.nextLayer.map(e);return 0==t.length?r:new eS(i,t,r||eS.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],s=this.chunk[n];if(t>=r&&e<=r+s.length&&!1===s.between(r,e-r,t-r,i))return}this.nextLayer.between(e,t,i)}}iter(e=0){return eO.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return eO.from(e).goto(t)}static compare(e,t,i,n,r=-1){let s=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r),o=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r),l=eM(s,o,i),a=new eA(s,l,r),h=new eA(o,l,r);i.iterGaps((e,t,i)=>eE(a,e,h,t,i,n)),i.empty&&0==i.length&&eE(a,0,h,0,0,n)}static eq(e,t,i=0,n){null==n&&(n=0x3b9ac9ff);let r=e.filter(e=>!e.isEmpty&&0>t.indexOf(e)),s=t.filter(t=>!t.isEmpty&&0>e.indexOf(t));if(r.length!=s.length)return!1;if(!r.length)return!0;let o=eM(r,s),l=new eA(r,o,0).goto(i),a=new eA(s,o,0).goto(i);for(;;){if(l.to!=a.to||!eD(l.active,a.active)||l.point&&(!a.point||!l.point.eq(a.point)))return!1;if(l.to>n)return!0;l.next(),a.next()}}static spans(e,t,i,n,r=-1){let s=new eA(e,null,r).goto(t),o=t,l=s.openStart;for(;;){let e=Math.min(s.to,i);if(s.point){let i=s.activeForPoint(s.to),r=s.pointFrom<t?i.length+1:s.point.startSide<0?i.length:Math.min(i.length,l);n.point(o,e,s.point,i,r,s.pointRank),l=Math.min(s.openEnd(e),i.length)}else e>o&&(n.span(o,e,s.active,l),l=s.openEnd(e));if(s.to>i)return l+(s.point&&s.to>i?1:0);o=s.to,s.next()}}static of(e,t=!1){let i=new ek;for(let n of e instanceof ew?[e]:t?function(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let n=e[i];if(eb(t,n)>0)return e.slice().sort(eb);t=n}return e}(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return eS.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=eS.empty;n=n.nextLayer)t=new eS(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}eS.empty=new eS([],[],null,-1),eS.empty.nextLayer=eS.empty;class ek{finishChunk(e){this.chunks.push(new ex(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new ek)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&0>(e-this.lastFrom||i.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");return!(n<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if(0>(e-this.lastTo||t.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(eS.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=eS.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function eM(e,t,i){let n=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&n.set(t.chunk[e],t.chunkPos[e]);let r=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let s=n.get(e.chunk[t]);null==s||(i?i.mapPos(s):s)!=e.chunkPos[t]||(null==i?void 0:i.touchesRange(s,s+e.chunk[t].length))||r.add(e.chunk[t])}return r}class eC{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){0>(this.to-e||this.endSide-t)&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class eO{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let s=e[r];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&n.push(new eC(s,t,i,r));return 1==n.length?n[0]:new eO(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)eT(this.heap,e);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)eT(this.heap,e);0>(this.to-e||this.value.endSide-t)&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),eT(this.heap,0)}}}function eT(e,t){for(let i=e[t];;){let n=(t<<1)+1;if(n>=e.length)break;let r=e[n];if(n+1<e.length&&r.compare(e[n+1])>=0&&(r=e[n+1],n++),0>i.compare(r))break;e[n]=i,e[t]=r,t=n}}class eA{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=eO.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&0>(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t);)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){eP(this.active,e),eP(this.activeTo,e),eP(this.activeRank,e),this.minActive=e_(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||n-this.activeTo[t])>0;)t++;eR(this.active,t,i),eR(this.activeTo,t,n),eR(this.activeRank,t,r),e&&eR(e,t,this.cursor.from),this.minActive=e_(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&0>(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&eP(i,n)}else if(this.cursor.value){if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else this.addActive(i),this.cursor.next()}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let t=i.length-1;t>=0&&i[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function eE(e,t,i,n,r,s){e.goto(t),i.goto(n);let o=n+r,l=n,a=n-t;for(;;){let t=e.to+a-i.to||e.endSide-i.endSide,n=t<0?e.to+a:i.to,r=Math.min(n,o);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&eD(e.activeForPoint(e.to),i.activeForPoint(i.to))||s.comparePoint(l,r,e.point,i.point):r>l&&!eD(e.active,i.active)&&s.compareRange(l,r,e.active,i.active),n>o)break;l=n,t<=0&&e.next(),t>=0&&i.next()}}function eD(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function eP(e,t){for(let i=t,n=e.length-1;i<n;i++)e[i]=e[i+1];e.pop()}function eR(e,t,i){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=i}function e_(e,t){let i=-1,n=1e9;for(let r=0;r<t.length;r++)0>(t[r]-n||e[r].endSide-e[i].endSide)&&(i=r,n=t[r]);return i}function ej(e,t,i=e.length){let n=0;for(let r=0;r<i;)9==e.charCodeAt(r)?(n+=t-n%t,r++):(n++,r=g(e,r));return n}function eL(e,t,i,n){for(let n=0,r=0;;){if(r>=t)return n;if(n==e.length)break;r+=9==e.charCodeAt(n)?i-r%i:1,n=g(e,n)}return!0===n?-1:e.length}},5533:(e,t,i)=>{"use strict";let n;i.d(t,{p:()=>eh,Nm:()=>ex,tk:()=>iM,SJ:()=>nd,lg:()=>e0,l9:()=>el,Uw:()=>iK,Sd:()=>nl,gB:()=>ns,$f:()=>iR,Eu:()=>nE,OO:()=>eY,W$:()=>i3,$1:()=>iL,mH:()=>nu,hJ:()=>ni});for(var r=i(8120),s=i(8699),o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},a="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),h="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),c=0;c<10;c++)o[48+c]=o[96+c]=String(c);for(var c=1;c<=24;c++)o[c+111]="F"+c;for(var c=65;c<=90;c++)o[c]=String.fromCharCode(c+32),l[c]=String.fromCharCode(c);for(var u in o)l.hasOwnProperty(u)||(l[u]=o[u]);function d(e){return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function f(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function p(e,t){if(!t.anchorNode)return!1;try{return f(e,t.anchorNode)}catch(e){return!1}}function g(e){return 3==e.nodeType?O(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function m(e,t,i,n){return!!i&&(w(e,t,i,n,-1)||w(e,t,i,n,1))}function y(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function v(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function w(e,t,i,n,r){for(;;){if(e==i&&t==n)return!0;if(t==(r<0?0:b(e))){if("DIV"==e.nodeName)return!1;let i=e.parentNode;if(!i||1!=i.nodeType)return!1;t=y(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType||1==(e=e.childNodes[t+(r<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=r<0?b(e):0}}}function b(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function x(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function S(e,t){let i=t.width/e.offsetWidth,n=t.height/e.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||1>Math.abs(t.width-e.offsetWidth))&&(i=1),(n>.995&&n<1.005||!isFinite(n)||1>Math.abs(t.height-e.offsetHeight))&&(n=1),{scaleX:i,scaleY:n}}class k{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?b(t):0),i,Math.min(e.focusOffset,i?b(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let M=null;function C(e){if(e.setActive)return e.setActive();if(M)return e.focus(M);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(null==M?{get preventScroll(){return M={preventScroll:!0},!0}}:void 0),!M){M=!1;for(let e=0;e<t.length;){let i=t[e++],n=t[e++],r=t[e++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}function O(e,t,i=t){let r=n||(n=document.createRange());return r.setEnd(e,i),r.setStart(e,t),r}function T(e,t,i,n){let r={key:t,code:t,keyCode:i,which:i,cancelable:!0};n&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=n);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,e.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function A(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function E(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function D(e,t){for(let i=e,n=t;;){if(3==i.nodeType&&n>0)return{node:i,offset:n};if(1==i.nodeType&&n>0){if("false"==i.contentEditable)return null;n=b(i=i.childNodes[n-1])}else{if(!i.parentNode||v(i))return null;n=y(i),i=i.parentNode}}}function P(e,t){for(let i=e,n=t;;){if(3==i.nodeType&&n<i.nodeValue.length)return{node:i,offset:n};if(1==i.nodeType&&n<i.childNodes.length){if("false"==i.contentEditable)return null;i=i.childNodes[n],n=0}else{if(!i.parentNode||v(i))return null;n=y(i)+1,i=i.parentNode}}}class R{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new R(e.parentNode,y(e),t)}static after(e,t){return new R(e.parentNode,y(e)+1,t)}}let _=[];class j{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let i=this.dom,n=null,r;for(let s of this.children){if(7&s.flags){if(!s.dom&&(r=n?n.nextSibling:i.firstChild)){let e=j.get(r);(!e||!e.parent&&e.canReuseDOM(s))&&s.reuseDOM(r)}s.sync(e,t),s.flags&=-8}if(r=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;r&&r!=s.dom;)r=L(r);else i.insertBefore(s.dom,r);n=s.dom}for((r=n?n.nextSibling:i.firstChild)&&t&&t.node==i&&(t.written=!0);r;)r=L(r)}else if(1&this.flags)for(let i of this.children)7&i.flags&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=0==b(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==n&&t.firstChild!=t.lastChild&&(n=e==t.firstChild?-1:1),e=t}i=n<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!j.get(i);)i=i.nextSibling;if(!i)return this.length;for(let e=0,t=0;;e++){let n=this.children[e];if(n.dom==i)return t;t+=n.length+n.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,s=-1,o=-1;for(let l=0,a=i,h=i;l<this.children.length;l++){let i=this.children[l],c=a+i.length;if(a<e&&c>t)return i.domBoundsAround(e,t,a);if(c>=e&&-1==n&&(n=l,r=a),a>t&&i.dom.parentNode==this.dom){s=l,o=h;break}h=c,a=c+i.breakAfter}return{from:r,to:o<0?i+this.length:o,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=_){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&0>i.indexOf(e)&&e.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let e=0;e<i.length;e++)i[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new N(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,r,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function L(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}j.prototype.breakAfter=0;class N{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function I(e,t,i,n,r,s,o,l,a){let{children:h}=e,c=h.length?h[t]:null,u=s.length?s[s.length-1]:null,d=u?u.breakAfter:o;if(!(t==n&&c&&!o&&!d&&s.length<2&&c.merge(i,r,s.length?u:null,0==i,l,a))){if(n<h.length){let e=h[n];e&&(r<e.length||e.breakAfter&&(null==u?void 0:u.breakAfter))?(t==n&&(e=e.split(r),r=0),!d&&u&&e.merge(0,r,u,!0,0,a)?s[s.length-1]=e:((r||e.children.length&&!e.children[0].length)&&e.merge(0,r,null,!1,0,a),s.push(e))):(null==e?void 0:e.breakAfter)&&(u?u.breakAfter=1:o=1),n++}for(c&&(c.breakAfter=o,i>0&&(!o&&s.length&&c.merge(i,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(i<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(i,c.length,null,!1,l,0),t++));t<n&&s.length;)if(h[n-1].become(s[s.length-1]))n--,s.pop(),a=s.length?0:l;else if(h[t].become(s[0]))t++,s.shift(),l=s.length?0:a;else break;!s.length&&t&&n<h.length&&!h[t-1].breakAfter&&h[n].merge(0,0,h[t-1],!1,l,a)&&t--,(t<n||s.length)&&e.replaceChildren(t,n,s)}}function B(e,t,i,n,r,s){let o=e.childCursor(),{i:l,off:a}=o.findPos(i,1),{i:h,off:c}=o.findPos(t,-1),u=t-i;for(let e of n)u+=e.length;e.length+=u,I(e,h,c,l,a,n,0,r,s)}let H="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},V="undefined"!=typeof document?document:{documentElement:{style:{}}},F=/Edge\/(\d+)/.exec(H.userAgent),W=/MSIE \d/.test(H.userAgent),z=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(H.userAgent),$=!!(W||z||F),q=!$&&/gecko\/(\d+)/i.test(H.userAgent),U=!$&&/Chrome\/(\d+)/.exec(H.userAgent),K="webkitFontSmoothing"in V.documentElement.style,G=!$&&/Apple Computer/.test(H.vendor),X=G&&(/Mobile\/\w+/.test(H.userAgent)||H.maxTouchPoints>2);var Y={mac:X||/Mac/.test(H.platform),windows:/Win/.test(H.platform),linux:/Linux|X11/.test(H.platform),ie:$,ie_version:W?V.documentMode||6:z?+z[1]:F?+F[1]:0,gecko:q,gecko_version:q?+(/Firefox\/(\d+)/.exec(H.userAgent)||[0,0])[1]:0,chrome:!!U,chrome_version:U?+U[1]:0,ios:X,android:/Android\b/.test(H.userAgent),webkit:K,safari:G,webkit_version:K?+(/\bAppleWebKit\/(\d+)/.exec(H.userAgent)||[0,0])[1]:0,tabSize:null!=V.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class J extends j{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,i){return!(8&this.flags)&&(!i||i instanceof J&&!(this.length-(t-e)+i.length>256)&&!(8&i.flags))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new J(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new R(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,i){let n=e.nodeValue.length;t>n&&(t=n);let r=t,s=t,o=0;0==t&&i<0||t==n&&i>=0?!(Y.chrome||Y.gecko)&&(t?(r--,o=1):s<n&&(s++,o=-1)):i<0?r--:s<n&&s++;let l=O(e,r,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:i>=0)?0:l.length-1];return Y.safari&&!o&&0==a.width&&(a=Array.prototype.find.call(l,e=>e.width)||a),o?x(a,o<0):a||null}(this.dom,e,t)}}class Q extends j{constructor(e,t=[],i=0){for(let n of(super(),this.mark=e,this.children=t,this.length=i,t))n.setParent(this)}setAttrs(e){if(A(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,r,s){return(!i||!!(i instanceof Q&&i.mark.eq(this.mark))&&(!e||!(r<=0))&&(!(t<this.length)||!(s<=0)))&&(B(this,e,t,i?i.children.slice():[],r-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,r=0;for(let s of this.children){let o=i+s.length;o>e&&t.push(i<e?s.split(e-i):s),n<0&&i>=e&&(n=r),i=o,r++}let s=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Q(this.mark,t,s)}domAtPos(e){return et(this,e)}coordsAt(e,t){return ei(this,e,t)}}class Z extends j{static create(e,t,i){return new Z(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Z.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,r,s){return(!i||i instanceof Z&&!!this.widget.compare(i.widget)&&(!(e>0)||!(r<=0))&&(!(t<this.length)||!(s<=0)))&&(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Z&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return r.xv.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):r.xv.empty}domAtPos(e){return(this.length?0==e:this.side>0)?R.before(this.dom):R.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let s=this.side?this.side<0:e>0;for(let t=s?n.length-1:0;r=n[t],e>0?0!=t:t!=n.length-1&&!(r.top<r.bottom);t+=s?-1:1);return x(r,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ee extends j{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ee&&e.side==this.side}split(){return new ee(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?R.before(this.dom):R.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return r.xv.empty}get isHidden(){return!0}}function et(e,t){let i=e.dom,{children:n}=e,r=0;for(let e=0;r<n.length;r++){let s=n[r],o=e+s.length;if(!(o==e&&0>=s.getSide())){if(t>e&&t<o&&s.dom.parentNode==i)return s.domAtPos(t-e);if(t<=e)break;e=o}}for(let e=r;e>0;e--){let t=n[e-1];if(t.dom.parentNode==i)return t.domAtPos(t.length)}for(let e=r;e<n.length;e++){let t=n[e];if(t.dom.parentNode==i)return t.domAtPos(0)}return new R(i,0)}function ei(e,t,i){let n=null,r=-1,s=null,o=-1;!function e(t,l){for(let a=0,h=0;a<t.children.length&&h<=l;a++){let c=t.children[a],u=h+c.length;u>=l&&(c.children.length?e(c,l-h):(!s||s.isHidden&&i>0)&&(u>l||h==u&&c.getSide()>0)?(s=c,o=l-h):(h<l||h==u&&0>c.getSide()&&!c.isHidden)&&(n=c,r=l-h)),h=u}}(e,t);let l=(i<0?n:s)||n||s;return l?l.coordsAt(Math.max(0,l==n?r:o),i):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let i=g(t);return i[i.length-1]||null}(e)}function en(e,t){for(let i in e)"class"==i&&t.class?t.class+=" "+e.class:"style"==i&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}J.prototype.children=Z.prototype.children=ee.prototype.children=_;let er=Object.create(null);function es(e,t,i){if(e==t)return!0;e||(e=er),t||(t=er);let n=Object.keys(e),r=Object.keys(t);if(n.length-(i&&n.indexOf(i)>-1?1:0)!=r.length-(i&&r.indexOf(i)>-1?1:0))return!1;for(let s of n)if(s!=i&&(-1==r.indexOf(s)||e[s]!==t[s]))return!1;return!0}function eo(e,t,i){let n=!1;if(t)for(let r in t)i&&r in i||(n=!0,"style"==r?e.style.cssText="":e.removeAttribute(r));if(i)for(let r in i)t&&t[r]==i[r]||(n=!0,"style"==r?e.style.cssText=i[r]:e.setAttribute(r,i[r]));return n}class el{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return -1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ea=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(ea||(ea={}));class eh extends r.uU{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new ec(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ed(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:s}=ef(e,t);i=(r?t?-3e8:-1:5e8)-1,n=(s?t?2e8:1:-6e8)+1}return new ed(e,i,n,t,e.widget||null,!0)}static line(e){return new eu(e)}static set(e,t=!1){return r.Xs.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}eh.none=r.Xs.empty;class ec extends eh{constructor(e){let{start:t,end:i}=ef(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof ec&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(i=e.attrs)||void 0===i?void 0:i.class))&&es(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw RangeError("Mark decorations may not be empty");return super.range(e,t)}}ec.prototype.point=!1;class eu extends eh{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof eu&&this.spec.class==e.spec.class&&es(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}eu.prototype.mapMode=r.gc.TrackBefore,eu.prototype.point=!0;class ed extends eh{constructor(e,t,i,n,s,o){super(t,i,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?r.gc.TrackBefore:r.gc.TrackAfter:r.gc.TrackDel}get type(){return this.startSide!=this.endSide?ea.WidgetRange:this.startSide<=0?ea.WidgetBefore:ea.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){var t,i;return e instanceof ed&&((t=this.widget)==(i=e.widget)||!!(t&&i&&t.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function ef(e,t=!1){let{inclusiveStart:i,inclusiveEnd:n}=e;return null==i&&(i=e.inclusive),null==n&&(n=e.inclusive),{start:null!=i?i:t,end:null!=n?n:t}}function ep(e,t,i,n=0){let r=i.length-1;r>=0&&i[r]+n>=e?i[r]=Math.max(i[r],t):i.push(e,t)}ed.prototype.point=!0;class eg extends j{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,s){if(i){if(!(i instanceof eg))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),B(this,e,t,i?i.children.slice():[],r,s),!0}split(e){let t=new eg;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let e=i;e<this.children.length;e++)t.append(this.children[e],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){es(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){!function e(t,i,n){let r,{children:s}=t;n>0&&i instanceof Q&&s.length&&(r=s[s.length-1])instanceof Q&&r.mark.eq(i.mark)?e(r,i.children[0],n-1):(s.push(i),i.setParent(t)),t.length+=i.length}(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=en(t,this.attrs||{})),i&&(this.attrs=en({class:i},this.attrs||{}))}domAtPos(e){return et(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?4&this.flags&&(A(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(eo(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&j.get(n) instanceof Q;)n=n.lastChild;if(!n||!this.length||"BR"!=n.nodeName&&(null===(i=j.get(n))||void 0===i?void 0:i.isEditable)==!1&&(!Y.ios||!this.children.some(e=>e instanceof J))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof J)||/[^ -~]/.test(i.text))return null;let n=g(i.dom);if(1!=n.length)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=ei(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=i.bottom-i.top;if(2>Math.abs(t-e.lineHeight)&&e.textHeight<t){let n=(t-e.textHeight)/2;return{top:i.top+n,bottom:i.bottom-n,left:i.left,right:i.left}}}return i}become(e){return e instanceof eg&&0==this.children.length&&0==e.children.length&&es(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],s=n+r.length;if(s>=t){if(r instanceof eg)return r;if(s>t)break}n=s+r.breakAfter}return null}}class em extends j{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,r,s){return(!i||i instanceof em&&!!this.widget.compare(i.widget)&&(!(e>0)||!(r<=0))&&(!(t<this.length)||!(s<=0)))&&(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?R.before(this.dom):R.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new em(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return _}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):r.xv.empty}domBoundsAround(){return null}become(e){return e instanceof em&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)||(this.widget instanceof ey?null:x(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t!=i&&(e<0?t<0:i>0)}}class ey extends el{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ev{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof em&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new eg),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ew(new ee(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof em||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:i,done:n}=this.cursor.next(this.skip);if(this.skip=0,n)throw Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(ew(new J(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r,s){if(this.disallowBlockEffectsFor[s]&&i instanceof ed){if(i.block)throw RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(i instanceof ed){if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new em(i.widget||eb.block,o,i));else{let s=Z.create(i.widget||eb.inline,o,o?0:i.startSide),l=this.atCursorPos&&!s.isEditable&&r<=n.length&&(e<t||i.startSide>0),a=!s.isEditable&&(e<t||r>n.length||i.startSide<=0),h=this.getLine();2!=this.pendingBuffer||l||s.isEditable||(this.pendingBuffer=0),this.flushBuffer(n),l&&(h.append(ew(new ee(1),n),r),r=n.length+Math.max(0,r-n.length)),h.append(ew(s,n),r),this.atCursorPos=a,this.pendingBuffer=a?e<t||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n,s){let o=new ev(e,t,i,s);return o.openEnd=r.Xs.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ew(e,t){for(let i of t)e=new Q(i,[e],e.length);return e}class eb extends el{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}eb.inline=new eb("span"),eb.block=new eb("div");var ex=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(ex||(ex={}));let eS=ex.LTR,ek=ex.RTL;function eM(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}let eC=eM("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),eO=eM("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),eT=Object.create(null),eA=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),i=e.charCodeAt(1);eT[t]=i,eT[i]=-t}function eE(e){return e<=247?eC[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?eO[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}let eD=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class eP{get dir(){return this.level%2?ek:eS}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let r=-1;for(let s=0;s<e.length;s++){let o=e[s];if(o.from<=t&&o.to>=t){if(o.level==i)return s;(r<0||(0!=n?n<0?o.from<t:o.to>t:e[r].level>o.level))&&(r=s)}}if(r<0)throw RangeError("Index out of range");return r}}let eR=[];function e_(e){return[new eP(0,e,0)]}let ej="",eL=r.r$.define(),eN=r.r$.define(),eI=r.r$.define(),eB=r.r$.define(),eH=r.r$.define(),eV=r.r$.define(),eF=r.r$.define(),eW=r.r$.define(),ez=r.r$.define(),e$=r.r$.define({combine:e=>e.some(e=>e)}),eq=r.r$.define({combine:e=>e.some(e=>e)}),eU=r.r$.define();class eK{constructor(e,t="nearest",i="nearest",n=5,r=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=s}map(e){return e.empty?this:new eK(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new eK(r.jT.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}let eG=r.Py.define({map:(e,t)=>e.map(t)}),eX=r.Py.define();function eY(e,t,i){let n=e.facet(eB);n.length?n[0](t):window.onerror?window.onerror(String(t),i,void 0,void 0,t):i?console.error(i+":",t):console.error(t)}let eJ=r.r$.define({combine:e=>!e.length||e[0]}),eQ=0,eZ=r.r$.define();class e0{constructor(e,t,i,n,r){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.extension=r(this)}static define(e,t){let{eventHandlers:i,eventObservers:n,provide:r,decorations:s}=t||{};return new e0(eQ++,e,i,n,e=>{let t=[eZ.of(e)];return s&&t.push(e8.of(t=>{let i=t.plugin(e);return i?s(i):eh.none})),r&&t.push(r(e)),t})}static fromClass(e,t){return e0.define(t=>new e(t),t)}}class e1{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(eY(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){eY(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){eY(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}let e2=r.r$.define(),e3=r.r$.define(),e8=r.r$.define(),e4=r.r$.define(),e5=r.r$.define(),e9=r.r$.define();function e7(e,t){let i=e.state.facet(e9);if(!i.length)return i;let n=i.map(t=>t instanceof Function?t(e):t),s=[];return r.Xs.spans(n,t.from,t.to,{point(){},span(e,i,n,r){let o=e-t.from,l=i-t.from,a=s;for(let e=n.length-1;e>=0;e--,r--){let i=n[e].spec.bidiIsolate,s;if(null==i&&(i=function(e,t,i){for(let n=t;n<i;n++){let t=eE(e.charCodeAt(n));if(1==t)break;if(2==t||4==t)return ek}return eS}(t.text,o,l)),r>0&&a.length&&(s=a[a.length-1]).to==o&&s.direction==i)s.to=l,a=s.inner;else{let e={from:o,to:l,direction:i,inner:[]};a.push(e),a=e.inner}}}}),s}let e6=r.r$.define();function te(e){let t=0,i=0,n=0,r=0;for(let s of e.state.facet(e6)){let o=s(e);o&&(null!=o.left&&(t=Math.max(t,o.left)),null!=o.right&&(i=Math.max(i,o.right)),null!=o.top&&(n=Math.max(n,o.top)),null!=o.bottom&&(r=Math.max(r,o.bottom)))}return{left:t,right:i,top:n,bottom:r}}let tt=r.r$.define();class ti{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new ti(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let n=0,r=0,s=0,o=0;;n++){let l=n==e.length?null:e[n],a=s-o,h=l?l.fromB:1e9;for(;r<t.length&&t[r]<h;){let e=t[r],n=t[r+1],s=Math.max(o,e),l=Math.min(h,n);if(s<=l&&new ti(s+a,l+a,s,l).addToSet(i),n>h)break;r+=2}if(!l)return i;new ti(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),s=l.toA,o=l.toB}}}class tn{constructor(e,t,i){for(let n of(this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=r.as.empty(this.startState.doc.length),i))this.changes=this.changes.compose(n.changes);let n=[];this.changes.iterChangedRanges((e,t,i,r)=>n.push(new ti(e,t,i,r))),this.changedRanges=n}static create(e,t,i){return new tn(e,t,i)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class tr extends j{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=eh.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new eg],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ti(0,0,0,e.state.doc.length)],0,null)}update(e){var t,i,n,s,o,l;let a,h;let c=e.changedRanges;this.minWidth>0&&c.length&&(c.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let u=-1;!(this.view.inputState.composing>=0)||this.view.observer.editContext||((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?u=this.domChanged.newSel.head:(i=e.changes,n=this.hasComposition,a=!1,n&&i.iterChangedRanges((e,t)=>{e<n.to&&t>n.from&&(a=!0)}),a||e.selectionSet||(u=e.state.selection.main.head)));let d=u>-1?function(e,t,i){let n=ts(e,i);if(!n)return null;let{node:r,from:s,to:o}=n,l=r.nodeValue;if(/[\n\r]/.test(l)||e.state.doc.sliceString(n.from,n.to)!=l)return null;let a=t.invertedDesc,h=new ti(a.mapPos(s),a.mapPos(o),s,o),c=[];for(let t=r.parentNode;;t=t.parentNode){let i=j.get(t);if(i instanceof Q)c.push({node:t,deco:i.mark});else{if(i instanceof eg||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:h,text:r,marks:c,line:t};if(t==e.contentDOM)return null;c.push({node:t,deco:new ec({inclusive:!0,attributes:function(e){let t=Object.create(null);for(let i=0;i<e.attributes.length;i++){let n=e.attributes[i];t[n.name]=n.value}return t}(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,u):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:i}=this.hasComposition;c=new ti(t,i,e.changes.mapPos(t,-1),e.changes.mapPos(i,1)).addToSet(c.slice())}this.hasComposition=d?{from:d.range.fromB,to:d.range.toB}:null,(Y.ie||Y.chrome)&&!d&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let f=(s=this.decorations,o=this.updateDeco(),l=e.changes,h=new to,r.Xs.compare(s,o,l,h),h.changes);return c=ti.extendWithRanges(c,f),(!!(7&this.flags)||0!=c.length)&&(this.updateInner(c,e.startState.doc.length,d),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=Y.chrome||Y.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof em&&e.widget instanceof ey&&r.push(e.dom);n.updateGaps(r)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let e=n.length-1;;e--){let t=e>=0?n[e]:null;if(!t)break;let{fromA:s,toA:o,fromB:l,toB:a}=t,h,c,u,d;if(i&&i.range.fromB<a&&i.range.toB>l){let e=ev.build(this.view.state.doc,l,i.range.fromB,this.decorations,this.dynamicDecorationMap),t=ev.build(this.view.state.doc,i.range.toB,a,this.decorations,this.dynamicDecorationMap);c=e.breakAtStart,u=e.openStart,d=t.openEnd;let n=this.compositionView(i);t.breakAtStart?n.breakAfter=1:t.content.length&&n.merge(n.length,n.length,t.content[0],!1,t.openStart,0)&&(n.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&n.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),h=e.content.concat(n).concat(t.content)}else({content:h,breakAtStart:c,openStart:u,openEnd:d}=ev.build(this.view.state.doc,l,a,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(o,1),{i:g,off:m}=r.findPos(s,-1);I(this,g,m,f,p,h,c,u,d)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){for(let t of(this.editContextFormatting=this.editContextFormatting.map(e.changes),e.transactions))for(let e of t.effects)e.is(eX)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new J(e.text.nodeValue);for(let{deco:i}of(t.flags|=8,e.marks))t=new Q(i,[t],t.length);let i=new eg;return i.append(t,0),i}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some(e=>7&e.flags)?1:0),this.markedForComposition.add(t);let i=j.get(e);i&&i!=t&&(i.dom=null),t.setDOM(e)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],t(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,t=!1){var i;(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,s=!r&&p(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),h=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Y.gecko&&l.empty&&!this.hasComposition&&1==(i=a).node.nodeType&&i.node.firstChild&&(0==i.offset||"false"==i.node.childNodes[i.offset-1].contentEditable)&&(i.offset==i.node.childNodes.length||"false"==i.node.childNodes[i.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(e,a.node.childNodes[a.offset]||null)),a=h=new R(e,0),o=!0}let c=this.view.observer.selectionRange;!o&&c.focusNode&&(m(a.node,a.offset,c.anchorNode,c.anchorOffset)&&m(h.node,h.offset,c.focusNode,c.focusOffset)||this.suppressWidgetCursorChange(c,l))||(this.view.observer.ignore(()=>{Y.android&&Y.chrome&&this.dom.contains(c.focusNode)&&function(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(1==i.nodeType&&"false"==i.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=d(this.view.root);if(e){if(l.empty){if(Y.gecko){var t,i;let e=(t=a.node,i=a.offset,1!=t.nodeType?0:(i&&"false"==t.childNodes[i-1].contentEditable?1:0)|(i<t.childNodes.length&&"false"==t.childNodes[i].contentEditable?2:0));if(e&&3!=e){let t=(1==e?D:P)(a.node,a.offset);t&&(a=new R(t.node,t.offset))}}e.collapse(a.node,a.offset),null!=l.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=l.bidiLevel)}else if(e.extend){e.collapse(a.node,a.offset);try{e.extend(h.node,h.offset)}catch(e){}}else{let t=document.createRange();l.anchor>l.head&&([a,h]=[h,a]),t.setEnd(h.node,h.offset),t.setStart(a.node,a.offset),e.removeAllRanges(),e.addRange(t)}}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(a,h)),this.impreciseAnchor=a.precise?null:new R(c.anchorNode,c.anchorOffset),this.impreciseHead=h.precise?null:new R(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&m(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=d(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=eg.find(this,t.head);if(!s)return;let o=s.posAtStart;if(t.head==o||t.head==o+s.length)return;let l=this.coordsAt(t.head,-1),a=this.coordsAt(t.head,1);if(!l||!a||l.bottom>a.top)return;let h=this.domAtPos(t.head+t.assoc);i.collapse(h.node,h.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&i.collapse(n,r)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let n=e.offset;!i&&n<t.childNodes.length;n++){let e=j.get(t.childNodes[n]);e instanceof eg&&(i=e.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let e=j.get(t.childNodes[n]);e instanceof eg&&(i=e.domAtPos(e.length))}return i?new R(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let e=j.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(i<e.length||e instanceof eg)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let r=this.length,s=this.children.length-1;s>=0;s--){let o=this.children[s],l=r-o.breakAfter,a=l-o.length;if(l<e)break;if(a<=e&&(a<e||o.covers(-1))&&(l>e||o.covers(1))&&(!i||o instanceof eg&&!(i instanceof eg&&t>=0)))i=o,n=a;else if(i&&a==e&&l==e&&o instanceof em&&2>Math.abs(t)){if(o.deco.startSide<0)break;s&&(i=null)}r=a}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof eg))return null;for(;n.children.length;){let{i:e,off:t}=n.childPos(i,1);for(;;e++){if(e==n.children.length)return null;if((n=n.children[e]).length)break}i=t}if(!(n instanceof J))return null;let s=(0,r.cp)(n.text,i);if(s==i)return null;let o=O(n.dom,i,s).getClientRects();for(let e=0;e<o.length;e++){let t=o[e];if(e==o.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,s=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,l=this.view.textDirection==ex.LTR;for(let e=0,a=0;a<this.children.length;a++){let h=this.children[a],c=e+h.length;if(c>n)break;if(e>=i){let i=h.dom.getBoundingClientRect();if(t.push(i.height),s){let t=h.dom.lastChild,n=t?g(t):[];if(n.length){let t=n[n.length-1],s=l?t.right-i.left:i.right-t.left;s>o&&(o=s,this.minWidth=r,this.minWidthFrom=e,this.minWidthTo=c)}}}e=c+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?ex.RTL:ex.LTR}measureTextSize(){for(let e of this.children)if(e instanceof eg){let t=e.measureTextSize();if(t)return t}let e=document.createElement("div"),t,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=g(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new N(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let r=n==t.viewports.length?null:t.viewports[n],s=r?r.from-1:this.length;if(s>i){let n=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(eh.replace({widget:new ey(n),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!r)break;i=r.to+1}return eh.set(e)}updateDeco(){let e=1,t=this.view.state.facet(e8).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),i=!1,n=this.view.state.facet(e4).map((e,t)=>{let n="function"==typeof e;return n&&(i=!0),n?e(this.view):e});for(n.length&&(this.dynamicDecorationMap[e++]=i,t.push(r.Xs.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=t.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let t of this.view.state.facet(eU))try{if(t(this.view,e.range,e))return!0}catch(e){eY(this.view.state,e,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=te(this.view),s={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:o,offsetHeight:l}=this.view.scrollDOM;!function(e,t,i,n,r,s,o,l){let a=e.ownerDocument,h=a.defaultView||window;for(let c=e,u=!1;c&&!u;)if(1==c.nodeType){let e,d=c==a.body,f=1,p=1;if(d)e=function(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let t=c.getBoundingClientRect();({scaleX:f,scaleY:p}=S(c,t)),e={left:t.left,right:t.left+c.clientWidth*f,top:t.top,bottom:t.top+c.clientHeight*p}}let g=0,m=0;if("nearest"==r)t.top<e.top?(m=-(e.top-t.top+o),i>0&&t.bottom>e.bottom+m&&(m=t.bottom-e.bottom+m+o)):t.bottom>e.bottom&&(m=t.bottom-e.bottom+o,i<0&&t.top-m<e.top&&(m=-(e.top+m-t.top+o)));else{let n=t.bottom-t.top,s=e.bottom-e.top;m=("center"==r&&n<=s?t.top+n/2-s/2:"start"==r||"center"==r&&i<0?t.top-o:t.bottom-s+o)-e.top}if("nearest"==n?t.left<e.left?(g=-(e.left-t.left+s),i>0&&t.right>e.right+g&&(g=t.right-e.right+g+s)):t.right>e.right&&(g=t.right-e.right+s,i<0&&t.left<e.left+g&&(g=-(e.left+g-t.left+s))):g=("center"==n?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==n==l?t.left-s:t.right-(e.right-e.left)+s)-e.left,g||m){if(d)h.scrollBy(g,m);else{let e=0,i=0;if(m){let e=c.scrollTop;c.scrollTop+=m/p,i=(c.scrollTop-e)*p}if(g){let t=c.scrollLeft;c.scrollLeft+=g/f,e=(c.scrollLeft-t)*f}t={left:t.left-e,top:t.top-i,right:t.right-e,bottom:t.bottom-i},e&&1>Math.abs(e-g)&&(n="nearest"),i&&1>Math.abs(i-m)&&(r="nearest")}}if(d)break;c=c.assignedSlot||c.parentNode}else if(11==c.nodeType)c=c.host;else break}(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==ex.LTR)}}function ts(e,t){let i=e.observer.selectionRange;if(!i.focusNode)return null;let n=D(i.focusNode,i.focusOffset),r=P(i.focusNode,i.focusOffset),s=n||r;if(r&&n&&r.node!=n.node){let t=j.get(r.node);if(!t||t instanceof J&&t.text!=r.node.nodeValue)s=r;else if(e.docView.lastCompositionAfterCursor){let e=j.get(n.node);!e||e instanceof J&&e.text!=n.node.nodeValue||(s=r)}}if(e.docView.lastCompositionAfterCursor=s!=n,!s)return null;let o=t-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}let to=class{constructor(){this.changes=[]}compareRange(e,t){ep(e,t,this.changes)}comparePoint(e,t){ep(e,t,this.changes)}};function tl(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function ta(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function th(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function tc(e,t,i){let n=e.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<n;l++){let n=O(e,l,l+1).getClientRects();for(let a=0;a<n.length;a++){let h=n[a];if(h.top==h.bottom)continue;o||(o=t-h.left);let c=(h.top>i?h.top-i:i-h.bottom)-1;if(h.left-1<=t&&h.right+1>=t&&c<s){let i=t>=(h.left+h.right)/2,n=i;if((Y.chrome||Y.gecko)&&O(e,l).getBoundingClientRect().left==h.right&&(n=!i),c<=0)return{node:e,offset:l+(n?1:0)};r=l+(n?1:0),s=c}}}return{node:e,offset:r>-1?r:o>0?e.nodeValue.length:0}}function tu(e,t,i,n=-1){var r,s;let o=e.contentDOM.getBoundingClientRect(),l=o.top+e.viewState.paddingTop,a,{docHeight:h}=e.viewState,{x:c,y:u}=t,d=u-l;if(d<0)return 0;if(d>h)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,r=!1;(a=e.elementAtHeight(d)).type!=ea.Text;)for(;!((d=n>0?a.bottom+t:a.top-t)>=0)||!(d<=h);){if(r)return i?null:0;r=!0,n=-n}u=l+d;let f=a.from;if(f<e.viewport.from)return 0==e.viewport.from?0:i?null:td(e,o,a,c,u);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:i?null:td(e,o,a,c,u);let p=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:p,y=m.elementFromPoint(c,u);y&&!e.contentDOM.contains(y)&&(y=null),!y&&(c=Math.max(o.left+1,Math.min(o.right-1,c)),(y=m.elementFromPoint(c,u))&&!e.contentDOM.contains(y)&&(y=null));let v,w=-1;if(y&&(null===(r=e.docView.nearest(y))||void 0===r?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(c,u);e&&({offsetNode:v,offset:w}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(c,u);t&&({startContainer:v,startOffset:w}=t,(!e.contentDOM.contains(v)||Y.safari&&function(e,t,i){let n;if(3!=e.nodeType||t!=(n=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return O(e,n-1,n).getBoundingClientRect().left>i}(v,w,c)||Y.chrome&&function(e,t,i){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return i-(1==e.nodeType?e.getBoundingClientRect():O(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,w,c))&&(v=void 0))}v&&(w=Math.min(b(v),w))}if(!v||!e.docView.dom.contains(v)){let t=eg.find(e.docView,f);if(!t)return d>a.top+a.height/2?a.to:a.from;({node:v,offset:w}=function e(t,i,n){let r,s,o,l,a,h,c,u,d=!1;for(let m=t.firstChild;m;m=m.nextSibling){let t=g(m);for(let g=0;g<t.length;g++){var f,p;let y=t[g];h&&tl(h,y)&&(y=ta(th(y,h.bottom),h.top));let v=(f=y).left>i?f.left-i:Math.max(0,i-f.right),w=(p=y).top>n?p.top-n:Math.max(0,n-p.bottom);if(0==v&&0==w)return 3==m.nodeType?tc(m,i,n):e(m,i,n);if(!a||u>w||u==w&&c>v){a=m,h=y,c=v,u=w;let e=w?n<y.top?-1:1:v?i<y.left?-1:1:0;d=!e||(e>0?g<t.length-1:g>0)}0==v?n>y.bottom&&(!o||o.bottom<y.bottom)?(r=m,o=y):n<y.top&&(!l||l.top>y.top)&&(s=m,l=y):o&&tl(o,y)?o=th(o,y.bottom):l&&tl(l,y)&&(l=ta(l,y.top))}}if(o&&o.bottom>=n?(a=r,h=o):l&&l.top<=n&&(a=s,h=l),!a)return{node:t,offset:0};let m=Math.max(h.left,Math.min(h.right,i));if(3==a.nodeType)return tc(a,m,n);if(d&&"false"!=a.contentEditable)return e(a,m,n);let y=Array.prototype.indexOf.call(t.childNodes,a)+(i>=(h.left+h.right)/2?1:0);return{node:t,offset:y}}(t.dom,c,u))}let x=e.docView.nearest(v);if(!x)return null;if(!x.isWidget||(null===(s=x.dom)||void 0===s?void 0:s.nodeType)!=1)return x.localPosFromDOM(v,w)+x.posAtStart;{let e=x.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?x.posAtStart:x.posAtEnd}}function td(e,t,i,n,s){let o=Math.round((n-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&i.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;o+=Math.floor((s-i.top-(e.defaultLineHeight-t)*.5)/t)*e.viewState.heightOracle.lineLength}let l=e.state.sliceDoc(i.from,i.to);return i.from+(0,r.Gz)(l,o,e.state.tabSize)}function tf(e,t){let i=e.lineBlockAt(t);if(Array.isArray(i.type)){for(let e of i.type)if(e.to>t||e.to==t&&(e.to==i.to||e.type==ea.Text))return e}return i}function tp(e,t,i,n){let s=e.state.doc.lineAt(t.head),o=e.bidiSpans(s),l=e.textDirectionAt(s.from);for(let a=t,h=null;;){let t=function(e,t,i,n,s){var o;let l=n.head-e.from,a=eP.find(t,l,null!==(o=n.bidiLevel)&&void 0!==o?o:-1,n.assoc),h=t[a],c=h.side(s,i);if(l==c){let e=a+=s?1:-1;if(e<0||e>=t.length)return null;l=(h=t[a=e]).side(!s,i),c=h.side(s,i)}let u=(0,r.cp)(e.text,l,h.forward(s,i));(u<h.from||u>h.to)&&(u=c),ej=e.text.slice(Math.min(l,u),Math.max(l,u));let d=a==(s?t.length-1:0)?null:t[a+(s?1:-1)];return d&&u==c&&d.level+(s?0:1)<h.level?r.jT.cursor(d.side(!s,i)+e.from,d.forward(s,i)?1:-1,d.level):r.jT.cursor(u+e.from,h.forward(s,i)?-1:1,h.level)}(s,o,l,a,i),c=ej;if(!t){if(s.number==(i?e.state.doc.lines:1))return a;c="\n",s=e.state.doc.line(s.number+(i?1:-1)),o=e.bidiSpans(s),t=e.visualLineSide(s,!i)}if(h){if(!h(c))return a}else{if(!n)return t;h=n(c)}a=t}}function tg(e,t,i){for(;;){let n=0;for(let r of e)r.between(t-1,t+1,(e,r,s)=>{if(t>e&&t<r){let s=n||i||(t-e<r-t?-1:1);t=s<0?e:r,n=s}});if(!n)return t}}function tm(e,t,i){let n=tg(e.state.facet(e5).map(t=>t(e)),i.from,t.head>i.from?-1:1);return n==i.from?i:r.jT.cursor(n,n<i.from?1:-1)}class ty{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(r.yy.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+="￿"}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let e=this.text.length;this.readNode(n);let r=n.nextSibling;if(r==t)break;let s=j.get(n),o=j.get(r);(s&&o?s.breakAfter:(s?s.breakAfter:v(n))||v(r)&&("BR"!=n.nodeName||n.cmIgnore)&&this.text.length>e)&&this.lineBreak(),n=r}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,s=1,o;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(o=n.exec(t))&&(r=o.index,s=o[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);i=r+s}}readNode(e){if(e.cmIgnore)return;let t=j.get(e),i=t&&t.overrideDOMText;if(null!=i){this.findPointInside(e,i.length);for(let e=i.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(!function(e,t,i){for(;;){if(!t||i<b(t))return!1;if(t==e)return!0;i=y(t)+1,t=t.parentNode}}(e,i.node,i.offset)?0:t))}}class tv{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class tw{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let t=s||o?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:s}=e.observer.selectionRange;return i&&(t.push(new tv(i,n)),(r!=i||s!=n)&&t.push(new tv(r,s))),t}(e),i=new ty(t,e.state);i.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=i.text,this.newSel=function(e,t){if(0==e.length)return null;let i=e[0].pos,n=2==e.length?e[1].pos:i;return i>-1&&n>-1?r.jT.single(i+t,n+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,i=s&&s.node==t.focusNode&&s.offset==t.focusOffset||!f(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),n=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!f(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),l=e.viewport;if((Y.ios||Y.chrome)&&e.state.selection.main.empty&&i!=n&&(l.from>0||l.to<e.state.doc.length)){let t=Math.min(i,n),r=Math.max(i,n),s=l.from-t,o=l.to-r;(0==s||1==s||0==t)&&(0==o||-1==o||r==e.state.doc.length)&&(i=0,n=e.state.doc.length)}this.newSel=r.jT.single(n,i)}}}function tb(e,t){let i;let{newSel:n}=t,s=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:n,to:l}=t.bounds,a=s.from,h=null;(8===o||Y.android&&t.text.length<l-n)&&(a=s.to,h="end");let c=function(e,t,i,n){let r=Math.min(e.length,t.length),s=0;for(;s<r&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==r&&e.length==t.length)return null;let o=e.length,l=t.length;for(;o>0&&l>0&&e.charCodeAt(o-1)==t.charCodeAt(l-1);)o--,l--;if("end"==n){let e=Math.max(0,s-Math.min(o,l));i-=o+e-s}if(o<s&&e.length<t.length){let e=i<=s&&i>=o?s-i:0;s-=e,l=s+(l-o),o=s}else if(l<s){let e=i<=s&&i>=l?s-i:0;s-=e,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}(e.state.doc.sliceString(n,l,"￿"),t.text,a-n,h);c&&(Y.chrome&&13==o&&c.toB==c.from+2&&"￿￿"==t.text.slice(c.from,c.toB)&&c.toB--,i={from:n+c.from,to:n+c.toA,insert:r.xv.of(t.text.slice(c.from,c.toB).split("￿"))})}else n&&(!e.hasFocus&&e.state.facet(eJ)||n.main.eq(s))&&(n=null);if(!i&&!n)return!1;if(!i&&t.typeOver&&!s.empty&&n&&n.main.empty?i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4?i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,s.to))}:(Y.mac||Y.android)&&i&&i.from==i.to&&i.from==s.head-1&&/^\. ?$/.test(i.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(n&&2==i.insert.length&&(n=r.jT.single(n.main.anchor-1,n.main.head-1)),i={from:s.from,to:s.to,insert:r.xv.of([" "])}):Y.chrome&&i&&i.from==i.to&&i.from==s.head&&"\n "==i.insert.toString()&&e.lineWrapping&&(n&&(n=r.jT.single(n.main.anchor-1,n.main.head-1)),i={from:s.from,to:s.to,insert:r.xv.of([" "])}),i)return tx(e,i,n,o);if(!n||n.main.eq(s))return!1;{let t=!1,i="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),i=e.inputState.lastSelectionOrigin),e.dispatch({selection:n,scrollIntoView:t,userEvent:i}),!0}}function tx(e,t,i,n=-1){let s;if(Y.ios&&e.inputState.flushIOSKey(t))return!0;let o=e.state.selection.main;if(Y.android&&(t.to==o.to&&(t.from==o.from||t.from==o.from-1&&" "==e.state.sliceDoc(t.from,o.from))&&1==t.insert.length&&2==t.insert.lines&&T(e.contentDOM,"Enter",13)||(t.from==o.from-1&&t.to==o.to&&0==t.insert.length||8==n&&t.insert.length<t.to-t.from&&t.to>o.head)&&T(e.contentDOM,"Backspace",8)||t.from==o.from&&t.to==o.to+1&&0==t.insert.length&&T(e.contentDOM,"Delete",46)))return!0;let l=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>s||(s=function(e,t,i){let n,s=e.state,o=s.selection.main;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let i=o.from<t.from?s.sliceDoc(o.from,t.from):"",r=o.to>t.to?s.sliceDoc(t.to,o.to):"";n=s.replaceSelection(e.state.toText(i+t.insert.sliceString(0,void 0,e.state.lineBreak)+r))}else{let l=s.changes(t),a=i&&i.main.to<=l.newLength?i.main:void 0;if(s.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let h=e.state.sliceDoc(t.from,t.to),c,u=i&&ts(e,i.main.head);if(u){let e=t.insert.length-(t.to-t.from);c={from:u.from,to:u.to-e}}else c=e.state.doc.lineAt(o.head);let d=o.to-t.to,f=o.to-o.from;n=s.changeByRange(i=>{if(i.from==o.from&&i.to==o.to)return{changes:l,range:a||i.map(l)};let n=i.to-d,u=n-h.length;if(i.to-i.from!=f||e.state.sliceDoc(u,n)!=h||i.to>=c.from&&i.from<=c.to)return{range:i};let p=s.changes({from:u,to:n,insert:t.insert}),g=i.to-o.to;return{changes:p,range:a?r.jT.range(Math.max(0,a.anchor+g),Math.max(0,a.head+g)):i.map(p)}})}else n={changes:l,selection:a&&s.selection.replaceRange(a)}}let l="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,l+=".compose",e.inputState.compositionFirstChange&&(l+=".start",e.inputState.compositionFirstChange=!1)),s.update(n,{userEvent:l,scrollIntoView:!0})}(e,t,i));return e.state.facet(eV).some(i=>i(e,t.from,t.to,l,a))||e.dispatch(a()),!0}class tS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Y.safari&&e.contentDOM.addEventListener("input",()=>null),Y.gecko&&function(e){tK.has(e)||(tK.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){!(!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i=t.target,n;i!=e.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=j.get(i))&&n.ignoreEvent(t))return!1;return!0}(this.view,e)||this.ignoreDuringComposition(e))&&("keydown"==e.type&&this.keydown(e)||this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let e of i.observers)e(this.view,t);for(let e of i.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=function(e){let t=Object.create(null);function i(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec;if(e&&e.domEventHandlers)for(let n in e.domEventHandlers){let r=e.domEventHandlers[n];r&&i(n).handlers.push(tk(t.value,r))}if(e&&e.domEventObservers)for(let n in e.domEventObservers){let r=e.domEventObservers[n];r&&i(n).observers.push(tk(t.value,r))}}for(let e in tE)i(e).handlers.push(tE[e]);for(let e in tD)i(e).observers.push(tD[e]);return t}(e),i=this.handlers,n=this.view.contentDOM;for(let e in t)if("scroll"!=e){let r=!t[e].handlers.length,s=i[e];s&&!s.handlers.length!=r&&(n.removeEventListener(e,this.handleEvent),s=null),s||n.addEventListener(e,this.handleEvent,{passive:r})}for(let e in i)"scroll"==e||t[e]||n.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){let t;return this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),!!(9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))||((this.tabFocusMode>0&&27!=e.keyCode&&0>tO.indexOf(e.keyCode)&&(this.tabFocusMode=-1),Y.android&&Y.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))?(this.view.observer.delayAndroidKey(e.key,e.keyCode),!0):Y.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=tM.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||tC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(229!=e.keyCode&&this.view.observer.forceFlush(),!1))}flushIOSKey(e){let t=this.pendingIOSKey;return!(!t||"Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,T(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(Y.safari&&!Y.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function tk(e,t){return(i,n)=>{try{return t.call(e,n,i)}catch(e){eY(i.state,e)}}}let tM=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tC="dthko",tO=[16,17,18,20,91,92,224,225];function tT(e){return .7*Math.max(0,e)+8}class tA{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t=e.ownerDocument,i,n;for(let r=e.parentNode;r&&r!=t.body&&(!i||!n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!i&&r.scrollWidth>r.clientWidth&&(i=r),r=r.assignedSlot||r.parentNode;else if(11==r.nodeType)r=r.host;else break;return{x:i,y:n}}(e.contentDOM),this.atoms=e.state.facet(e5).map(t=>t(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(r.yy.allowMultipleSelections)&&function(e,t){let i=e.state.facet(eL);return i.length?i[0](t):Y.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!!function(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let n=d(e.root);if(!n||0==n.rangeCount)return!0;let r=n.getRangeAt(0).getClientRects();for(let e=0;e<r.length;e++){let i=r[e];if(i.left<=t.clientX&&i.right>=t.clientX&&i.top<=t.clientY&&i.bottom>=t.clientY)return!0}return!1}(e,t)&&1==tF(t)&&null}start(e){!1===this.dragging&&this.select(e)}move(e){var t;if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&10>Math.max(Math.abs((t=this.startEvent).clientX-e.clientX),Math.abs(t.clientY-e.clientY)))return;this.select(this.lastEvent=e);let i=0,n=0,r=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=te(this.view);e.clientX-a.left<=r+6?i=-tT(r-e.clientX):e.clientX+a.right>=o-6&&(i=tT(e.clientX-o)),e.clientY-a.top<=s+6?n=-tT(s-e.clientY):e.clientY+a.bottom>=l-6&&(n=tT(e.clientY-l)),this.setScrollSpeed(i,n)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],s=null;if(n.empty){let e=tg(this.atoms,n.from,0);e!=n.from&&(s=r.jT.cursor(e,-1))}else{let e=tg(this.atoms,n.from,-1),t=tg(this.atoms,n.to,1);(e!=n.from||t!=n.to)&&(s=r.jT.range(n.from==n.anchor?e:t,n.from==n.head?e:t))}s&&(t||(t=e.ranges.slice()),t[i]=s)}return t?r.jT.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,!1===this.dragging))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}let tE=Object.create(null),tD=Object.create(null),tP=Y.ie&&Y.ie_version<15||Y.ios&&Y.webkit_version<604;function tR(e,t,i){for(let n of e.facet(t))i=n(i,e);return i}function t_(e,t){t=tR(e.state,eW,t);let{state:i}=e,n,s=1,o=i.toText(t),l=o.lines==i.selection.ranges.length;if(null!=tz&&i.selection.ranges.every(e=>e.empty)&&tz==o.toString()){let e=-1;n=i.changeByRange(n=>{let a=i.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let h=i.toText((l?o.line(s++).text:t)+i.lineBreak);return{changes:{from:a.from,insert:h},range:r.jT.cursor(n.from+h.length)}})}else n=l?i.changeByRange(e=>{let t=o.line(s++);return{changes:{from:e.from,to:e.to,insert:t.text},range:r.jT.cursor(e.from+t.length)}}):i.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function tj(e,t,i,n){if(1==n)return r.jT.cursor(t,i);if(2==n)return function(e,t,i=1){let n=e.charCategorizer(t),s=e.doc.lineAt(t),o=t-s.from;if(0==s.length)return r.jT.cursor(t);0==o?i=1:o==s.length&&(i=-1);let l=o,a=o;i<0?l=(0,r.cp)(s.text,o,!1):a=(0,r.cp)(s.text,o);let h=n(s.text.slice(l,a));for(;l>0;){let e=(0,r.cp)(s.text,l,!1);if(n(s.text.slice(e,l))!=h)break;l=e}for(;a<s.length;){let e=(0,r.cp)(s.text,a);if(n(s.text.slice(a,e))!=h)break;a=e}return r.jT.range(l+s.from,a+s.from)}(e.state,t,i);{let i=eg.find(e.docView,t),n=e.state.doc.lineAt(i?i.posAtEnd:t),s=i?i.posAtStart:n.from,o=i?i.posAtEnd:n.to;return o<e.state.doc.length&&o==n.to&&o++,r.jT.range(s,o)}}tD.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},tE.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),tD.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},tD.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},tE.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let n of e.state.facet(eI))if(i=n(e,t))break;if(i||0!=t.button||(i=function(e,t){let i=tN(e,t),n=tF(t),s=e.state.selection;return{update(e){e.docChanged&&(i.pos=e.changes.mapPos(i.pos),s=s.map(e.changes))},get(t,o,l){let a=tN(e,t),h,c=tj(e,a.pos,a.bias,n);if(i.pos!=a.pos&&!o){let t=tj(e,i.pos,i.bias,n),s=Math.min(t.from,c.from),o=Math.max(t.to,c.to);c=s<c.from?r.jT.range(s,o):r.jT.range(o,s)}return o?s.replaceRange(s.main.extend(c.from,c.to)):l&&1==n&&s.ranges.length>1&&(h=function(e,t){for(let i=0;i<e.ranges.length;i++){let{from:n,to:s}=e.ranges[i];if(n<=t&&s>=t)return r.jT.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i?1:0))}return null}(s,a.pos))?h:l?s.addRange(c):r.jT.create([c])}}}(e,t)),i){let n=!e.hasFocus;e.inputState.startMouseSelection(new tA(e,t,i,n)),n&&e.observer.ignore(()=>{C(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let r=e.inputState.mouseSelection;if(r)return r.start(t),!1===r.dragging}return!1};let tL=(e,t,i)=>t>=i.top&&t<=i.bottom&&e>=i.left&&e<=i.right;function tN(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:function(e,t,i,n){let r=eg.find(e.docView,t);if(!r)return 1;let s=t-r.posAtStart;if(0==s)return 1;if(s==r.length)return -1;let o=r.coordsAt(s,-1);if(o&&tL(i,n,o))return -1;let l=r.coordsAt(s,1);return l&&tL(i,n,l)?1:o&&o.bottom>=n?-1:1}(e,i,t.clientX,t.clientY)}}let tI=Y.ie&&Y.ie_version<=11,tB=null,tH=0,tV=0;function tF(e){if(!tI)return e.detail;let t=tB,i=tV;return tB=e,tV=Date.now(),tH=!t||i>Date.now()-400&&2>Math.abs(t.clientX-e.clientX)&&2>Math.abs(t.clientY-e.clientY)?(tH+1)%3:1}function tW(e,t,i,n){let r;if(!(i=tR(e.state,eW,i)))return;let s=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=e.inputState,l=n&&o&&((r=e.state.facet(eN)).length?r[0](t):Y.mac?!t.altKey:!t.ctrlKey)?{from:o.from,to:o.to}:null,a={from:s,insert:i},h=e.state.changes(l?[l,a]:a);e.focus(),e.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:l?"move.drop":"input.drop"}),e.inputState.draggedContent=null}tE.dragstart=(e,t)=>{let{selection:{main:i}}=e.state;if(t.target.draggable){let n=e.docView.nearest(t.target);if(n&&n.isWidget){let e=n.posAtStart,t=e+n.length;(e>=i.to||t<=i.from)&&(i=r.jT.range(e,t))}}let{inputState:n}=e;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=i,t.dataTransfer&&(t.dataTransfer.setData("Text",tR(e.state,ez,e.state.sliceDoc(i.from,i.to))),t.dataTransfer.effectAllowed="copyMove"),!1},tE.dragend=e=>(e.inputState.draggedContent=null,!1),tE.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let i=t.dataTransfer.files;if(i&&i.length){let n=Array(i.length),r=0,s=()=>{++r==i.length&&tW(e,t,n.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<i.length;e++){let t=new FileReader;t.onerror=s,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(n[e]=t.result),s()},t.readAsText(i[e])}return!0}{let i=t.dataTransfer.getData("Text");if(i)return tW(e,t,i,!0),!0}return!1},tE.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let i=tP?null:t.clipboardData;return i?(t_(e,i.getData("text/plain")||i.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{e.focus(),i.remove(),t_(e,i.value)},50)}(e),!1)};let tz=null;tE.copy=tE.cut=(e,t)=>{let{text:i,ranges:n,linewise:r}=function(e){let t=[],i=[],n=!1;for(let n of e.selection.ranges)n.empty||(t.push(e.sliceDoc(n.from,n.to)),i.push(n));if(!t.length){let r=-1;for(let{from:n}of e.selection.ranges){let s=e.doc.lineAt(n);s.number>r&&(t.push(s.text),i.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),r=s.number}n=!0}return{text:tR(e,ez,t.join(e.lineBreak)),ranges:i,linewise:n}}(e.state);if(!i&&!r)return!1;tz=r?i:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let s=tP?null:t.clipboardData;return s?(s.clearData(),s.setData("text/plain",i),!0):(!function(e,t){let i=e.dom.parentNode;if(!i)return;let n=i.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout(()=>{n.remove(),e.focus()},50)}(e,i),!1)};let t$=r.q6.define();function tq(e,t){let i=[];for(let n of e.facet(eF)){let r=n(e,t);r&&i.push(r)}return i?e.update({effects:i,annotations:t$.of(!0)}):null}function tU(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let i=tq(e.state,t);i?e.dispatch(i):e.update([])}},10)}tD.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),tU(e)},tD.blur=e=>{e.observer.clearSelectionRange(),tU(e)},tD.compositionstart=tD.compositionupdate=e=>{!e.observer.editContext&&(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},tD.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,Y.chrome&&Y.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},tD.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},tE.beforeinput=(e,t)=>{var i,n;let r;if("insertReplacementText"==t.inputType&&e.observer.editContext){let n=null===(i=t.dataTransfer)||void 0===i?void 0:i.getData("text/plain"),r=t.getTargetRanges();if(n&&r.length){let t=r[0],i=e.posAtDOM(t.startContainer,t.startOffset),s=e.posAtDOM(t.endContainer,t.endOffset);return tx(e,{from:i,to:s,insert:e.state.toText(n)},null),!0}}if(Y.chrome&&Y.android&&(r=tM.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout(()=>{var i;((null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return Y.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),Y.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>tD.compositionend(e,t),20),!1};let tK=new Set,tG=["pre-wrap","normal","pre-line","break-spaces"],tX=!1;class tY{constructor(e){this.lineWrapping=e,this.doc=r.xv.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return tG.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(10*n)]||(t=!0,this.heightSamples[Math.floor(10*n)]=!0)}return t}refresh(e,t,i,n,r,s){let o=tG.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=r,l){this.heightSamples={};for(let e=0;e<s.length;e++){let t=s[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return l}}class tJ{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class tQ{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this._content=r}get type(){return"number"==typeof this._content?ea.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ed?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new tQ(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var tZ=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(tZ||(tZ={}));class t0{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>.001&&(tX=!0),this.height=e)}replace(e,t,i){return t0.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this,s=i.doc;for(let o=n.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:h,toB:c}=n[o],u=r.lineAt(l,tZ.ByPosNoHeight,i.setDoc(t),0,0),d=u.to>=a?u:r.lineAt(a,tZ.ByPosNoHeight,i,0,0);for(c+=d.to-a,a=d.to;o>0&&u.from<=n[o-1].toA;)l=n[o-1].fromA,h=n[o-1].fromB,o--,l<u.from&&(u=r.lineAt(l,tZ.ByPosNoHeight,i,0,0));h+=u.from-l,l=u.from;let f=t9.build(i.setDoc(s),e,h,c);r=t1(r,r.replace(l,a,f))}return r.updateHeight(i,0)}static empty(){return new t3(0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i){if(n>2*r){let r=e[t-1];r.break?e.splice(--t,1,r.left,null,r.right):e.splice(--t,1,r.left,r.right),i+=1+r.break,n-=r.size}else if(r>2*n){let t=e[i];t.break?e.splice(i,1,t.left,null,t.right):e.splice(i,1,t.left,t.right),i+=2+t.break,r-=t.size}else break}else if(n<r){let i=e[t++];i&&(n+=i.size)}else{let t=e[--i];t&&(r+=t.size)}let s=0;return null==e[t-1]?(s=1,t--):null==e[t]&&(s=1,i++),new t4(t0.of(e.slice(0,t)),s,t0.of(e.slice(i)))}}function t1(e,t){return e==t?e:(e.constructor!=t.constructor&&(tX=!0),t)}t0.prototype.size=1;class t2 extends t0{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new tQ(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,s){e<=r+this.length&&t>=r&&s(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class t3 extends t2{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new tQ(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return 1==i.length&&(n instanceof t3||n instanceof t8&&4&n.flags)&&10>Math.abs(this.length-n.length)?(n instanceof t8?n=new t3(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):t0.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class t8 extends t0{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,r=n-i+1,s,o=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*r);s=t/r,this.length>r+1&&(o=(this.height-t)/(this.length-r-1))}else s=this.height/r;return{firstLine:i,lastLine:n,perLine:s,perChar:o}}blockAt(e,t,i,n){let{firstLine:r,lastLine:s,perLine:o,perChar:l}=this.heightMetrics(t,n);if(t.lineWrapping){let r=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),s=t.doc.lineAt(r),a=o+s.length*l,h=Math.max(i,e-a/2);return new tQ(s.from,s.length,h,a,0)}{let n=Math.max(0,Math.min(s-r,Math.floor((e-i)/o))),{from:l,length:a}=t.doc.line(r+n);return new tQ(l,a,i+o*n,o,0)}}lineAt(e,t,i,n,r){if(t==tZ.ByHeight)return this.blockAt(e,i,n,r);if(t==tZ.ByPosNoHeight){let{from:t,to:n}=i.doc.lineAt(e);return new tQ(t,n-t,0,0,0)}let{firstLine:s,perLine:o,perChar:l}=this.heightMetrics(i,r),a=i.doc.lineAt(e),h=o+a.length*l,c=a.number-s,u=n+o*c+l*(a.from-r-c);return new tQ(a.from,a.length,Math.max(n,Math.min(u,n+this.height-h)),h,0)}forEachLine(e,t,i,n,r,s){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r);for(let h=e,c=n;h<=t;){let t=i.doc.lineAt(h);if(h==e){let i=t.number-o;c+=l*i+a*(e-r-i)}let n=l+a*t.length;s(new tQ(t.from,t.length,c,n,0)),c+=n,h=t.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let e=i[i.length-1];e instanceof t8?i[i.length-1]=new t8(e.length+n):i.push(null,new t8(n-1))}if(e>0){let t=i[0];t instanceof t8?i[0]=new t8(e+t.length):i.unshift(new t8(e-1),null)}return t0.of(i)}decomposeLeft(e,t){t.push(new t8(e-1),null)}decomposeRight(e,t){t.push(null,new t8(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let i=[],s=Math.max(t,n.from),o=-1;for(n.from>t&&i.push(new t8(n.from-t-1).updateHeight(e,t));s<=r&&n.more;){let t=e.doc.lineAt(s).length;i.length&&i.push(null);let r=n.heights[n.index++];-1==o?o=r:Math.abs(r-o)>=.001&&(o=-2);let l=new t3(t,r);l.outdated=!1,i.push(l),s+=t+1}s<=r&&i.push(null,new t8(r-s).updateHeight(e,s));let l=t0.of(i);return(o<0||Math.abs(l.height-this.height)>=.001||Math.abs(o-this.heightMetrics(e,t).perLine)>=.001)&&(tX=!0),t1(this,l)}return(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class t4 extends t0{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let s=n+this.left.height,o=r+this.left.length+this.break,l=t==tZ.ByHeight?e<s:e<o,a=l?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,s,o);if(this.break||(l?a.to<o:a.from>o))return a;let h=t==tZ.ByPosNoHeight?tZ.ByPosNoHeight:tZ.ByPos;return l?a.join(this.right.lineAt(o,h,i,s,o)):this.left.lineAt(o,h,i,n,r).join(a)}forEachLine(e,t,i,n,r,s){let o=n+this.left.height,l=r+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,n,r,s),t>=l&&this.right.forEachLine(e,t,i,o,l,s);else{let a=this.lineAt(l,tZ.ByPos,i,n,r);e<a.from&&this.left.forEachLine(e,a.from-1,i,n,r,s),a.to>=e&&a.from<=t&&s(a),t>a.to&&this.right.forEachLine(a.to+1,t,i,o,l,s)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let s=r.length;for(let e of i)r.push(e);if(e>0&&t5(r,s-1),t<this.length){let e=r.length;this.decomposeRight(t,r),t5(r,e)}return t0.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++i&&t.push(null),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?t0.of(this.break?[e,null,t]:[e,t]):(this.left=t1(this.left,e),this.right=t1(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:s}=this,o=t+r.length+this.break,l=null;return(n&&n.from<=t+r.length&&n.more?l=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=o+s.length&&n.more?l=s=s.updateHeight(e,o,i,n):s.updateHeight(e,o,i),l)?this.balanced(r,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function t5(e,t){let i,n;null==e[t]&&(i=e[t-1])instanceof t8&&(n=e[t+1])instanceof t8&&e.splice(t-1,3,new t8(i.length+1+n.length))}class t9{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof t3?i.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new t3(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new t2(s,n,i)):(s||r||n>=5)&&this.addLineDeco(n,r,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new t3(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new t8(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof t3)return e;let t=new t3(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof t3||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new t3(0,-1));let i=e;for(let e of this.nodes)e instanceof t3&&e.updateHeight(this.oracle,i),i+=e?e.length:1;return this.nodes}static build(e,t,i,n){let s=new t9(i,e);return r.Xs.spans(t,i,n,s,0),s.finish(i)}}class t7{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&ep(e,t,this.changes,5)}}class t6{constructor(e,t,i,n){this.from=e,this.to=t,this.size=i,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,t){return eh.replace({widget:new ie(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class ie extends el{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class it{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=io,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ex.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(e3).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new tY(t),this.stateDeco=e.facet(e8).filter(e=>"function"!=typeof e),this.heightMap=t0.empty().applyChanges(this.stateDeco,r.xv.empty,this.heightOracle.setDoc(e.doc),[new ti(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=eh.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:e,to:t})=>n>=e&&n<=t)){let{from:t,to:i}=this.lineBlockAt(n);e.push(new ii(t,i))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?io:new il(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ia(e,this.scaler))})}update(e,t=null){var i,n;let s;this.state=e.state;let o=this.stateDeco;this.stateDeco=this.state.facet(e8).filter(e=>"function"!=typeof e);let l=e.changedRanges,a=ti.extendWithRanges(l,(i=this.stateDeco,n=e?e.changes:r.as.empty(this.state.doc.length),s=new t7,r.Xs.compare(o,i,n,s,0),s.changes)),h=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);tX=!1,this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),(this.heightMap.height!=h||tX)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let u=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let d=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(d||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(eq)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection="rtl"==i.direction?ex.RTL:ex.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,c=0;if(l.width&&l.height){let{scaleX:e,scaleY:i}=S(t,l);(e>.005&&Math.abs(this.scaleX-e)>.005||i>.005&&Math.abs(this.scaleY-i)>.005)&&(this.scaleX=e,this.scaleY=i,h|=8,o=a=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,d=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=d)&&(this.paddingTop=u,this.paddingBottom=d,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=E(e.scrollDOM);let p=(this.printing?function(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}:function(e,t){let i=e.getBoundingClientRect(),n=e.ownerDocument,r=n.defaultView||window,s=Math.max(0,i.left),o=Math.min(r.innerWidth,i.right),l=Math.max(0,i.top),a=Math.min(r.innerHeight,i.bottom);for(let t=e.parentNode;t&&t!=n.body;)if(1==t.nodeType){let i=t,n=window.getComputedStyle(i);if((i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)&&"visible"!=n.overflow){let n=i.getBoundingClientRect();s=Math.max(s,n.left),o=Math.min(o,n.right),l=Math.max(l,n.top),a=Math.min(t==e.parentNode?r.innerHeight:a,n.bottom)}t="absolute"==n.position||"fixed"==n.position?i.offsetParent:i.parentNode}else if(11==t.nodeType)t=t.host;else break;return{left:s-i.left,right:Math.max(s,o)-i.left,top:l-(i.top+t),bottom:Math.max(l,a)-(i.top+t)}})(t,this.paddingTop),g=p.top-this.pixelViewport.top,m=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=l.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(t)&&(o=!0),o||n.lineWrapping&&Math.abs(v-this.contentDOMWidth)>n.charWidth){let{lineHeight:i,charWidth:r,textHeight:l}=e.docView.measureTextSize();(o=i>0&&n.refresh(s,i,r,l,v/r,t))&&(e.docView.minWidth=0,h|=8)}for(let i of(g>0&&m>0?c=Math.max(g,m):g<0&&m<0&&(c=Math.min(g,m)),tX=!1,this.viewports)){let s=i.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(i);this.heightMap=(o?t0.empty().applyChanges(this.stateDeco,r.xv.empty,this.heightOracle,[new ti(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new tJ(i.from,s))}tX&&(h|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(2&h&&(h|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),h|=this.updateForViewport()),(2&h||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:s,visibleBottom:o}=this,l=new ii(n.lineAt(s-1e3*i,tZ.ByHeight,r,0,0).from,n.lineAt(o+(1-i)*1e3,tZ.ByHeight,r,0,0).to);if(t){let{head:e}=t.range;if(e<l.from||e>l.to){let i=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=n.lineAt(e,tZ.ByPos,r,0,0),o;o="center"==t.y?(s.top+s.bottom)/2-i/2:"start"==t.y||"nearest"==t.y&&e<l.from?s.top:s.bottom-i,l=new ii(n.lineAt(o-500,tZ.ByHeight,r,0,0).from,n.lineAt(o+i+500,tZ.ByHeight,r,0,0).to)}}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new ii(this.heightMap.lineAt(i,tZ.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,tZ.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,tZ.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,tZ.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:o}=this;return(0==e||n<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=o+Math.max(10,Math.min(i,250)))&&n>s-2e3&&r<o+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new t6(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,s=n>>1,o=n<<1;if(this.defaultTextDirection!=ex.LTR&&!i)return[];let l=[],a=(n,o,h,c)=>{if(o-n<s)return;let u=this.state.selection.main,d=[u.from];for(let e of(u.empty||d.push(u.to),d))if(e>n&&e<o){a(n,e-10,h,c),a(e+10,o,h,c);return}let f=function(e,t){for(let i of e)if(t(i))return i}(e,e=>e.from>=h.from&&e.to<=h.to&&Math.abs(e.from-n)<s&&Math.abs(e.to-o)<s&&!d.some(t=>e.from<t&&e.to>t));if(!f){if(o<h.to&&t&&i&&t.visibleRanges.some(e=>e.from<=o&&e.to>=o)){let e=t.moveToLineBoundary(r.jT.cursor(o),!1,!0).head;e>n&&(o=e)}let e=this.gapSize(h,n,o,c),s=i||e<2e6?e:2e6;f=new t6(n,o,e,s)}l.push(f)},h=t=>{var s,l,h;let c,u,d,f,p;if(t.length<o||t.type!=ea.Text)return;let g=(s=t.from,l=t.to,h=this.stateDeco,d=[],f=s,p=0,r.Xs.spans(h,s,l,{span(){},point(e,t){e>f&&(d.push({from:f,to:e}),p+=e-f),f=t}},20),f<l&&(d.push({from:f,to:l}),p+=l-f),{total:p,ranges:d});if(g.total<o)return;let m=this.scrollTarget?this.scrollTarget.range.head:null;if(i){let e,i,r=n/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=m){let n=is(g,m),s=((this.visibleBottom-this.visibleTop)/2+r)/t.height;e=n-s,i=n+s}else e=(this.visibleTop-t.top-r)/t.height,i=(this.visibleBottom-t.top+r)/t.height;c=ir(g,e),u=ir(g,i)}else{let i,r,s=g.total*this.heightOracle.charWidth,o=n*this.heightOracle.charWidth,l=0;if(s>2e6)for(let i of e)i.from>=t.from&&i.from<t.to&&i.size!=i.displaySize&&i.from*this.heightOracle.charWidth+l<this.pixelViewport.left&&(l=i.size-i.displaySize);let a=this.pixelViewport.left+l,h=this.pixelViewport.right+l;if(null!=m){let e=is(g,m),t=((h-a)/2+o)/s;i=e-t,r=e+t}else i=(a-o)/s,r=(h+o)/s;c=ir(g,i),u=ir(g,r)}c>t.from&&a(t.from,c,t,g),u<t.to&&a(u,t.to,t,g)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(h):h(e);return l}gapSize(e,t,i,n){let r=is(n,i)-is(n,t);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){t6.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=eh.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];r.Xs.spans(e,this.viewport.from,this.viewport.to,{span(e,i){t.push({from:e,to:i})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((e,i)=>e.from!=t[i].from||e.to!=t[i].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||ia(this.heightMap.lineAt(e,tZ.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||ia(this.heightMap.lineAt(this.scaler.fromDOM(e),tZ.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return ia(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ii{constructor(e,t){this.from=e,this.to=t}}function ir({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let n=Math.floor(e*i);for(let e=0;;e++){let{from:i,to:r}=t[e],s=r-i;if(n<=s)return i+n;n-=s}}function is(e,t){let i=0;for(let{from:n,to:r}of e.ranges){if(t<=r){i+=t-n;break}i+=r-n}return i/e.total}let io={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class il{constructor(e,t,i){let n=0,r=0,s=0;for(let o of(this.viewports=i.map(({from:i,to:r})=>{let s=t.lineAt(i,tZ.ByPos,e,0,0).top,o=t.lineAt(r,tZ.ByPos,e,0,0).bottom;return n+=o-s,{from:i,to:r,top:s,bottom:o,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n),this.viewports))o.domTop=s+(o.top-r)*this.scale,s=o.domBottom=o.domTop+(o.bottom-o.top),r=o.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof il&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to)}}function ia(e,t){if(1==t.scale)return e;let i=t.toDOM(e.top),n=t.toDOM(e.bottom);return new tQ(e.from,e.length,i,n-i,Array.isArray(e._content)?e._content.map(e=>ia(e,t)):e._content)}let ih=r.r$.define({combine:e=>e.join(" ")}),ic=r.r$.define({combine:e=>e.indexOf(!0)>-1}),iu=s.V.newName(),id=s.V.newName(),ip=s.V.newName(),ig={"&light":"."+id,"&dark":"."+ip};function im(e,t,i){return new s.V(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!i||!i[t])throw RangeError(`Unsupported selector: ${t}`);return i[t]}):e+" "+t})}let iy=im("."+iu,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ig),iv={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},iw=Y.ie&&Y.ie_version<=11;class ib{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new k,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(Y.ie&&Y.ie_version<=11||Y.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&!1!==e.constructor.EDIT_CONTEXT&&!(Y.chrome&&Y.chrome_version<126)&&(this.editContext=new ik(e),e.state.facet(eJ)&&(e.contentDOM.editContext=this.editContext.editContext)),iw&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){for(let t of(this.gapIntersection.disconnect(),e))this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(eJ)?i.root.activeElement!=this.dom:!p(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Y.ie&&Y.ie_version<=11||Y.android&&Y.chrome)&&!i.state.selection.main.empty&&n.focusNode&&m(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=d(e.root);if(!t)return!1;let i=Y.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return iS(e,i)}let i=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),i=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),i?iS(e,i):null}(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let n=p(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let i=t.focusNode,n=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=n)return!1;for(n=Math.min(n,b(i));;)if(n){if(1!=i.nodeType)return!1;let e=i.childNodes[n-1];"false"==e.contentEditable?n--:n=b(i=e)}else{if(i==e)return!0;n=y(i),i=i.parentNode}}(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(11==i.nodeType)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,iv),iw&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),iw&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&T(this.dom,e.key,e.keyCode))})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(i=this.delayedAndroidKey)||void 0===i?void 0:i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let r of e){let e=this.readMutation(r);e&&(e.typeOver&&(n=!0),-1==t?{from:t,to:i}=e:(t=Math.min(e.from,t),i=Math.max(e.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&p(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new tw(this.view,e,t,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=tb(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let i=ix(t,e.previousSibling||e.target.previousSibling,-1),n=ix(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(eJ)!=e.state.facet(eJ)&&(e.view.contentDOM.editContext=e.state.facet(eJ)?this.editContext.editContext:null))}destroy(){var e,t,i;for(let n of(this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(i=this.resizeScroll)||void 0===i||i.disconnect(),this.scrollTargets))n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ix(e,t,i){for(;t;){let n=j.get(t);if(n&&n.parent==e)return n;let r=t.parentNode;t=r!=e.dom?r:i>0?t.nextSibling:t.previousSibling}return null}function iS(e,t){let i=t.startContainer,n=t.startOffset,r=t.endContainer,s=t.endOffset,o=e.docView.domAtPos(e.state.selection.main.anchor);return m(o.node,o.offset,r,s)&&([i,n,r,s]=[r,s,i,n]),{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:s}}class ik{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});for(let i in this.handlers.textupdate=t=>{let{anchor:i}=e.state.selection.main,n={from:this.toEditorPos(t.updateRangeStart),to:this.toEditorPos(t.updateRangeEnd),insert:r.xv.of(t.text.split("\n"))};n.from==this.from&&i<this.from?n.from=i:n.to==this.to&&i>this.to&&(n.to=i),(n.from!=n.to||n.insert.length)&&(this.pendingContextChange=n,e.state.readOnly||tx(e,n,r.jT.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let t=this.toEditorPos(i.rangeStart),s=this.toEditorPos(i.rangeEnd);t<s;t++){let i=e.coordsForChar(t);r=i&&new DOMRect(i.left,i.top,i.right-i.left,i.bottom-i.top)||r||new DOMRect,n.push(r)}t.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=t=>{let i=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,n=e.underlineThickness;if("None"!=t&&"None"!=n){let r=`text-decoration: underline ${"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${"Thin"==n?1:2}px`;i.push(eh.mark({attributes:{style:r}}).range(this.toEditorPos(e.rangeStart),this.toEditorPos(e.rangeEnd)))}}e.dispatch({effects:eX.of(eh.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null},this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=d(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((r,s,o,l,a)=>{if(i)return;let h=a.length-(s-r);if(n&&s>=n.to){if(n.from==r&&n.to==s&&n.insert.eq(a)){n=this.pendingContextChange=null,t+=h,this.to+=h;return}n=null,this.revertPending(e.state)}if(r+=t,(s+=t)<=this.from)this.from+=h,this.to+=h;else if(r<this.to){if(r<this.from||s>this.to||this.to-this.from+a.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(s),a.toString()),this.to+=h}t+=h}),n&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class iM{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;for(let t of(this.dispatchTransactions=e.dispatchTransactions||i&&(e=>e.forEach(e=>i(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new it(e.state||r.yy.create(e)),e.scrollTo&&e.scrollTo.is(eG)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(eZ).map(e=>new e1(e)),this.plugins))t.update(this);this.observer=new ib(this),this.inputState=new tS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new tr(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=1==e.length&&e[0]instanceof r.YW?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let t of e){if(t.startState!=s)throw RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=t.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(e=>e.annotation(t$))?(this.inputState.notifiedFocused=o,l=1):o==this.inputState.notifiedFocused||(this.inputState.notifiedFocused=o,(a=tq(s,o))||(l=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),((c=this.observer.readChange())&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(r.yy.phrases)!=this.state.facet(r.yy.phrases))return this.setState(s);n=tn.create(this,s,e),n.flags|=l;let u=this.viewState.scrollTarget;try{for(let t of(this.updateState=2,e)){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new eK(e.empty?e:r.jT.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(eG)&&(u=e.value.clip(this.state))}this.viewState.update(n,u),this.bidiCache=iT.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(tt)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(ih)!=n.state.facet(ih)&&(this.viewState.mustMeasureContent=!0),(t||i||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let e of this.state.facet(eH))try{e(n)}catch(e){eY(this.state,e,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!tb(this,c)&&h.force&&T(this.contentDOM,h.key,h.keyCode)})}setState(e){if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);for(let t of(this.viewState=new it(e),this.plugins=e.facet(eZ).map(e=>new e1(e)),this.pluginMap.clear(),this.plugins))t.update(this);this.docView.destroy(),this.docView=new tr(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(eZ),i=e.state.facet(eZ);if(t!=i){let n=[];for(let r of i){let i=t.indexOf(r);if(i<0)n.push(new e1(r));else{let t=this.plugins[i];t.mustUpdate=e,n.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){eY(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:s}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(s<0){if(E(i))r=-1,s=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(n);r=e.from,s=e.top}}this.updateState=1;let o=this.viewState.measure(this);if(!o&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let l=[];4&o||([this.measureRequests,l]=[l,this.measureRequests]);let a=l.map(e=>{try{return e.read(this)}catch(e){return eY(this.state,e),iO}}),h=tn.create(this,this.state,[]),c=!1;h.flags|=o,t?t.flags|=o:t=h,this.updateState=2,!h.empty&&(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),(c=this.docView.update(h))&&this.docViewUpdate());for(let e=0;e<l.length;e++)if(a[e]!=iO)try{let t=l[e];t.write&&t.write(a[e],this)}catch(e){eY(this.state,e)}if(c&&this.docView.updateSelection(!0),!h.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}{let e=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-s;if(e>1||e<-1){n+=e,i.scrollTop=n/this.scaleY,s=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(eH))e(t)}get themeClasses(){return iu+" "+(this.state.facet(ic)?ip:id)+" "+this.state.facet(ih)}updateAttrs(){let e=iA(this,e2,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(eJ)?"true":"false",class:"cm-content",style:`${Y.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),iA(this,e3,t);let i=this.observer.ignore(()=>{let i=eo(this.contentDOM,this.contentAttrs,t),n=eo(this.dom,this.editorAttrs,e);return i||n});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let e of i.effects)e.is(iM.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(tt);let e=this.state.facet(iM.cspNonce);s.V.mount(this.root,this.styleModules.concat(iy).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e&&!(this.measureRequests.indexOf(e)>-1)){if(null!=e.key){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return tm(this,e,tp(this,e,t,i))}moveByGroup(e,t){return tm(this,e,tp(this,e,t,t=>{var i;let n,s;return i=e.head,s=(n=this.state.charCategorizer(i))(t),e=>{let t=n(e);return s==r.D0.Space&&(s=t),s==t}}))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),s=i[t?i.length-1:0];return r.jT.cursor(s.side(t,n)+e.from,s.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return function(e,t,i,n){let s=tf(e,t.head),o=n&&s.type==ea.Text&&(e.lineWrapping||s.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>s.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),n=e.textDirectionAt(s.from),l=e.posAtCoords({x:i==(n==ex.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=l)return r.jT.cursor(l,i?-1:1)}return r.jT.cursor(i?s.to:s.from,i?-1:1)}(this,e,t,i)}moveVertically(e,t,i){return tm(this,e,function(e,t,i,n){let s=t.head,o=i?1:-1;if(s==(i?e.state.doc.length:0))return r.jT.cursor(s,t.assoc);let l=t.goalColumn,a,h=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(s,t.assoc||-1),u=e.documentTop;if(c)null==l&&(l=c.left-h.left),a=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(s);null==l&&(l=Math.min(h.right-h.left,e.defaultCharacterWidth*(s-t.from))),a=(o<0?t.top:t.bottom)+u}let d=h.left+l,f=null!=n?n:e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let i=a+(f+t)*o,n=tu(e,{x:d,y:i},!1,o);if(i<h.top||i>h.bottom||(o<0?n<s:n>s)){let t=e.docView.coordsForChar(n),s=!t||i<t.top?-1:1;return r.jT.cursor(n,s,void 0,l)}}}(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),tu(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n);return x(i,r[eP.find(r,e-n.from,-1,t)].dir==ex.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(e$)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>iC)return e_(e.length);let t=this.textDirectionAt(e.from),i;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t&&(n.fresh||function e(t,i){if(t.length!=i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],s=i[n];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!e(r.inner,s.inner))return!1}return!0}(n.isolates,i=e7(this,e))))return n.order;i||(i=e7(this,e));let n=function(e,t,i){if(!e)return[new eP(0,0,t==ek?1:0)];if(t==eS&&!i.length&&!eD.test(e))return e_(e.length);if(i.length)for(;e.length>eR.length;)eR[eR.length]=256;let n=[],r=t==eS?0:1;return function e(t,i,n,r,s,o,l){let a=i%2?2:1;(function(e,t,i,n,r){for(let s=0;s<=n.length;s++){let o=s?n[s-1].to:t,l=s<n.length?n[s].from:i,a=s?256:r;for(let t=o,i=a,n=a;t<l;t++){let r=eE(e.charCodeAt(t));512==r?r=i:8==r&&4==n&&(r=16),eR[t]=4==r?2:r,7&r&&(n=r),i=r}for(let e=o,t=a,n=a;e<l;e++){let r=eR[e];if(128==r)e<l-1&&t==eR[e+1]&&24&t?r=eR[e]=t:eR[e]=256;else if(64==r){let r=e+1;for(;r<l&&64==eR[r];)r++;let s=e&&8==t||r<i&&8==eR[r]?1==n?1:8:256;for(let t=e;t<r;t++)eR[t]=s;e=r-1}else 8==r&&1==n&&(eR[e]=1);t=r,7&r&&(n=r)}}})(t,s,o,r,a),function(e,t,i,n,r){let s=1==r?2:1;for(let o=0,l=0,a=0;o<=n.length;o++){let h=o?n[o-1].to:t,c=o<n.length?n[o].from:i;for(let t=h,i,n,o;t<c;t++)if(n=eT[i=e.charCodeAt(t)]){if(n<0){for(let e=l-3;e>=0;e-=3)if(eA[e+1]==-n){let i=eA[e+2],n=2&i?r:4&i?1&i?s:r:0;n&&(eR[t]=eR[eA[e]]=n),l=e;break}}else if(189==eA.length)break;else eA[l++]=t,eA[l++]=i,eA[l++]=a}else if(2==(o=eR[t])||1==o){let e=o==r;a=e?0:1;for(let t=l-3;t>=0;t-=3){let i=eA[t+2];if(2&i)break;if(e)eA[t+2]|=2;else{if(4&i)break;eA[t+2]|=4}}}}}(t,s,o,r,a),function(e,t,i,n){for(let r=0,s=n;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:t;for(let a=o;a<l;){let o=eR[a];if(256==o){let o=a+1;for(;;)if(o==l){if(r==i.length)break;o=i[r++].to,l=r<i.length?i[r].from:t}else if(256==eR[o])o++;else break;let h=1==s,c=h==((o<t?eR[o]:n)==1)?h?1:2:n;for(let t=o,n=r,s=n?i[n-1].to:e;t>a;)t==s&&(t=i[--n].from,s=n?i[n-1].to:e),eR[--t]=c;a=o}else s=o,a++}}}(s,o,r,a),function t(i,n,r,s,o,l,a){let h=s%2?2:1;if(s%2==o%2)for(let c=n,u=0;c<r;){let n=!0,d=!1;if(u==l.length||c<l[u].from){let e=eR[c];e!=h&&(n=!1,d=16==e)}let f=n||1!=h?null:[],p=n?s:s+1,g=c;t:for(;;)if(u<l.length&&g==l[u].from){if(d)break;let t=l[u];if(!n)for(let e=t.to,i=u+1;;){if(e==r)break t;if(i<l.length&&l[i].from==e)e=l[i++].to;else if(eR[e]==h)break t;else break}u++,f?f.push(t):(t.from>c&&a.push(new eP(c,t.from,p)),e(i,t.direction==eS!=!(p%2)?s+1:s,o,t.inner,t.from,t.to,a),c=t.to),g=t.to}else if(g==r||(n?eR[g]!=h:eR[g]==h))break;else g++;f?t(i,c,g,s+1,o,f,a):c<g&&a.push(new eP(c,g,p)),c=g}else for(let c=r,u=l.length;c>n;){let r=!0,d=!1;if(!u||c>l[u-1].to){let e=eR[c-1];e!=h&&(r=!1,d=16==e)}let f=r||1!=h?null:[],p=r?s:s+1,g=c;t:for(;;)if(u&&g==l[u-1].to){if(d)break;let t=l[--u];if(!r)for(let e=t.from,i=u;;){if(e==n)break t;if(i&&l[i-1].to==e)e=l[--i].from;else if(eR[e-1]==h)break t;else break}f?f.push(t):(t.to<c&&a.push(new eP(t.to,c,p)),e(i,t.direction==eS!=!(p%2)?s+1:s,o,t.inner,t.from,t.to,a),c=t.from),g=t.from}else if(g==n||(r?eR[g-1]!=h:eR[g-1]==h))break;else g--;f?t(i,g,c,s+1,o,f,a):g<c&&a.push(new eP(g,c,p)),c=g}}(t,s,o,i,n,r,l)}(e,r,r,i,0,e.length,n),n}(e.text,t,i);return this.bidiCache.push(new iT(e.from,e.to,t,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Y.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{C(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of(this.root.activeElement==this.contentDOM&&this.contentDOM.blur(),this.plugins))e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return eG.of(new eK("number"==typeof e?r.jT.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return eG.of(new eK(r.jT.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return e0.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return e0.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=s.V.newName(),n=[ih.of(i),tt.of(im(`.${i}`,e))];return t&&t.dark&&n.push(ic.of(!0)),n}static baseTheme(e){return r.Wl.lowest(tt.of(im("."+iu,e,ig)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&j.get(i)||j.get(e);return(null===(t=null==n?void 0:n.rootView)||void 0===t?void 0:t.view)||null}}iM.styleModule=tt,iM.inputHandler=eV,iM.clipboardInputFilter=eW,iM.clipboardOutputFilter=ez,iM.scrollHandler=eU,iM.focusChangeEffect=eF,iM.perLineTextDirection=e$,iM.exceptionSink=eB,iM.updateListener=eH,iM.editable=eJ,iM.mouseSelectionStyle=eI,iM.dragMovesSelection=eN,iM.clickAddsSelectionRange=eL,iM.decorations=e8,iM.outerDecorations=e4,iM.atomicRanges=e5,iM.bidiIsolatedRanges=e9,iM.scrollMargins=e6,iM.darkTheme=ic,iM.cspNonce=r.r$.define({combine:e=>e.length?e[0]:""}),iM.contentAttributes=e3,iM.editorAttributes=e2,iM.lineWrapping=iM.contentAttributes.of({class:"cm-lineWrapping"}),iM.announce=r.Py.define();let iC=4096,iO={};class iT{constructor(e,t,i,n,r,s){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=r,this.order=s}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:ex.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let s=e[r];s.dir!=n||t.touchesRange(s.from,s.to)||i.push(new iT(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function iA(e,t,i){for(let n=e.state.facet(t),r=n.length-1;r>=0;r--){let t=n[r],s="function"==typeof t?t(e):t;s&&en(s,i)}return i}let iE=Y.mac?"mac":Y.windows?"win":Y.linux?"linux":"key";function iD(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}let iP=r.Wl.default(iM.domEventHandlers({keydown:(e,t)=>iB(ij(t.state),e,t,"editor")})),iR=r.r$.define({enables:iP}),i_=new WeakMap;function ij(e){let t=e.facet(iR),i=i_.get(t);return i||i_.set(t,i=function(e,t=iE){let i=Object.create(null),n=Object.create(null),r=(e,t)=>{let i=n[e];if(null==i)n[e]=t;else if(i!=t)throw Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},s=(e,n,s,o,l)=>{var a,h;let c=i[e]||(i[e]=Object.create(null)),u=n.split(/ (?!$)/).map(e=>(function(e,t){let i,n,r,s;let o=e.split(/-(?!$)/),l=o[o.length-1];"Space"==l&&(l=" ");for(let e=0;e<o.length-1;++e){let l=o[e];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))"mac"==t?s=!0:n=!0;else throw Error("Unrecognized modifier name: "+l)}return i&&(l="Alt-"+l),n&&(l="Ctrl-"+l),s&&(l="Meta-"+l),r&&(l="Shift-"+l),l})(e,t));for(let t=1;t<u.length;t++){let i=u.slice(0,t).join(" ");r(i,!0),c[i]||(c[i]={preventDefault:!0,stopPropagation:!1,run:[t=>{let n=iN={view:t,prefix:i,scope:e};return setTimeout(()=>{iN==n&&(iN=null)},4e3),!0}]})}let d=u.join(" ");r(d,!1);let f=c[d]||(c[d]={preventDefault:!1,stopPropagation:!1,run:(null===(h=null===(a=c._any)||void 0===a?void 0:a.run)||void 0===h?void 0:h.slice())||[]});s&&f.run.push(s),o&&(f.preventDefault=!0),l&&(f.stopPropagation=!0)};for(let n of e){let e=n.scope?n.scope.split(" "):["editor"];if(n.any)for(let t of e){let e=i[t]||(i[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:r}=n;for(let t in e)e[t].run.push(e=>r(e,iI))}let r=n[t]||n.key;if(r)for(let t of e)s(t,r,n.run,n.preventDefault,n.stopPropagation),n.shift&&s(t,"Shift-"+r,n.shift,n.preventDefault,n.stopPropagation)}return i}(t.reduce((e,t)=>e.concat(t),[]))),i}function iL(e,t,i){return iB(ij(e.state),t,e,i)}let iN=null,iI=null;function iB(e,t,i,n){var s;iI=t;let c=("Esc"==(s=!(a&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||h&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?l:o)[t.keyCode]||t.key||"Unidentified")&&(s="Escape"),"Del"==s&&(s="Delete"),"Left"==s&&(s="ArrowLeft"),"Up"==s&&(s="ArrowUp"),"Right"==s&&(s="ArrowRight"),"Down"==s&&(s="ArrowDown"),s),u=(0,r.gm)(c,0),d=(0,r.nZ)(u)==c.length&&" "!=c,f="",p=!1,g=!1,m=!1;iN&&iN.view==i&&iN.scope==n&&(f=iN.prefix+" ",0>tO.indexOf(t.keyCode)&&(g=!0,iN=null));let y=new Set,v=e=>{if(e){for(let t of e.run)if(!y.has(t)&&(y.add(t),t(i)))return e.stopPropagation&&(m=!0),!0;e.preventDefault&&(e.stopPropagation&&(m=!0),g=!0)}return!1},w=e[n],b,x;return w&&(v(w[f+iD(c,t,!d)])?p=!0:d&&(t.altKey||t.metaKey||t.ctrlKey)&&!(Y.windows&&t.ctrlKey&&t.altKey)&&(b=o[t.keyCode])&&b!=c?v(w[f+iD(b,t,!0)])?p=!0:t.shiftKey&&(x=l[t.keyCode])!=c&&x!=b&&v(w[f+iD(x,t,!1)])&&(p=!0):d&&t.shiftKey&&v(w[f+iD(c,t,!0)])&&(p=!0),!p&&v(w._any)&&(p=!0)),g&&(p=!0),p&&m&&t.stopPropagation(),iI=null,p}class iH{constructor(e,t,i,n,r){this.className=e,this.left=t,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(!i.empty)return function(e,t,i){if(i.to<=e.viewport.from||i.from>=e.viewport.to)return[];let n=Math.max(i.from,e.viewport.from),r=Math.min(i.to,e.viewport.to),s=e.textDirection==ex.LTR,o=e.contentDOM,l=o.getBoundingClientRect(),a=iV(e),h=o.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=l.right-(c?parseInt(c.paddingRight):0),f=tf(e,n),p=tf(e,r),g=f.type==ea.Text?f:null,m=p.type==ea.Text?p:null;if(g&&(e.lineWrapping||f.widgetLineBreaks)&&(g=iF(e,n,1,g)),m&&(e.lineWrapping||p.widgetLineBreaks)&&(m=iF(e,r,-1,m)),g&&m&&g.from==m.from&&g.to==m.to)return v(w(i.from,i.to,g));{let t=g?w(i.from,null,g):b(f,!1),n=m?w(null,i.to,m):b(p,!0),r=[];return(g||f).to<(m||p).from-(g&&m?1:0)||f.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<n.top?r.push(y(u,t.bottom,d,n.top)):t.bottom<n.top&&e.elementAtHeight((t.bottom+n.top)/2).type==ea.Text&&(t.bottom=n.top=(t.bottom+n.top)/2),v(t).concat(r).concat(v(n))}function y(e,i,n,r){return new iH(t,e-a.left,i-a.top-.01,n-e,r-i+.01)}function v({top:e,bottom:t,horizontal:i}){let n=[];for(let r=0;r<i.length;r+=2)n.push(y(i[r],e,i[r+1],t));return n}function w(t,i,n){let r=1e9,o=-1e9,l=[];function a(t,i,a,h,c){let f=e.coordsAtPos(t,t==n.to?-2:2),p=e.coordsAtPos(a,a==n.from?2:-2);f&&p&&(r=Math.min(f.top,p.top,r),o=Math.max(f.bottom,p.bottom,o),c==ex.LTR?l.push(s&&i?u:f.left,s&&h?d:p.right):l.push(!s&&h?u:p.left,!s&&i?d:f.right))}let h=null!=t?t:n.from,c=null!=i?i:n.to;for(let n of e.visibleRanges)if(n.to>h&&n.from<c)for(let r=Math.max(n.from,h),s=Math.min(n.to,c);;){let n=e.state.doc.lineAt(r);for(let o of e.bidiSpans(n)){let e=o.from+n.from,l=o.to+n.from;if(e>=s)break;l>r&&a(Math.max(e,r),null==t&&e<=h,Math.min(l,s),null==i&&l>=c,o.dir)}if((r=n.to+1)>=s)break}return 0==l.length&&a(h,null==t,c,null==i,e.textDirection),{top:r,bottom:o,horizontal:l}}function b(e,t){let i=l.top+(t?e.top:e.bottom);return{top:i,bottom:i,horizontal:[]}}}(e,t,i);{let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=iV(e);return[new iH(t,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}}}function iV(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==ex.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function iF(e,t,i,n){let r=e.coordsAtPos(t,2*i);if(!r)return n;let s=e.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,l=e.posAtCoords({x:s.left+1,y:o}),a=e.posAtCoords({x:s.right-1,y:o});return null==l||null==a?n:{from:Math.max(n.from,Math.min(l,a)),to:Math.min(n.to,Math.max(l,a))}}class iW{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(iz)!=e.state.facet(iz)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(iz);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((e,t)=>{var i;return i=this.drawn[t],!(e.constructor==i.constructor&&e.eq(i))})){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}let iz=r.r$.define();function i$(e){return[e0.define(t=>new iW(t,e)),iz.of(e)]}let iq=!Y.ios,iU=r.r$.define({combine:e=>(0,r.BO)(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function iK(e={}){return[iU.of(e),iX,iJ,iZ,eq.of(!0)]}function iG(e){return e.startState.facet(iU)!=e.state.facet(iU)}let iX=i$({above:!0,markers(e){let{state:t}=e,i=t.facet(iU),n=[];for(let s of t.selection.ranges){let o=s==t.selection.main;if(s.empty?!o||iq:i.drawRangeCursor){let t=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",i=s.empty?s:r.jT.cursor(s.head,s.head>s.anchor?-1:1);for(let r of iH.forRange(e,t,i))n.push(r)}}return n},update(e,t){e.transactions.some(e=>e.selection)&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let i=iG(e);return i&&iY(e.state,t),e.docChanged||e.selectionSet||i},mount(e,t){iY(t.state,e)},class:"cm-cursorLayer"});function iY(e,t){t.style.animationDuration=e.facet(iU).cursorBlinkRate+"ms"}let iJ=i$({above:!1,markers:e=>e.state.selection.ranges.map(t=>t.empty?[]:iH.forRange(e,"cm-selectionBackground",t)).reduce((e,t)=>e.concat(t)),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||iG(e),class:"cm-selectionLayer"}),iQ={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};iq&&(iQ[".cm-line"].caretColor=iQ[".cm-content"].caretColor="transparent !important");let iZ=r.Wl.highest(iM.theme(iQ)),i0=r.Py.define({map:(e,t)=>null==e?null:t.mapPos(e)});function i1(e,t,i,n,r){t.lastIndex=0;for(let s=e.iterRange(i,n),o=i,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=t.exec(s.value);)r(o+l.index,l)}null!=/x/.unicode?"gu":"g";class i2 extends el{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),"string"==typeof this.content?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?g(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),n=x(t[0],"rtl"!=i.direction),r=parseInt(i.lineHeight);return n.bottom-n.top>1.5*r?{left:n.left,right:n.right,top:n.top,bottom:n.top+r}:n}ignoreEvent(){return!1}}function i3(e){return e0.fromClass(class{constructor(t){this.view=t,this.placeholder=e?eh.set([eh.widget({widget:new i2(e),side:1}).range(0)]):eh.none}get decorations(){return this.view.state.doc.length?eh.none:this.placeholder}},{decorations:e=>e.decorations})}let i8="-10000px";class i4{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e);let r=null;this.tooltipViews=this.tooltips.map(e=>r=i(e,r))}update(e,t){var i;let n=e.state.facet(this.facet),r=n.filter(e=>e);if(n===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let s=[],o=t?[]:null;for(let i=0;i<r.length;i++){let n=r[i],l=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(l=e)}if(l<0)s[i]=this.createTooltipView(n,i?s[i-1]:null),o&&(o[i]=!!n.above);else{let n=s[i]=this.tooltipViews[l];o&&(o[i]=t[l]),n.update&&n.update(e)}}}for(let e of this.tooltipViews)0>s.indexOf(e)&&(this.removeTooltipView(e),null===(i=e.destroy)||void 0===i||i.call(e));return t&&(o.forEach((e,i)=>t[i]=e),t.length=o.length),this.input=n,this.tooltips=r,this.tooltipViews=s,!0}}function i5(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}let i9=r.r$.define({combine:e=>{var t,i,n;return{position:Y.ios?"absolute":(null===(t=e.find(e=>e.position))||void 0===t?void 0:t.position)||"fixed",parent:(null===(i=e.find(e=>e.parent))||void 0===i?void 0:i.parent)||null,tooltipSpace:(null===(n=e.find(e=>e.tooltipSpace))||void 0===n?void 0:n.tooltipSpace)||i5}}}),i7=new WeakMap,i6=e0.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(i9);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new i4(e,ni,(e,t)=>this.createTooltip(e,t),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver)for(let e of(this.intersectionObserver.disconnect(),this.manager.tooltipViews))this.intersectionObserver.observe(e.dom)}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let i=t||e.geometryChanged,n=e.state.facet(i9);if(n.position!=this.position&&!this.madeAbsolute){for(let e of(this.position=n.position,this.manager.tooltipViews))e.dom.style.position=this.position;i=!0}if(n.parent!=this.parent){for(let e of(this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer(),this.manager.tooltipViews))this.container.appendChild(e.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e,t){let i=e.create(this.view),n=t?t.dom:null;if(i.dom.classList.add("cm-tooltip"),e.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",i.dom.appendChild(e)}return i.dom.style.position=this.position,i.dom.style.top=i8,i.dom.style.left="0px",this.container.insertBefore(i.dom,n),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var e,t,i;for(let t of(this.view.win.removeEventListener("resize",this.measureSoon),this.manager.tooltipViews))t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(i=this.intersectionObserver)||void 0===i||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect(),t=1,i=1,n=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(Y.gecko)n=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==i8&&"0px"==e.style.left){let t=e.getBoundingClientRect();n=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(n||"absolute"==this.position){if(this.parent){let e=this.parent.getBoundingClientRect();e.width&&e.height&&(t=e.width/this.parent.offsetWidth,i=e.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:i}=this.view.viewState)}return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(i9).tooltipSpace(this.view),scaleX:t,scaleY:i,makeAbsolute:n}}writeMeasure(e){var t;if(e.makeAbsolute)for(let e of(this.madeAbsolute=!0,this.position="absolute",this.manager.tooltipViews))e.dom.style.position="absolute";let{editor:i,space:n,scaleX:r,scaleY:s}=e,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:c}=h,u=e.pos[l],d=e.size[l];if(!u||u.bottom<=Math.max(i.top,n.top)||u.top>=Math.min(i.bottom,n.bottom)||u.right<Math.max(i.left,n.left)-.1||u.left>Math.min(i.right,n.right)+.1){c.style.top=i8;continue}let f=a.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=d.right-d.left,m=null!==(t=i7.get(h))&&void 0!==t?t:d.bottom-d.top,y=h.offset||nt,v=this.view.textDirection==ex.LTR,w=d.width>n.right-n.left?v?n.left:n.right-d.width:v?Math.max(n.left,Math.min(u.left-(f?14:0)+y.x,n.right-g)):Math.min(Math.max(n.left,u.left-g+(f?14:0)-y.x),n.right-g),b=this.above[l];!a.strictSide&&(b?u.top-(d.bottom-d.top)-y.y<n.top:u.bottom+(d.bottom-d.top)+y.y>n.bottom)&&b==n.bottom-u.bottom>u.top-n.top&&(b=this.above[l]=!b);let x=(b?u.top-n.top:n.bottom-u.bottom)-p;if(x<m&&!1!==h.resize){if(x<this.view.defaultLineHeight){c.style.top=i8;continue}i7.set(h,m),c.style.height=(m=x)/s+"px"}else c.style.height&&(c.style.height="");let S=b?u.top-m-p-y.y:u.bottom+p+y.y,k=w+g;if(!0!==h.overlap)for(let e of o)e.left<k&&e.right>w&&e.top<S+m&&e.bottom>S&&(S=b?e.top-m-2-p:e.bottom+p+2);if("absolute"==this.position?(c.style.top=(S-e.parent.top)/s+"px",c.style.left=(w-e.parent.left)/r+"px"):(c.style.top=S/s+"px",c.style.left=w/r+"px"),f){let e=u.left+(v?y.x:-y.x)-(w+14-7);f.style.left=e/r+"px"}!0!==h.overlap&&o.push({left:w,top:S,right:k,bottom:S+m}),c.classList.toggle("cm-tooltip-above",b),c.classList.toggle("cm-tooltip-below",!b),h.positioned&&h.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=i8}},{eventObservers:{scroll(){this.maybeMeasure()}}}),ne=iM.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),nt={x:0,y:0},ni=r.r$.define({enables:[i6,ne]}),nn=r.r$.define({combine:e=>e.reduce((e,t)=>e.concat(t),[])});class nr{static create(e){return new nr(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new i4(e,nn,(e,t)=>this.createHostedView(e,t),e=>e.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(void 0!==n){if(void 0===t)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}function ns(e,t){let i=e.plugin(i6);if(!i)return null;let n=i.manager.tooltips.indexOf(t);return n<0?null:i.manager.tooltipViews[n]}let no=r.r$.define({combine(e){let t,i;for(let n of e)t=t||n.topContainer,i=i||n.bottomContainer;return{topContainer:t,bottomContainer:i}}});function nl(e,t){let i=e.plugin(na),n=i?i.specs.indexOf(t):-1;return n>-1?i.panels[n]:null}let na=e0.fromClass(class{constructor(e){this.input=e.state.facet(nu),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(no);for(let i of(this.top=new nh(e,!0,t.topContainer),this.bottom=new nh(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top)),this.panels))i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(e){let t=e.state.facet(no);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new nh(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new nh(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(nu);if(i!=this.input){let t=i.filter(e=>e),n=[],r=[],s=[],o=[];for(let i of t){let t=this.specs.indexOf(i),l;t<0?(l=i(e.view),o.push(l)):(l=this.panels[t]).update&&l.update(e),n.push(l),(l.top?r:s).push(l)}for(let e of(this.specs=t,this.panels=n,this.top.sync(r),this.bottom.sync(s),o))e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>iM.scrollMargins.of(t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class nh{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&0>e.indexOf(t)&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=nc(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=nc(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function nc(e){let t=e.nextSibling;return e.remove(),t}let nu=r.r$.define({enables:na});class nd extends r.uU{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}nd.prototype.elementClass="",nd.prototype.toDOM=void 0,nd.prototype.mapMode=r.gc.TrackBefore,nd.prototype.startSide=nd.prototype.endSide=-1,nd.prototype.point=!0;let nf=r.r$.define(),np=r.r$.define(),ng=r.r$.define(),nm=r.r$.define({combine:e=>e.some(e=>e)}),ny=e0.fromClass(class{constructor(e){for(let t of(this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(ng).map(t=>new nx(e,t)),this.gutters))this.dom.appendChild(t.dom);this.fixed=!e.state.facet(nm),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,i=e.view.viewport,n=Math.min(t.to,i.to)-Math.max(t.from,i.from);this.syncGutters(n<(i.to-i.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(nm)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let i=r.Xs.iter(this.view.state.facet(nf),this.view.viewport.from),n=[],s=this.gutters.map(e=>new nb(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(e.type)){let t=!0;for(let r of e.type)if(r.type==ea.Text&&t){for(let e of(nw(i,n,r.from),s))e.line(this.view,r,n);t=!1}else if(r.widget)for(let e of s)e.widget(this.view,r)}else if(e.type==ea.Text)for(let t of(nw(i,n,e.from),s))t.line(this.view,e,n);else if(e.widget)for(let t of s)t.widget(this.view,e);for(let e of s)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(ng),i=e.state.facet(ng),n=e.docChanged||e.heightChanged||e.viewportChanged||!r.Xs.eq(e.startState.facet(nf),e.state.facet(nf),e.view.viewport.from,e.view.viewport.to);if(t==i)for(let t of this.gutters)t.update(e)&&(n=!0);else{n=!0;let r=[];for(let n of i){let i=t.indexOf(n);i<0?r.push(new nx(this.view,n)):(this.gutters[i].update(e),r.push(this.gutters[i]))}for(let e of this.gutters)e.dom.remove(),0>r.indexOf(e)&&e.destroy();for(let e of r)this.dom.appendChild(e.dom);this.gutters=r}return n}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>iM.scrollMargins.of(t=>{let i=t.plugin(e);return i&&0!=i.gutters.length&&i.fixed?t.textDirection==ex.LTR?{left:i.dom.offsetWidth*t.scaleX}:{right:i.dom.offsetWidth*t.scaleX}:null})});function nv(e){return Array.isArray(e)?e:[e]}function nw(e,t,i){for(;e.value&&e.from<=i;)e.from==i&&t.push(e.value),e.next()}class nb{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=r.Xs.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,r=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==n.elements.length){let t=new nS(e,s,r,i);n.elements.push(t),n.dom.appendChild(t.dom)}else n.elements[this.i].update(e,s,r,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];nw(this.cursor,n,t.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,t,n);r&&n.unshift(r);let s=this.gutter;(0!=n.length||s.config.renderEmptyElements)&&this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),n=i?[i]:null;for(let i of e.state.facet(np)){let r=i(e,t.widget,t);r&&(n||(n=[])).push(r)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class nx{constructor(e,t){for(let i in this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,s;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let e=r.getBoundingClientRect();s=(e.top+e.bottom)/2}else s=n.clientY;let o=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,o,n)&&n.preventDefault()});this.markers=nv(t.markers(e)),t.initialSpacer&&(this.spacer=new nS(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=nv(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let i=e.view.viewport;return!r.Xs.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class nS{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),!function(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0}(this.markers,n)&&this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,s=0;;){let o=s,l=r<t.length?t[r++]:null,a=!1;if(l){let e=l.elementClass;e&&(i+=" "+e);for(let e=s;e<this.markers.length;e++)if(this.markers[e].compare(l)){o=e,a=!0;break}}else o=this.markers.length;for(;s<o;){let e=this.markers[s++];if(e.toDOM){e.destroy(n);let t=n.nextSibling;n.remove(),n=t}}if(!l)break;l.toDOM&&(a?n=n.nextSibling:this.dom.insertBefore(l.toDOM(e),n)),a&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}let nk=r.r$.define(),nM=r.r$.define(),nC=r.r$.define({combine:e=>(0,r.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let e in t){let n=i[e],r=t[e];i[e]=n?(e,t,i)=>n(e,t,i)||r(e,t,i):r}return i}})});class nO extends nd{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function nT(e,t){return e.state.facet(nC).formatNumber(t,e.state)}let nA=ng.compute([nC],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(nk),lineMarker:(e,t,i)=>i.some(e=>e.toDOM)?null:new nO(nT(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,i)=>{for(let n of e.state.facet(nM)){let r=n(e,t,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(nC)!=e.state.facet(nC),initialSpacer:e=>new nO(nT(e,nD(e.state.doc.lines))),updateSpacer(e,t){let i=nT(t.view,nD(t.view.state.doc.lines));return i==e.number?e:new nO(i)},domEventHandlers:e.facet(nC).domEventHandlers}));function nE(e={}){let t;return[nC.of(e),t=[ny],nA]}function nD(e){let t=9;for(;t<e;)t=10*t+9;return t}},1237:(e,t,i)=>{"use strict";i.d(t,{Ds:()=>n,RH:()=>h,bv:()=>o,kZ:()=>r,kb:()=>l,qA:()=>s,tq:()=>c});let n=(e,t=200)=>{let i=0;return(...n)=>new Promise(r=>{i&&(clearTimeout(i),r("cancel")),i=window.setTimeout(()=>{e.apply(void 0,n),i=0,r("done")},t)})},r=(e,t={_blank:!0,nofollow:!0})=>{let i=document.createElement("a");i.href=e,t._blank&&(i.target="_blank"),t.nofollow&&(i.rel="noopener noreferrer"),i.click()},s=()=>{let e=-1;return(t,i,n,r=100)=>{let s=()=>{n&&("number"==typeof r?setTimeout(n,r):n())};-1!==e&&(cancelAnimationFrame(e),s());let o=t.scrollTop,l=()=>{e=-1;let n=i-o;o+=n/5,1>Math.abs(n)?(t.scrollTo(0,i),s()):(t.scrollTo(0,o),e=requestAnimationFrame(l))};e=requestAnimationFrame(l)}},o=(s(),e=>{let t=t=>{let{scrollHeight:i,scrollWidth:n,offsetHeight:r,offsetWidth:s,scrollLeft:o,scrollTop:l}=e,a=t.x,h=t.y,c=t=>{let c=l+h-t.y,u=o+a-t.x,d={};u>=0&&u<=n-s&&(d.left=u),c>=0&&c<=i-r&&(d.top=c),e.scroll(d)};document.addEventListener("mousemove",c);let u=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)};document.addEventListener("mouseup",u)};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}}),l=()=>`${Date.now().toString(36)}${Math.random().toString(36).substring(2)}`,a=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),h=(e,t,i={})=>{let{excludeKeys:n}=i;for(let r in t)n&&n(r)?e[r]=t[r]:a(t[r])&&a(e[r])?e[r]=h(e[r],t[r],i):e[r]=t[r];return e},c=(e={})=>{let{forceScreenWidth:t=!1,threshold:i=768,fallbackToScreenWidth:n=!0}=e,r=navigator.userAgent,s=/android|ipad|iphone|ipod|windows phone|blackberry/i.test(r),o="ontouchstart"in window||navigator.maxTouchPoints>0,l=window.matchMedia(`(max-width: ${i}px)`).matches;return t?l:!!s&&!!o||!!n&&l}},4549:(e,t,i)=>{"use strict";i.d(t,{M:()=>w,a:()=>f,b:()=>p,c:()=>v,d:()=>y,f:()=>m,g:()=>d,p:()=>r,s:()=>g});var n=i(1237);let r="md-editor",s="https://unpkg.com",o=`${s}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,l={main:`${s}/prettier@3.3.3/standalone.js`,markdown:`${s}/prettier@3.3.3/plugins/markdown.js`},a={css:`${s}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${s}/cropperjs@1.6.2/dist/cropper.min.js`},h=`${s}/screenfull@5.2.0/dist/screenfull.js`,c=`${s}/mermaid@11.3.0/dist/mermaid.min.js`,u={js:`${s}/katex@0.16.11/dist/katex.min.js`,css:`${s}/katex@0.16.11/dist/katex.min.css`},d={a11y:{light:`${s}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${s}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${s}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${s}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${s}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${s}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${s}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${s}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${s}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${s}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${s}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${s}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${s}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${s}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${s}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${s}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},f=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],p=["markdownTotal","=","scrollSwitch"],g={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},m={modelValue:"",theme:"light",className:"",onChange:()=>{},onSave:()=>{},pageFullscreen:!1,preview:!0,htmlPreview:!1,language:"zh-CN",toolbars:f,toolbarsExclude:[],noPrettier:!1,onHtmlChanged:()=>{},onGetCatalog:()=>{},tabWidth:2,showCodeRowNumber:!0,previewTheme:"default",mdHeadingId:e=>e,style:{},tableShape:[6,4],noMermaid:!1,sanitize:e=>e,placeholder:"",noKatex:!1,defToolbars:[],onError:()=>{},codeTheme:"atom",footers:p,scrollAuto:!0,defFooters:[],formatCopiedText:e=>e,noUploadImg:!1,codeStyleReverse:!0,codeStyleReverseList:["default","mk-cute"],autoFocus:!1,disabled:!1,readOnly:!1,autoDetectCode:!1,noHighlight:!1,noImgZoomIn:!1,inputBoxWidth:"50%",sanitizeMermaid:e=>Promise.resolve(e),transformImgUrl:e=>e,codeFoldable:!0,autoFoldThreshold:30},y={editorExtensions:{highlight:{js:o,css:d},prettier:{standaloneJs:l.main,parserMarkdownJs:l.markdown},cropper:{...a},screenfull:{js:h},mermaid:{js:c},katex:{...u}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,t)=>t,markdownItConfig:()=>{},markdownItPlugins:e=>e,mermaidConfig:e=>e,katexConfig:e=>e},v=e=>(0,n.RH)(y,e,{excludeKeys:e=>/[iI]{1}nstance/.test(e)}),w=170},5007:(e,t,i)=>{"use strict";i.d(t,{I0:()=>N,v9:()=>d,zt:()=>_});var n=i(7294),r=i(1103),s=Symbol.for("react-redux-context"),o="undefined"!=typeof globalThis?globalThis:{},l=function(){if(!n.createContext)return{};let e=o[s]??(o[s]=new Map),t=e.get(n.createContext);return t||(t=n.createContext(null),e.set(n.createContext,t)),t}();function a(e=l){return function(){return n.useContext(e)}}var h=a(),c=()=>{throw Error("uSES not initialized!")},u=(e,t)=>e===t,d=function(e=l){let t=e===l?h:a(e),i=(e,i={})=>{let{equalityFn:r=u,devModeChecks:s={}}="function"==typeof i?{equalityFn:i}:i,{store:o,subscription:l,getServerState:a,stabilityCheck:h,identityFunctionCheck:d}=t();n.useRef(!0);let f=n.useCallback({[e.name]:t=>e(t)}[e.name],[e,h,s.stabilityCheck]),p=c(l.addNestedSub,o.getState,a||o.getState,f,r);return n.useDebugValue(p),p};return Object.assign(i,{withTypes:()=>i}),i}(),f=Symbol.for("react.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),w=Symbol.for("react.context"),b=Symbol.for("react.server_context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.offscreen"),Symbol.for("react.client.reference");var O={notify(){},get:()=>[]},T=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement),A="undefined"!=typeof navigator&&"ReactNative"===navigator.product,E=T||A?n.useLayoutEffect:n.useEffect,D={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},P={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},R={[x]:{$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},[M]:P};Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var _=function({store:e,context:t,children:i,serverState:r,stabilityCheck:s="once",identityFunctionCheck:o="once"}){let a=n.useMemo(()=>{let t=function(e,t){let i;let n=O,r=0,s=!1;function o(){h.onStateChange&&h.onStateChange()}function l(){if(r++,!i){let t,r;i=e.subscribe(o),t=null,r=null,n={clear(){t=null,r=null},notify(){(()=>{let e=t;for(;e;)e.callback(),e=e.next})()},get(){let e=[],i=t;for(;i;)e.push(i),i=i.next;return e},subscribe(e){let i=!0,n=r={callback:e,next:null,prev:r};return n.prev?n.prev.next=n:t=n,function(){i&&null!==t&&(i=!1,n.next?n.next.prev=n.prev:r=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}}function a(){r--,i&&0===r&&(i(),i=void 0,n.clear(),n=O)}let h={addNestedSub:function(e){l();let t=n.subscribe(e),i=!1;return()=>{i||(i=!0,t(),a())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,l())},tryUnsubscribe:function(){s&&(s=!1,a())},getListeners:()=>n};return h}(e);return{store:e,subscription:t,getServerState:r?()=>r:void 0,stabilityCheck:s,identityFunctionCheck:o}},[e,r,s,o]),h=n.useMemo(()=>e.getState(),[e]);return E(()=>{let{subscription:t}=a;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),h!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}},[a,h]),n.createElement((t||l).Provider,{value:a},i)};function j(e=l){let t=e===l?h:a(e),i=()=>{let{store:e}=t();return e};return Object.assign(i,{withTypes:()=>i}),i}var L=j(),N=function(e=l){let t=e===l?L:j(e),i=()=>t().dispatch;return Object.assign(i,{withTypes:()=>i}),i}();c=r.useSyncExternalStoreWithSelector,n.useSyncExternalStore},8699:(e,t,i)=>{"use strict";i.d(t,{V:()=>o});let n="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),r="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class o{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}for(let t in e)!function e(t,r,s,o){let l=[],a=/^@(\w+)\b/.exec(t[0]),h=a&&"keyframes"==a[1];if(a&&null==r)return s.push(t[0]+";");for(let i in r){let o=r[i];if(/&/.test(i))e(i.split(/,\s*/).map(e=>t.map(t=>e.replace(/&/,t))).reduce((e,t)=>e.concat(t)),o,s);else if(o&&"object"==typeof o){if(!a)throw RangeError("The value of a property ("+i+") should be a primitive value.");e(n(i),o,l,h)}else null!=o&&l.push(i.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+o+";")}(l.length||h)&&s.push((!i||a||o?t:t.map(i)).join(", ")+" {"+l.join(" ")+"}")}(n(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=s[n]||1;return s[n]=e+1,"ͼ"+e.toString(36)}static mount(e,t,i){let n=e[r],s=i&&i.nonce;n?s&&n.setNonce(s):n=new a(e,s),n.mount(Array.isArray(t)?t:[t],e)}}let l=new Map;class a{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let t=l.get(i);if(t)return e[r]=t;this.sheet=new n.CSSStyleSheet,l.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[r]=this}mount(e,t){let i=this.sheet,n=0,r=0;for(let t=0;t<e.length;t++){let s=e[t],o=this.modules.indexOf(s);if(o<r&&o>-1&&(this.modules.splice(o,1),r--,o=-1),-1==o){if(this.modules.splice(r++,0,s),i)for(let e=0;e<s.rules.length;e++)i.insertRule(s.rules[e],n++)}else{for(;r<o;)n+=this.modules[r++].rules.length;n+=s.rules.length,r++}}if(i)0>t.adoptedStyleSheets.indexOf(this.sheet)&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let i=t.head||t;this.styleTag.parentNode!=i&&i.insertBefore(this.styleTag,i.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}},4147:e=>{"use strict";e.exports=JSON.parse('{"HO":{"I1":"^5.2.0"}}')}},e=>{var t=t=>e(e.s=t);e.O(0,[9774,179],()=>(t(6840),t(3079))),_N_E=e.O()}]);